C:\Users\Nico\Documents\Thomas more\Digi-sketch\programma\DigiSketch.xsf 
       1       1   00000                  org 0000h
       2       2   00000 020022           ljmp   main
       3       3   00003                  
       4       4   0000B                  org 000bh
       5       5   0000B C0E0                 push    acc
       6       6   0000D C0D0                 push    psw
       7       7   0000F E5A0                 mov     a,p2_data
       8       8   00011 B51403               cjne    a,ROTARYTEMP,verzet
       9       9   00014 02001D               ljmp    stopRotary
      10      10   00017                  verzet:
      11      11   00017 F8                   mov     r0,a
      12      12   00018 121545               lcall   debug
      13      13   0001B F514                 mov     ROTARYTEMP,a
      14      14   0001D                  stopRotary:
      15      15   0001D D0D0                 pop     psw
      16      16   0001F D0E0                 pop     acc
      17      17   00021 32               reti
      18      18   00022                  
      19      19   00022                  ;------------------------------------------------------------------
      20      20   00022                  ;Hoofd programma
      21      21   00022                  ;------------------------------------------------------------------
      22      22   00022                  main:
      23      23   00022 75817F               mov     sp,#7fh                 ;stackpointer instellen
      24      24   00025 12002B               lcall   inits
      25      25   00028                  
      26      26   00028                      ;Mode set
      27      27   00028                  ;    mov     COMANDREG,#10000000b
      28      28   00028                  ;    lcall   comandWrite
      29      29   00028                      ;Display mode
      30      30   00028                  ;    mov     COMANDREG,#10011100b
      31      31   00028                  ;    lcall   comandWrite
      32      32   00028                  
      33      33   00028                      ;adres data pointer
      34      34   00028                  ;    mov     DATAREG,#00h            ;lower address
      35      35   00028                  ;    lcall   dataWrite
      36      36   00028                  ;    mov     DATAREG,#00h
      37      37   00028                  ;    lcall   dataWrite
      38      38   00028                  ;    mov     COMANDREG,#24h
      39      39   00028                  ;    lcall   comandWrite
      40      40   00028                      ;auto write mode
      41      41   00028                  ;    mov     COMANDREG,#b0h
      42      42   00028                  ;    lcall   comandWrite
      43      43   00028                  
      44      44   00028                  ;lus0:
      45      45   00028                  ;    mov     dptr,#startscherm       ;begin afbeelding in pointer steken
      46      46   00028                  ;    mov     dptr,#rogue       ;begin afbeelding in pointer steken
      47      47   00028                  ;lus:
      48      48   00028                  ;    clr     a
      49      49   00028                  ;    movc    a,@a+dptr               ;get byte
      50      50   00028                  ;    cjne    a,#10101010b,next
      51      51   00028                  ;    ljmp    stop
      52      52   00028                  ;next:
      53      53   00028                  ;    mov     DATAREG,a
      54      54   00028                  ;    lcall   dataAutoWrite
      55      55   00028                  ;    inc     dptr
      56      56   00028                  ;    ljmp    lus
      57      57   00028                      ;data auto read af zetten
      58      58   00028                  ;    mov     COMANDREG,#b2h
      59      59   00028                  ;    lcall   comandWrite
      60      60   00028                  stop:
      61      61   00028                  
      62      62   00028 020028               ljmp    stop
      63      63   0002B                  
      64      64   0002B                  
      65      65   0002B                  ;------------------------------------------------------------------
      66      66   0002B                  ;Initializatie van alle componenten nodig in het hoofd programma
      67      67   0002B                  ;------------------------------------------------------------------
      68      68   0002B                  inits:
      69      69   0002B 12196F               lcall   initsio                 ;voor debug
      70      70   0002E 75B200               mov     port_page,#000h         ;selecteer poort page 0
      71      71   00031                  ;    lcall   initGLCD                ;initializatie grafisch LCD scherm, MOET EERST GEBEUREN
      72      72   00031 1215A4               lcall   initRotary
      73      73   00034                  ;    lcall   clearScreen
      74      74   00034 22               ret
      75      75   00035                  
      76      76   00035                  
      77      77   00035                  ;include filles
      79       1   00035                  startscherm:
      80       2   00035 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
      81       3   0005D 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
      82       4   00085 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
      83       5   000AD 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
      84       6   000D5 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
      85       7   000FD 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
      86       8   00125 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
      87       9   0014D 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
      88      10   00175 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
      89      11   0019D 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
      90      12   001C5 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
      91      13   001ED 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
      92      14   00215 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
      93      15   0023D 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
      94      16   00265 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
      95      17   0028D 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
      96      18   002B5 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
      97      19   002DD 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
      98      20   00305 0000000000000F3C db 000000b,000000b,000000b,000000b,000000b,000000b,001111b,111100b,000000b,000000b,000000b,000000b,011111b,110000b,000000b,000000b,000000b,000001b,110000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000001b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         000000001F300000
                         0001300000000000
                         0000000000010000
                         0000000000000000
      99      21   0032D 00073F3F00001F3C db 000000b,000111b,111111b,111111b,000000b,000000b,011111b,111100b,000000b,000000b,000000b,000000b,111111b,111000b,000000b,000000b,000000b,011111b,111110b,000000b,011111b,111100b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000111b,000000b,000000b,000000b,000000b,000111b,111111b,100000b,000000b,000000b,000000b
                         000000003F380000
                         001F3E001F3C0000
                         0000000000070000
                         0000073F20000000
     100      22   00355 00073F3938001F3E db 000000b,000111b,111111b,111001b,111000b,000000b,011111b,111110b,000000b,000000b,000000b,000000b,111111b,111000b,000000b,000000b,000001b,111110b,000011b,100000b,011111b,111100b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,011111b,000000b,000000b,000000b,000000b,000011b,111111b,100000b,000000b,000000b,000000b
                         000000003F380000
                         013E03201F3C0000
                         00000000001F0000
                         0000033F20000000
     101      23   0037D 00073F3006000F3C db 000000b,000111b,111111b,110000b,000110b,000000b,001111b,111100b,000000b,000000b,000000b,000000b,111111b,111000b,000000b,000000b,000011b,111110b,000000b,110000b,011111b,111100b,000000b,000000b,000000b,000000b,000000b,000000b,000011b,111111b,000000b,000000b,000000b,000000b,000011b,111111b,100000b,000000b,000000b,000000b
                         000000003F380000
                         033E00301F3C0000
                         00000000033F0000
                         0000033F20000000
     102      24   003A5 00073F3003000730 db 000000b,000111b,111111b,110000b,000011b,000000b,000111b,110000b,000000b,000000b,000000b,110000b,001111b,100000b,000000b,000000b,000111b,111110b,000000b,000000b,011111b,111100b,000000b,000000b,000000b,000000b,000000b,000000b,000111b,111111b,000000b,000000b,000000b,000000b,000011b,111111b,100000b,000000b,000000b,000000b
                         000000300F200000
                         073E00001F3C0000
                         00000000073F0000
                         0000033F20000000
     103      25   003CD 00073F3001200000 db 000000b,000111b,111111b,110000b,000001b,100000b,000000b,000000b,000000b,000000b,000001b,100000b,000000b,000000b,000000b,000000b,001111b,111111b,000000b,000000b,011111b,111100b,000000b,000000b,000000b,000000b,000000b,000000b,000111b,111111b,000000b,000000b,000000b,000000b,000011b,111111b,100000b,000000b,000000b,000000b
                         0000012000000000
                         0F3F00001F3C0000
                         00000000073F0000
                         0000033F20000000
     104      26   003F5 00073F3000301F3C db 000000b,000111b,111111b,110000b,000000b,110000b,011111b,111100b,000000b,011111b,111111b,000000b,111111b,111000b,000000b,000000b,001111b,111111b,100000b,000000b,011111b,111100b,000000b,001110b,000000b,000111b,111110b,000000b,111111b,111111b,111100b,000001b,111111b,110000b,000011b,111111b,100001b,111111b,100000b,000000b
                         001F3F003F380000
                         0F3F20001F3C000E
                         00073E003F3F3C01
                         3F30033F213F2000
     105      27   0041D 00073F3000101F3C db 000000b,000111b,111111b,110000b,000000b,010000b,011111b,111100b,000001b,111100b,011111b,000000b,111111b,111000b,000000b,000000b,001111b,111111b,110000b,000000b,011111b,111100b,000000b,111110b,000000b,001111b,000111b,100000b,000111b,111111b,000000b,000011b,111100b,001100b,000011b,111111b,100111b,111111b,110000b,000000b
                         013C1F003F380000
                         0F3F30001F3C003E
                         000F0720073F0003
                         3C0C033F273F3000
     106      28   00445 00073F3000081F3C db 000000b,000111b,111111b,110000b,000000b,001000b,011111b,111100b,000011b,111100b,011111b,100000b,111111b,111000b,000000b,000000b,001111b,111111b,111000b,000000b,011111b,111100b,000001b,100000b,000000b,111110b,000011b,110000b,000111b,111111b,000000b,001111b,111000b,000111b,000011b,111111b,111100b,111111b,111000b,000000b
                         033C1F203F380000
                         0F3F38001F3C0120
                         003E0330073F000F
                         3807033F3C3F3800
     107      29   0046D 00073F3000081F3C db 000000b,000111b,111111b,110000b,000000b,001000b,011111b,111100b,000111b,111100b,011111b,110000b,111111b,111000b,000000b,000000b,001111b,111111b,111100b,000000b,011111b,111100b,000110b,000000b,000001b,111110b,000011b,111000b,000111b,111111b,000000b,001111b,111000b,000011b,000011b,111111b,110000b,111111b,111000b,000000b
                         073C1F303F380000
                         0F3F3C001F3C0600
                         013E0338073F000F
                         3803033F303F3800
     108      30   00495 00073F3000041F3C db 000000b,000111b,111111b,110000b,000000b,000100b,011111b,111100b,001111b,111100b,011111b,111000b,111111b,111000b,000000b,000000b,001111b,111111b,111100b,000000b,011111b,111100b,001110b,000000b,000001b,111110b,000011b,111100b,000111b,111111b,000000b,011111b,111000b,000001b,000011b,111111b,100000b,111111b,111100b,000000b
                         0F3C1F383F380000
                         0F3F3C001F3C0E00
                         013E033C073F001F
                         3801033F203F3C00
     109      31   004BD 00073F3000041F3C db 000000b,000111b,111111b,110000b,000000b,000100b,011111b,111100b,001111b,111100b,011111b,111000b,111111b,111000b,000000b,000000b,000111b,111111b,111110b,000000b,011111b,111100b,011111b,000000b,000011b,111110b,000011b,111100b,000111b,111111b,000000b,111111b,111000b,000000b,000011b,111111b,100000b,011111b,111100b,000000b
                         0F3C1F383F380000
                         073F3E001F3C1F00
                         033E033C073F003F
                         3800033F201F3C00
     110      32   004E5 00073F3000041F3C db 000000b,000111b,111111b,110000b,000000b,000100b,011111b,111100b,001111b,111100b,011111b,111000b,111111b,111000b,000000b,000000b,000111b,111111b,111111b,000000b,011111b,111100b,111111b,000000b,000111b,111110b,000011b,111110b,000111b,111111b,000000b,111111b,111000b,000000b,000011b,111111b,100000b,011111b,111100b,000000b
                         0F3C1F383F380000
                         073F3F001F3C3F00
                         073E033E073F003F
                         3800033F201F3C00
     111      33   0050D 00073F3000041F3C db 000000b,000111b,111111b,110000b,000000b,000100b,011111b,111100b,001111b,111100b,011111b,111000b,111111b,111000b,000000b,000000b,000011b,111111b,111111b,100000b,011111b,111111b,111111b,100000b,000111b,111110b,000011b,111110b,000111b,111111b,000000b,111111b,111000b,000000b,000011b,111111b,100000b,011111b,111100b,000000b
                         0F3C1F383F380000
                         033F3F201F3F3F20
                         073E033E073F003F
                         3800033F201F3C00
     112      34   00535 00073F3000041F3C db 000000b,000111b,111111b,110000b,000000b,000100b,011111b,111100b,001111b,111100b,011111b,111000b,111111b,111000b,000000b,000000b,000001b,111111b,111111b,110000b,011111b,111111b,111111b,100000b,000111b,111110b,000011b,111110b,000111b,111111b,000001b,111111b,111000b,000000b,000011b,111111b,100000b,011111b,111100b,000000b
                         0F3C1F383F380000
                         013F3F301F3F3F20
                         073E033E073F013F
                         3800033F201F3C00
     113      35   0055D 00073F3000041F3C db 000000b,000111b,111111b,110000b,000000b,000100b,011111b,111100b,001111b,111100b,011111b,110000b,111111b,111001b,111111b,111111b,000000b,111111b,111111b,110000b,011111b,111111b,111111b,110000b,000111b,111111b,001111b,111111b,000111b,111111b,000001b,111111b,111000b,000000b,000011b,111111b,100000b,011111b,111100b,000000b
                         0F3C1F303F393F3F
                         003F3F301F3F3F30
                         073F0F3F073F013F
                         3800033F201F3C00
     114      36   00585 00073F3000041F3C db 000000b,000111b,111111b,110000b,000000b,000100b,011111b,111100b,000111b,111100b,011111b,110000b,111111b,111000b,000000b,000000b,000000b,011111b,111111b,111000b,011111b,111101b,111111b,111000b,000111b,111111b,111111b,111110b,000111b,111111b,000001b,111111b,111000b,000000b,000011b,111111b,100000b,011111b,111100b,000000b
                         073C1F303F380000
                         001F3F381F3D3F38
                         073F3F3E073F013F
                         3800033F201F3C00
     115      37   005AD 00073F30000C1F3C db 000000b,000111b,111111b,110000b,000000b,001100b,011111b,111100b,000011b,111100b,011111b,100000b,111111b,111000b,000000b,000000b,000000b,011111b,111111b,111000b,011111b,111101b,111111b,111000b,000111b,111110b,000000b,000000b,000111b,111111b,000001b,111111b,111000b,000000b,000011b,111111b,100000b,011111b,111100b,000000b
                         033C1F203F380000
                         001F3F381F3D3F38
                         073E0000073F013F
                         3800033F201F3C00
     116      38   005D5 00073F3000081F3C db 000000b,000111b,111111b,110000b,000000b,001000b,011111b,111100b,000011b,111100b,111110b,000000b,111111b,111000b,000000b,000000b,000000b,001111b,111111b,111000b,011111b,111100b,111111b,111100b,000111b,111110b,000000b,000000b,000111b,111111b,000000b,111111b,111000b,000000b,000011b,111111b,100000b,011111b,111100b,000000b
                         033C3E003F380000
                         000F3F381F3C3F3C
                         073E0000073F003F
                         3800033F201F3C00
     117      39   005FD 00073F3000181F3C db 000000b,000111b,111111b,110000b,000000b,011000b,011111b,111100b,000110b,001111b,111000b,000000b,111111b,111000b,000000b,000000b,000000b,000111b,111111b,111100b,011111b,111100b,011111b,111100b,000111b,111110b,000000b,000000b,000111b,111111b,000000b,111111b,111000b,000000b,000011b,111111b,100000b,011111b,111100b,000000b
                         060F38003F380000
                         00073F3C1F3C1F3C
                         073E0000073F003F
                         3800033F201F3C00
     118      40   00625 00073F3000301F3C db 000000b,000111b,111111b,110000b,000000b,110000b,011111b,111100b,001110b,000000b,000000b,000000b,111111b,111000b,000000b,000000b,000000b,000011b,111111b,111000b,011111b,111100b,011111b,111110b,000011b,111110b,000000b,000110b,000111b,111111b,000010b,111111b,111000b,000000b,110011b,111111b,100000b,011111b,111100b,000000b
                         0E0000003F380000
                         00033F381F3C1F3E
                         033E0006073F023F
                         3800333F201F3C00
     119      41   0064D 00073F3000201F3C db 000000b,000111b,111111b,110000b,000000b,100000b,011111b,111100b,001111b,111111b,111111b,000000b,111111b,111000b,000000b,000000b,000000b,000001b,111111b,111000b,011111b,111100b,001111b,111111b,000011b,111110b,000000b,001110b,000111b,111111b,000010b,011111b,111000b,000001b,100011b,111111b,100000b,111111b,111100b,000000b
                         0F3F3F003F380000
                         00013F381F3C0F3F
                         033E000E073F021F
                         3801233F203F3C00
     120      42   00675 00073F3003001F3C db 000000b,000111b,111111b,110000b,000011b,000000b,011111b,111100b,001111b,111111b,111111b,100000b,111111b,111000b,000000b,000000b,001000b,000000b,111111b,111000b,011111b,111100b,001111b,111111b,000001b,111110b,000000b,001100b,000111b,111111b,000110b,001111b,111000b,000011b,000011b,111111b,100000b,111111b,111100b,000000b
                         0F3F3F203F380000
                         08003F381F3C0F3F
                         013E000C073F060F
                         3803033F203F3C00
     121      43   0069D 00073F3006001F3C db 000000b,000111b,111111b,110000b,000110b,000000b,011111b,111100b,001111b,111111b,111111b,100000b,111111b,111000b,000000b,000000b,001110b,000000b,111111b,110000b,011111b,111100b,000111b,111111b,100000b,111110b,000000b,111000b,000011b,111111b,101100b,001111b,111000b,000110b,000111b,111111b,100000b,111111b,111100b,000000b
                         0F3F3F203F380000
                         0E003F301F3C073F
                         203E0038033F2C0F
                         3806073F203F3C00
     122      44   006C5 00073F3038001F3E db 000000b,000111b,111111b,110000b,111000b,000000b,011111b,111110b,000111b,111111b,111111b,100000b,111111b,111000b,000000b,000000b,000011b,100000b,111111b,100000b,011111b,111100b,000111b,111111b,110000b,011111b,000011b,100000b,000001b,111111b,111000b,000011b,111000b,011100b,000111b,111111b,100000b,111111b,111100b,000000b
                         073F3F203F380000
                         03203F201F3C073F
                         301F0320013F3803
                         381C073F203F3C00
     123      45   006ED 00073F3F20001F3E db 000000b,000111b,111111b,111111b,100000b,000000b,011111b,111110b,000011b,111111b,111111b,100000b,111111b,111000b,000000b,000000b,000000b,111111b,111110b,000000b,011111b,111100b,000011b,111111b,111000b,000111b,111110b,000000b,000000b,111111b,100000b,000001b,111111b,110000b,000111b,111111b,100000b,111111b,111100b,000000b
                         033F3F203F380000
                         003F3E001F3C033F
                         38073E00003F2001
                         3F30073F203F3C00
     124      46   00715 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000111b,000000b,000000b,000000b,000000b,000000b,000000b,000111b,100000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000070000000000
                         0007200000000000
                         0000000000000000
                         0000000000000000
     125      47   0073D 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
     126      48   00765 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
     127      49   0078D 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
     128      50   007B5 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
     129      51   007DD 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
     130      52   00805 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
     131      53   0082D 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
     132      54   00855 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
     133      55   0087D 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
     134      56   008A5 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
     135      57   008CD 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
     136      58   008F5 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
     137      59   0091D 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
     138      60   00945 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
     139      61   0096D 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
     140      62   00995 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
     141      63   009BD 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
     142      64   009E5 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
     143      65   00A0D 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,10101010b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         AA
     144      66   00A36                  
     145      67   00A36                  rogue:
     146      68   00A36 3F3F3F3F3F3F3F3F db 111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
     147      69   00A5E 3F3F3F3F3F3F3F3F db 111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
     148      70   00A86 3F3F3F3F3F3F3F3F db 111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
     149      71   00AAE 3F3F3F3F3F3F3F3F db 111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
     150      72   00AD6 0F3F3F3F3F3F3F3F db 001111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111100b
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3C
     151      73   00AFE 073F3F3F3F3F3F3F db 000111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,110000b
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F30
     152      74   00B26 00073F3F3F3F3F3F db 000000b,000111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111000b,000000b
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3800
     153      75   00B4E 00033F3F3F3F3F3F db 000000b,000011b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,100000b,000000b
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F2000
     154      76   00B76 000F3F3F3F3F3F3F db 000000b,001111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111100b,000000b
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3C00
     155      77   00B9E 00003F3F3F3F3F3F db 000000b,000000b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111110b,000000b,000000b
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3E0000
     156      78   00BC6 000007201F3F3F3F db 000000b,000000b,000111b,100000b,011111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,100001b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111100b,000011b,111000b,000000b,000000b
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F213F3F3F3F3F
                         3F3F3F3C03380000
     157      79   00BEE 000004000F3F3F3F db 000000b,000000b,000100b,000000b,001111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111000b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111000b,000000b,001000b,000000b,000000b
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F383F3F3F3F3F
                         3F3F3F3800080000
     158      80   00C16 00000000013F3F3F db 000000b,000000b,000000b,000000b,000001b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111100b,011111b,100100b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,000000b,000000b,000000b,000000b,000000b
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3C1F243F3F3F3F3F
                         3F3F3F0000000000
     159      81   00C3E 000000000007233F db 000000b,000000b,000000b,000000b,000000b,000111b,100011b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,000010b,000111b,111111b,111111b,111111b,111111b,111111b,111111b,100001b,110000b,000000b,000000b,000000b,000000b,000000b
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F02073F3F3F3F3F
                         3F21300000000000
     160      82   00C66 380000000000003F db 111000b,000000b,000000b,000000b,000000b,000000b,000000b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,110000b,011111b,111111b,111111b,111111b,111111b,111111b,111111b,000000b,100000b,000000b,000000b,000000b,000000b,001110b
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F301F3F3F3F3F3F
                         3F0020000000000E
     161      83   00C8E 0B20003F30000000 db 001011b,100000b,000000b,111111b,110000b,000000b,000000b,000000b,010111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111110b,001100b,001111b,111111b,111111b,111111b,111111b,110010b,000000b,000000b,000000b,000111b,111110b,000000b,000011b,100101b
                         173F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3E0C0F3F3F3F3F32
                         000000073E000325
     162      84   00CB6 000F251238000007 db 000000b,001111b,100101b,010010b,111000b,000000b,000000b,000111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111100b,011110b,000111b,111111b,111111b,111111b,111111b,111111b,110000b,000000b,000000b,001110b,010101b,001011b,111100b,000010b
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3C1E073F3F3F3F3F
                         3000000E150B3C02
     163      85   00CDE 150A251020000010 db 010101b,001010b,100101b,010000b,100000b,000000b,000000b,010000b,010111b,111111b,000000b,001100b,001111b,111111b,111111b,111111b,111111b,111111b,111111b,100000b,000011b,000000b,001111b,111111b,110011b,110011b,100011b,111111b,111111b,111111b,111111b,110000b,000000b,000000b,000000b,000010b,000101b,001010b,100101b,010010b
                         173F000C0F3F3F3F
                         3F3F3F2003000F3F
                         3333233F3F3F3F30
                         00000002050A2512
     164      86   00D06 0A25120000000430 db 001010b,100101b,010010b,000000b,000000b,000000b,000100b,110000b,010000b,100001b,000000b,000000b,001111b,111111b,111111b,111111b,111111b,111111b,111111b,100000b,000000b,000000b,011111b,111111b,100111b,000111b,111011b,111111b,111111b,111101b,000010b,000000b,000001b,010000b,000000b,000000b,000000b,000101b,001010b,100101b
                         102100000F3F3F3F
                         3F3F3F2000001F3F
                         27073B3F3F3D0200
                         0110000000050A25
     165      87   00D2E 0A3F322C0F301F30 db 001010b,111111b,110010b,101100b,001111b,110000b,011111b,110000b,011111b,111111b,000000b,000000b,001111b,111000b,001111b,111000b,001111b,111111b,111111b,100000b,000000b,000000b,001111b,111100b,000000b,011111b,111111b,111111b,111111b,111111b,111111b,111111b,101111b,111100b,000111b,111000b,001010b,110111b,111110b,100101b
                         1F3F00000F380F38
                         0F3F3F2000000F3C
                         001F3F3F3F3F3F3F
                         2F3C07380A373E25
     166      88   00D56 153F3D123F3F3C00 db 010101b,111111b,111101b,010010b,111111b,111111b,111100b,000000b,011111b,111111b,111101b,111100b,001111b,111000b,001111b,111000b,001111b,111111b,111111b,100000b,111111b,111000b,001111b,111000b,001001b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111110b,010101b,001111b,111111b,010010b
                         1F3F3D3C0F380F38
                         0F3F3F203F380F38
                         093F3F3F3F3F3F3F
                         3F3F3F3E150F3F12
     167      89   00D7E 3F3F3F3F3F3F3C01 db 111111b,111111b,111111b,111111b,111111b,111111b,111100b,000001b,111111b,111111b,000001b,111100b,001111b,111000b,001100b,000000b,000000b,111111b,111111b,100000b,111111b,111000b,001100b,001011b,101100b,011000b,000001b,000001b,100000b,111110b,000111b,000000b,000100b,001111b,111111b,111111b,111111b,111111b,111111b,111111b
                         3F3F013C0F380C00
                         003F3F203F380C0B
                         2C180101203E0700
                         040F3F3F3F3F3F3F
     168      90   00DA6 3F3F3F3F3F3F3C01 db 111111b,111111b,111111b,111111b,111111b,111111b,111100b,000001b,111111b,111111b,000001b,111100b,001111b,111111b,111100b,000000b,000000b,111111b,111111b,100000b,111111b,111000b,001100b,000001b,100000b,011000b,000000b,000001b,100000b,111100b,000111b,000000b,000000b,001111b,111111b,111111b,111111b,111111b,111111b,111111b
                         3F3F013C0F3F3C00
                         003F3F203F380C01
                         20180001203C0700
                         000F3F3F3F3F3F3F
     169      91   00DCE 3F3F3F3F3F3F3F30 db 111111b,111111b,111111b,111111b,111111b,111111b,111111b,110000b,011000b,000011b,000000b,000000b,000000b,011000b,001100b,000000b,000000b,111111b,111111b,101100b,000000b,000000b,111100b,000000b,000000b,011000b,000000b,000001b,100000b,111100b,000111b,000000b,000000b,001111b,111111b,111111b,111111b,111111b,111111b,111111b
                         1803000000180C00
                         003F3F2C00003C00
                         00180001203C0700
                         000F3F3F3F3F3F3F
     170      92   00DF6 3F3F3F3F3F3F3F30 db 111111b,111111b,111111b,111111b,111111b,111111b,111111b,110000b,011000b,000011b,000000b,000000b,000000b,011000b,001111b,111000b,001111b,111111b,111111b,100100b,000000b,000000b,001100b,000111b,110000b,011110b,001111b,000001b,100000b,111100b,000111b,000011b,111000b,001111b,111111b,111111b,111111b,111111b,111111b,111111b
                         1803000000180F38
                         0F3F3F2400000C07
                         301E0F01203C0703
                         380F3F3F3F3F3F3F
     171      93   00E1E 3F3F3F3F3F3F3F30 db 111111b,111111b,111111b,111111b,111111b,111111b,111111b,110000b,011111b,111111b,000001b,111111b,110000b,011000b,001111b,111000b,001111b,111111b,111111b,100000b,111100b,000011b,111100b,000111b,110000b,011000b,001111b,000001b,100000b,111100b,000111b,100000b,000000b,001111b,111111b,111111b,111111b,111111b,111111b,111111b
                         1F3F013F30180F38
                         0F3F3F203C033C07
                         30180F01203C0720
                         000F3F3F3F3F3F3F
     172      94   00E46 3F3F3F3F3F3F3F30 db 111111b,111111b,111111b,111111b,111111b,111111b,111111b,110000b,011111b,111111b,000001b,111111b,110000b,011000b,011111b,111000b,001111b,111111b,111111b,100000b,111110b,000111b,111100b,000111b,110000b,011000b,001111b,000101b,100000b,111100b,000111b,000000b,000000b,001111b,111111b,111111b,111111b,111111b,111111b,111111b
                         1F3F013F30181F38
                         0F3F3F203E073C07
                         30180F05203C0700
                         000F3F3F3F3F3F3F
     173      95   00E6E 3F3F3C073F3F3F30 db 111111b,111111b,111100b,000111b,111111b,111111b,111111b,110000b,111111b,111111b,100001b,111111b,110000b,011000b,001111b,111000b,001111b,111111b,111111b,100000b,111110b,000111b,111100b,000111b,110000b,011000b,001111b,001111b,100000b,111100b,000111b,000011b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b
                         3F3F213F30180F38
                         0F3F3F203E073C07
                         30180F0F203C0703
                         3F3F3F3F3F3F3F3F
     174      96   00E96 3F3F38033F3F3F30 db 111111b,111111b,111000b,000011b,111111b,111111b,111111b,110000b,011111b,111111b,100000b,000000b,000000b,111000b,001111b,111000b,000000b,111111b,111111b,100000b,111110b,000000b,001100b,000000b,000000b,011000b,000000b,000001b,100000b,000000b,000111b,000000b,000000b,001111b,111111b,111111b,111111b,111111b,111111b,111111b
                         1F3F200000380F38
                         003F3F203E000C00
                         0018000120000700
                         000F3F3F3F3F3F3F
     175      97   00EBE 3F3F30313F3F3F30 db 111111b,111111b,110000b,110001b,111111b,111111b,111111b,110000b,011111b,111111b,000000b,000000b,000001b,111000b,001111b,111000b,000000b,111111b,111111b,100000b,111110b,100000b,001100b,000000b,000000b,011000b,000000b,000001b,100000b,000001b,010111b,000000b,000000b,001111b,111111b,111111b,000111b,111111b,111111b,111111b
                         1F3F000001380F38
                         003F3F203E200C00
                         0018000120011700
                         000F3F3F073F3F3F
     176      98   00EE6 3F3F38333F3F3F30 db 111111b,111111b,111000b,110011b,111111b,111111b,111111b,110000b,011111b,111111b,000000b,011100b,001000b,011000b,001111b,111000b,001000b,111111b,111111b,100000b,111110b,001001b,001100b,000110b,000000b,011000b,000000b,000001b,100000b,000110b,100111b,000000b,110000b,001111b,111111b,111100b,010101b,111111b,111111b,111111b
                         1F3F001C08180F38
                         083F3F203E090C06
                         0018000120062700
                         300F3F3C153F3F3F
     177      99   00F0E 3F203B0B3E0B3F3F db 111111b,100000b,111011b,001011b,111110b,001011b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,000001b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111100b,001110b,111111b,111111b,111111b
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F013F3F3F3F
                         3F3F3F3C0E3F3F3F
     178     100   00F36 3F2F393B3E1F3F3F db 111111b,101111b,111001b,111011b,111110b,011111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111000b,000000b,000001b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,101000b,011111b,110111b,111111b,111111b
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3800013F3F3F3F
                         3F3F3F281F373F3F
     179     101   00F5E 3F2F3F3F3E1F3F3F db 111111b,101111b,111111b,111111b,111110b,011111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111000b,000001b,000001b,111111b,111111b,111111b,111111b,111111b,111111b,111110b,010000b,011101b,111011b,111111b,111111b
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3801013F3F3F3F
                         3F3F3E101D3B3F3F
     180     102   00F86 3F2F00000E1F3F3F db 111111b,101111b,000000b,000000b,001110b,011111b,111111b,111111b,111100b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111000b,001111b,111111b,111010b,111111b,111111b
                         3C3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F380F3F3A3F3F
     181     103   00FAE 3F3F3F3F3F3F3F3F db 111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,110001b,011111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,110000b,010101b,111011b,111111b,000111b,111111b
                         311F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F30153B3F073F
     182     104   00FD6 3F073F3F3C0F3F3F db 111111b,000111b,111111b,111111b,111100b,001111b,111111b,111111b,101101b,110111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111100b,001110b,001111b,111111b,111111b,111111b,111111b
                         2D373F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3C0E0F3F3F3F3F
     183     105   00FFE 3E01300138073F3F db 111110b,000001b,110000b,000001b,111000b,000111b,111111b,111111b,010010b,101111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b
                         122F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
     184     106   01026 3F3F2B0A1F3F3F32 db 111111b,111111b,101011b,001010b,011111b,111111b,111111b,110010b,000011b,101111b,011111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b
                         032F1F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
     185     107   0104E 3E01290A18073F24 db 111110b,000001b,101001b,001010b,011000b,000111b,111111b,100100b,101111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b
                         2F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
     186     108   01076 3E01293A18073E02 db 111110b,000001b,101001b,111010b,011000b,000111b,111110b,000010b,101111b,011111b,111000b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b
                         2F1F383F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
     187     109   0109E 3E01280218073C1D db 111110b,000001b,101000b,000010b,011000b,000111b,111100b,011101b,011110b,101111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,001111b,111111b,111111b,101111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b
                         1E2F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F0F3F3F2F
                         3F3F3F3F3F3F3F3F
     188     110   010C6 322E183326353F3F db 110010b,101110b,011000b,110011b,100110b,110101b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111101b,001011b,111111b,111110b,100101b,111111b,111111b,110100b,111111b,111111b,111111b,111111b,111111b
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3D0B3F3E25
                         3F3F343F3F3F3F3F
     189     111   010EE 3004000004013F3F db 110000b,000100b,000000b,000000b,000100b,000001b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111010b,010101b,111111b,111101b,010010b,111111b,111111b,101010b,011111b,111111b,111111b,111111b,111111b
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3A153F3D12
                         3F3F2A1F3F3F3F3F
     190     112   01116 300720001C013F38 db 110000b,000111b,100000b,000000b,011100b,000001b,111111b,111000b,111111b,000111b,111000b,011111b,100011b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,110111b,111111b,111111b,110011b,111111b,111111b,010111b,101111b,111111b,111111b,000011b,111100b
                         3F07381F233F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F373F3F33
                         3F3F172F3F3F033C
     191     113   0113E 3800273C10033F20 db 111000b,000000b,100111b,111100b,010000b,000011b,111111b,100000b,011110b,000001b,110000b,001110b,000001b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111101b,001011b,111100b,001110b,101101b,111110b,001111b,000000b,001111b,111111b,111110b,000001b,110000b
                         1E01300E013F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3D0B3C0E2D
                         3E0F000F3F3E0130
     192     114   01166 39142000150B3E20 db 111001b,010100b,100000b,000000b,010101b,001011b,111110b,100000b,010010b,000011b,010000b,001011b,000001b,101111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111100b,110010b,011000b,001110b,010001b,001100b,000111b,000100b,101111b,111111b,111010b,000001b,011000b
                         1203100B012F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3C32180E11
                         0C07042F3F3A0118
     193     115   0118E 38002F3E10033C12 db 111000b,000000b,101111b,111110b,010000b,000011b,111100b,010010b,100001b,010100b,001001b,010000b,101010b,000111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111110b,010010b,001001b,000111b,010001b,001000b,100111b,000000b,001111b,111111b,100001b,001010b,000101b
                         211409102A073F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3E12090711
                         0827000F3F210A05
     194     116   011B6 3F322F3E1C3F380F db 111111b,110010b,101111b,111110b,011100b,111111b,111000b,001111b,000000b,111000b,000111b,100000b,011100b,000011b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111101b,110010b,001001b,000110b,110001b,001000b,100111b,000000b,001010b,010111b,000000b,111100b,000011b
                         003807201C033F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3D32090631
                         0827000A17003C03
     195     117   011DE 38002F3E10033807 db 111000b,000000b,101111b,111110b,010000b,000011b,111000b,000111b,000000b,111000b,000111b,100000b,011100b,000011b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,101110b,011111b,111111b,111111b,111111b,111111b,111111b,111111b,001010b,001111b,111111b,000000b,111100b,000011b
                         003807201C033F3F
                         3F3F3F3F3F3F3F3F
                         3F3F2E1F3F3F3F3F
                         3F3F0A0F3F003C03
     196     118   01206 39142F3E150B2002 db 111001b,010100b,101111b,111110b,010101b,001011b,100000b,000010b,000000b,010000b,000001b,000000b,001000b,000001b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,010000b,101111b,110000b,000000b,000111b,110000b,000000b,000111b,100000b,001000b,000110b,000000b,001000b,000001b
                         0010010008013F3F
                         3F3F3F3F3F3F3F3F
                         3F3F102F30000730
                         0007200806000801
     197     119   0122E 30002F3E10013E3F db 110000b,000000b,101111b,111110b,010000b,000001b,111110b,111111b,110011b,111111b,011111b,111011b,111111b,001111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,101100b,011111b,110111b,001101b,100111b,110011b,101110b,110111b,001110b,000010b,010111b,111011b,111111b,011111b
                         333F1F3B3F0F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F2C1F370D2733
                         2E370E02173B3F1F
     198     120   01256 2000280210003E3F db 100000b,000000b,101000b,000010b,010000b,000000b,111110b,111111b,110011b,111111b,011111b,111011b,111111b,001111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,101100b,011111b,110111b,000000b,000111b,110011b,100000b,000111b,001110b,001000b,000111b,111011b,111111b,011111b
                         333F1F3B3F0F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F2C1F37000733
                         20070E08073B3F1F
     199     121   0127E 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,001100b,011111b,111111b,000110b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         00000C1F3F060000
                         0000000000000000
                         0000000000000000
     200     122   012A6 0000010000002000 db 000000b,000000b,000001b,000000b,000000b,000000b,100000b,000000b,000000b,010000b,000000b,000000b,001000b,000000b,000000b,001000b,000000b,000000b,000100b,011111b,111111b,000100b,000000b,000000b,000001b,000000b,000000b,000001b,000000b,000000b,000000b,100000b,000000b,000000b,010000b,000000b,000000b,001000b,000000b,000000b
                         0010000008000008
                         0000041F3F040000
                         0100000100000020
                         0000100000080000
     201     123   012CE 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000100b,010000b,000001b,000100b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000041001040000
                         0000000000000000
                         0000000000000000
     202     124   012F6 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000100b,010100b,010111b,000100b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000041417040000
                         0000000000000000
                         0000000000000000
     203     125   0131E 0C1830060C38030E db 001100b,011000b,110000b,000110b,001100b,111000b,000011b,001110b,011000b,000011b,100110b,001100b,000001b,100011b,001110b,000000b,110001b,100111b,000100b,011111b,111111b,000100b,011100b,110001b,100000b,001100b,011000b,110000b,000110b,001100b,111000b,000011b,001110b,011000b,000011b,100110b,001100b,000001b,100011b,000110b
                         1803260C01230E00
                         3127041F3F041C31
                         200C1830060C3803
                         0E1803260C012306
     204     126   01346 1F3F380F3F3C0F3F db 011111b,111111b,111000b,001111b,111111b,111100b,001111b,111111b,111100b,000111b,111111b,111110b,000011b,111111b,111111b,000001b,111111b,111111b,100101b,111111b,111111b,000100b,111111b,111111b,110000b,011111b,111111b,111000b,001111b,111111b,111100b,001111b,111111b,111100b,000111b,111111b,111110b,000011b,111111b,111111b
                         3C073F3E033F3F01
                         3F3F253F3F043F3F
                         301F3F380F3F3C0F
                         3F3C073F3E033F3F
     205     127   0136E 30380F383C073C1E db 110000b,111000b,001111b,111000b,111100b,000111b,111100b,011110b,000111b,111100b,001110b,000011b,111110b,000111b,000001b,111111b,000111b,100000b,111100b,011111b,111111b,001111b,100001b,110000b,011111b,110000b,111000b,001111b,111000b,111100b,000111b,111100b,011110b,000111b,111100b,001110b,000011b,111110b,000111b,000001b
                         073C0E033E07013F
                         07203C1F3F0F2130
                         1F30380F383C073C
                         1E073C0E033E0701
     206     128   01396 2010033008013008 db 100000b,010000b,000011b,110000b,001000b,000001b,110000b,001000b,000000b,111000b,000100b,000000b,111100b,000010b,000000b,011110b,000001b,000000b,001100b,010001b,001111b,000111b,000000b,100000b,000111b,100000b,010000b,000011b,110000b,001000b,000001b,110000b,001000b,000000b,111000b,000100b,000000b,111100b,000010b,000000b
                         003804003C02001E
                         01000C110F070020
                         0720100330080130
                         08003804003C0200
     207     129   013BE 0000010008002000 db 000000b,000000b,000001b,000000b,001000b,000000b,100000b,000000b,000000b,010000b,000000b,000010b,011000b,000000b,000000b,001000b,000001b,000000b,000100b,010000b,000001b,000110b,000000b,000000b,010011b,000000b,000000b,000011b,000000b,001000b,000000b,100000b,000000b,000000b,010000b,000000b,000000b,011000b,000000b,000000b
                         0010000218000008
                         0100041001060000
                         1300000300080020
                         0000100000180000
     208     130   013E6 0000040000020000 db 000000b,000000b,000100b,000000b,000000b,000010b,000000b,000000b,000001b,000000b,000000b,000001b,000000b,000000b,000000b,100000b,000000b,000000b,010100b,011111b,111111b,000100b,000000b,000000b,001000b,000000b,000000b,000100b,000000b,000000b,000010b,000000b,000000b,000001b,000000b,000000b,000001b,000000b,000000b,000000b
                         0100000100000020
                         0000141F3F040000
                         0800000400000200
                         0001000001000000
     209     131   0140E 0000120000190000 db 000000b,000000b,010010b,000000b,000000b,011001b,000000b,000000b,001000b,100000b,000000b,000100b,100000b,000000b,000010b,010000b,000000b,000011b,001100b,011111b,111111b,000100b,000000b,000000b,100100b,000000b,000000b,010010b,000000b,000000b,011001b,000000b,000000b,001000b,100000b,000000b,000100b,100000b,000000b,000010b,10101010b
                         0820000420000210
                         00030C1F3F040000
                         2400001200001900
                         0008200004200002
                         AA
project.inc 
     211       1   01437                  ;------------------------------------------------------------------
     212       2   01437                  ;Lijst van functies:
     213       3   01437                  ;   -statusCheck            Status check van scherm opslaan in STA register
     214       4   01437                  ;   -initGLCD               Initializatie van grafisch LCD scherm
     215       5   01437                  ;   -debug                  debug info op seriele poot zetten
     216       6   01437                  ;   -dataWrite              data naar het scherm sturen
     217       7   01437                  ;   -dataRead               data van het scherm lezen
     218       8   01437                  ;   -comandWrite            comanndo naar scherm sturen
     219       9   01437                  ;------------------------------------------------------------------
     220      10   01437                  ;------------------------------------------------------------------
     221      11   01437                  ;declaratie van pinnen
     222      12   01437                  ;------------------------------------------------------------------
     223      13   01437                      ;scherm
     224      14   01437                      WR          bit     p3_data.0   ;write line van scherm actief laag
     225      15   01437                      RD          bit     p3_data.1   ;read line van scherrm actief laag
     226      16   01437                      CE          bit     p3_data.2   ;chip enble van scherm actief laag
     227      17   01437                      CD          bit     p3_data.3   ;Command write
     228      18   01437                      RESET       bit     p0_data.1   ;reset van scherm actief laag
     229      19   01437                      FS          bit     p0_data.0   ;font groote selecteren FS=1: 6*8, FS=0: 8*8
     230      20   01437                  
     231      21   01437                      ;encoders
     232      22   01437                      SW1         bit     p2_data.2   ;knop in rotary encoder 1
     233      23   01437                      SW2         bit     p2_data.7   ;knop in rotary encoder 2
     234      24   01437                      R1A         bit     p2_data.4   ;rotary encoder 1 pin A
     235      25   01437                      R1B         bit     p2_data.3   ;rotary encoder 1 pin B
     236      26   01437                      R2A         bit     p2_data.5   ;rotary encoder 2 pin A
     237      27   01437                      R2B         bit     p2_data.6   ;rotary encoder 2 pin B
     238      28   01437                  
     239      29   01437                  ;------------------------------------------------------------------
     240      30   01437                  ;declaratie van registers
     241      31   01437                  ;------------------------------------------------------------------
     242      32   01437                      STA         equ     10h         ;geheugenplaats voor de status check
     243      33   01437                      DATAREG     equ     11h         ;geheugenplaats voor het verzenden van data naar het scherm
     244      34   01437                      COMANDREG   equ     12h         ;geheugenplaats voor het verzenden van comandos naar het scherm
     245      35   01437                      ROTARY      equ     13h         ;geheugenplaats voor de momentele waarde van de encoders
     246      36   01437                      ROTARYTEMP  equ     14h         ;geheugenplaats voor de momentele waarde van de encoders te vergelijken
     247      37   01437                      clrL        equ     15h         ;geheugenplaats voor het legen van het het scherm
     248      38   01437                      clrH        equ     16h         ;geheugenplaats voor het legen van het het scherm
     249      39   01437                      POSX        equ     17h         ;geheugenplaats voor X positie op scherm
     250      40   01437                      POSY        equ     18h         ;geheugenplaats voor Y positie op scherm
     251      41   01437                  
     252      42   01437                  ;------------------------------------------------------------------
     253      43   01437                  ;Status check van scherm opslaan in STA register
     254      44   01437                  ;-STA
     255      45   01437                  ;------------------------------------------------------------------
     256      46   01437                  statusCheck:
     257      47   01437 C0E0                 push    acc
     258      48   01439 C0D0                 push    psw
     259      49   0143B C210                 clr     STA                     ;STA register leeg maken
     260      50   0143D 75C900               mov     p4_dir,#000h            ;p4 als input zetten
     261      51   01440 D2B3                 setb    CD
     262      52   01442 D2B0                 setb    WR
     263      53   01444                  stan:
     264      54   01444 C2B1                 clr     RD
     265      55   01446 E5C8                 mov     a,p4_data
     266      56   01448 D2B1                 setb    RD
     267      57   0144A D2B3                 setb    CD
     268      58   0144C                  ;    mov     r0,a
     269      59   0144C                  ;    lcall   debug
     270      60   0144C F510                 mov     STA,a                   ;bijhouden voor eventueel gebruik
     271      61   0144E 5403                 anl     a,#03h                  ;masker voor STA0 en STA1
     272      62   01450 B403F1               cjne    a,#03h,stan
     273      63   01453 F8                   mov     r0,a
     274      64   01454 121545               lcall   debug
     275      65   01457 75C9FF               mov     p4_dir,#0ffh
     276      66   0145A D0D0                 pop     psw
     277      67   0145C D0E0                 pop     acc
     278      68   0145E 22               ret
     279      69   0145F                  
     280      70   0145F                  ;------------------------------------------------------------------
     281      71   0145F                  ;Initializatie van grafisch LCD scherm
     282      72   0145F                  ;------------------------------------------------------------------
     283      73   0145F                  initGLCD:
     284      74   0145F                  
     285      75   0145F 7586FF               mov     p0_dir,#0ffh            ;poort 1 als output
     286      76   01462 75B1FF               mov     p3_dir,#0ffh            ;poort 3 als output
     287      77   01465 C2B2                 clr     CE                      ;standaart laag houden
     288      78   01467 D2B0                 setb    WR                      ;standaart hoog maken
     289      79   01469 D2B1                 setb    RD                      ;standaart hoog maken
     290      80   0146B D280                 setb    FS                      ;font op 6*8 zetten
     291      81   0146D C281                 clr     RESET                   ;reseten van scherm
     292      82   0146F 12174F               lcall   delay1ms
     293      83   01472 D281                 setb    RESET                   ;reset terug af zetten
     294      84   01474 121437               lcall   statusCheck             ;initiele status check uitvoeren
     295      85   01477 C217                 clr     POSX                    ;X positie op 0 zetten
     296      86   01479 C218                 clr     POSY                    ;Y positie op 0 zetten
     297      87   0147B                  
     298      88   0147B                      ;Mode set
     299      89   0147B 751280               mov     COMANDREG,#10000000b
     300      90   0147E 12152F               lcall   comandWrite
     301      91   01481                  
     302      92   01481                      ;Graphics home address
     303      93   01481 751100               mov     DATAREG,#00h
     304      94   01484 1214E2               lcall   dataWrite
     305      95   01487 751100               mov     DATAREG,#00h
     306      96   0148A 1214E2               lcall   dataWrite
     307      97   0148D 751242               mov     COMANDREG,#42h
     308      98   01490 12152F               lcall   comandWrite
     309      99   01493                  
     310     100   01493                      ;Graphics area set
     311     101   01493 751128               mov     DATAREG,#28h
     312     102   01496 1214E2               lcall   dataWrite
     313     103   01499 751100               mov     DATAREG,#00h
     314     104   0149C 1214E2               lcall   dataWrite
     315     105   0149F 751243               mov     COMANDREG,#43h
     316     106   014A2 12152F               lcall   comandWrite
     317     107   014A5                  
     318     108   014A5                      ;text home address
     319     109   014A5 751100               mov     DATAREG,#00h
     320     110   014A8 1214E2               lcall   dataWrite
     321     111   014AB 75110A               mov     DATAREG,#0ah
     322     112   014AE 1214E2               lcall   dataWrite
     323     113   014B1 751240               mov     COMANDREG,#40h
     324     114   014B4 12152F               lcall   comandWrite
     325     115   014B7                  
     326     116   014B7                      ;text area set
     327     117   014B7 751128               mov     DATAREG,#28h
     328     118   014BA 1214E2               lcall   dataWrite
     329     119   014BD 751100               mov     DATAREG,#00h
     330     120   014C0 1214E2               lcall   dataWrite
     331     121   014C3 751241               mov     COMANDREG,#41h
     332     122   014C6 12152F               lcall   comandWrite
     333     123   014C9                  
     334     124   014C9                      ;adres data pointer
     335     125   014C9 751100               mov     DATAREG,#00h            ;lower address
     336     126   014CC 1214E2               lcall   dataWrite
     337     127   014CF 751100               mov     DATAREG,#00h
     338     128   014D2 1214E2               lcall   dataWrite
     339     129   014D5 751224               mov     COMANDREG,#24h
     340     130   014D8 12152F               lcall   comandWrite
     341     131   014DB                  
     342     132   014DB                      ;Display mode
     343     133   014DB 751290               mov     COMANDREG,#10010000b
     344     134   014DE 12152F               lcall   comandWrite
     345     135   014E1                  
     346     136   014E1 22               ret
     347     137   014E2                  
     348     138   014E2                  ;------------------------------------------------------------------
     349     139   014E2                  ;Data naar het schem sturen
     350     140   014E2                  ;-DATAREG
     351     141   014E2                  ;------------------------------------------------------------------
     352     142   014E2                  DataWrite:
     353     143   014E2 C0E0                 push    acc
     354     144   014E4 C0D0                 push    psw
     355     145   014E6 121437               lcall   statusCheck             ;status checken
     356     146   014E9 8511C8               mov     p4_data,DATAREG         ;zet de data op de bus
     357     147   014EC C2B3                 clr     CD
     358     148   014EE 00                   nop
     359     149   014EF C2B0                 clr     WR
     360     150   014F1 00                   nop
     361     151   014F2 D2B0                 setb    WR
     362     152   014F4 D0D0                 pop     psw
     363     153   014F6 D0E0                 pop     acc
     364     154   014F8 22               ret
     365     155   014F9                  
     366     156   014F9                  dataAutoWrite:
     367     157   014F9 C0E0                 push    acc
     368     158   014FB C0D0                 push    psw
     369     159   014FD                  dataAutoWriteStatus:
     370     160   014FD 121437               lcall   statusCheck             ;status checken
     371     161   01500 E510                 mov     a,STA
     372     162   01502 5404                 anl     a,#04h                  ;sta 2 nakijken
     373     163   01504 B404F6               cjne    a,#04h,dataAutoWriteStatus
     374     164   01507 8511C8               mov     p4_data,DATAREG         ;zet de data op de bus
     375     165   0150A C2B3                 clr     CD
     376     166   0150C 00                   nop
     377     167   0150D C2B0                 clr     WR
     378     168   0150F 00                   nop
     379     169   01510 D2B0                 setb    WR
     380     170   01512 D0D0                 pop     psw
     381     171   01514 D0E0                 pop     acc
     382     172   01516 22               ret
     383     173   01517                  
     384     174   01517                  ;------------------------------------------------------------------
     385     175   01517                  ;data van het scherm inlezen
     386     176   01517                  ;-DATAREG
     387     177   01517                  ;------------------------------------------------------------------
     388     178   01517                  DataRead:
     389     179   01517 C0E0                 push    acc
     390     180   01519 C0D0                 push    psw
     391     181   0151B 121437               lcall   statusCheck             ;status checken
     392     182   0151E 75C900               mov     p4_dir,#000h            ;p4 als ingang
     393     183   01521 C2B3                 clr     CD
     394     184   01523 C2B1                 clr     RD
     395     185   01525 00                   nop                             ;wachten
     396     186   01526 00                   nop
     397     187   01527 85C811               mov     DATAREG,p4_data         ;data inlezeen van scherm
     398     188   0152A D0D0                 pop     psw
     399     189   0152C D0E0                 pop     acc
     400     190   0152E 22               ret
     401     191   0152F                  
     402     192   0152F                  ;------------------------------------------------------------------
     403     193   0152F                  ;comando naar het scherrm sturen
     404     194   0152F                  ;-COMANDREG
     405     195   0152F                  ;------------------------------------------------------------------
     406     196   0152F                  ComandWrite:
     407     197   0152F C0E0                 push    acc
     408     198   01531 C0D0                 push    psw
     409     199   01533 121437               lcall   statusCheck             ;status checken
     410     200   01536 8512C8               mov     p4_data,COMANDREG       ;comando op de bus zetten
     411     201   01539 D2B3                 setb    CD
     412     202   0153B C2B0                 clr     WR
     413     203   0153D 00                   nop
     414     204   0153E D2B0                 setb    WR
     415     205   01540 D0D0                 pop     psw
     416     206   01542 D0E0                 pop     acc
     417     207   01544 22               ret
     418     208   01545                  
     419     209   01545                  ;------------------------------------------------------------------
     420     210   01545                  ;debug info op seriele poort zetten
     421     211   01545                  ;-r0
     422     212   01545                  ;------------------------------------------------------------------
     423     213   01545                  debug:
     424     214   01545 C0E0                 push    acc
     425     215   01547 C0D0                 push    psw
     426     216   01549 740D                 mov     a,#0dh
     427     217   0154B 1219A7               lcall   siooutchar
     428     218   0154E E8                   mov     a,r0
     429     219   0154F 1219C3               lcall   siooutbyte
     430     220   01552 740A                 mov     a,#0ah
     431     221   01554 1219A7               lcall   siooutchar
     432     222   01557 D0D0                 pop     psw
     433     223   01559 D0E0                 pop     acc
     434     224   0155B 22               ret
     435     225   0155C                  
     436     226   0155C                  ;------------------------------------------------------------------
     437     227   0155C                  ;Het scherm leeg maken
     438     228   0155C                  ;------------------------------------------------------------------
     439     229   0155C                  clearScreen:
     440     230   0155C C0E0                 push    acc
     441     231   0155E C0D0                 push    psw
     442     232   01560 7515FF               mov     clrL,#ffh               ;255 keer doolopen
     443     233   01563 75160F               mov     clrH,#0fh               ;16 keer doorlopen
     444     234   01566                      ;Mode set
     445     235   01566 751280               mov     COMANDREG,#10000000b    ;OR mode
     446     236   01569 12152F               lcall   comandWrite
     447     237   0156C                      ;Display mode
     448     238   0156C 75129C               mov     COMANDREG,#10011100b    ;gafisch en tekst aan zetten
     449     239   0156F 12152F               lcall   comandWrite
     450     240   01572                      ;auto write mode
     451     241   01572 7512B0               mov     COMANDREG,#b0h
     452     242   01575 12152F               lcall   comandWrite
     453     243   01578                  lus2400:
     454     244   01578 751100               mov     DATAREG,#000h
     455     245   0157B 1214F9               lcall   dataAutoWrite
     456     246   0157E D515F7               djnz    clrL,lus2400
     457     247   01581 7515FF               mov     clrL,#ffh
     458     248   01584 D516F1               djnz    clrH,lus2400
     459     249   01587                      ;data auto read af zetten
     460     250   01587 7512B2               mov     COMANDREG,#b2h
     461     251   0158A 12152F               lcall   comandWrite
     462     252   0158D                  
     463     253   0158D                      ;adres data pointer resetten
     464     254   0158D 751100               mov     DATAREG,#00h            ;lower address
     465     255   01590 1214E2               lcall   dataWrite
     466     256   01593 751100               mov     DATAREG,#00h
     467     257   01596 1214E2               lcall   dataWrite
     468     258   01599 751224               mov     COMANDREG,#24h
     469     259   0159C 12152F               lcall   comandWrite
     470     260   0159F D0E0                 pop     acc
     471     261   015A1 D0D0                 pop     psw
     472     262   015A3 22               ret
     473     263   015A4                  
     474     264   015A4                  ;------------------------------------------------------------------
     475     265   015A4                  ;encoders initializeren
     476     266   015A4                  ;------------------------------------------------------------------
     477     267   015A4                  initRotary:
     478     268   015A4 75A100               mov     p2_dir,#000h            ;poort 2 als input zetten
     479     269   015A7 C213                 clr     ROTARY
     480     270   015A9 C214                 clr     ROTARYTEMP
     481     271   015AB 758902               mov     tmod,#00000010b         ;timer op 8bit autoreload zetten
     482     272   015AE 758CC8               mov     TH0,#200
     483     273   015B1 758AC8               mov     TL0,#200
     484     274   015B4 D2AF                 setb    EA
     485     275   015B6 D2A9                 setb    ET0
     486     276   015B8 D28C                 setb    TR0
     487     277   015BA                  
     488     278   015BA 22               ret
     489     279   015BB                  
     490     280   015BB                  
xcez1.inc 
     492       1   015BB                  ;*******************************************************************************
     493       2   015BB                  ;
     494       3   015BB                  ; xcez1.inc is the registerfile/driver package for the XC888 micrcontroller from Infineon.
     495       4   015BB                  ;
     496       5   015BB                  ; The file contains drivers for various hardware and math applications.
     497       6   015BB                  ; In addition all register declarations are added.
     498       7   015BB                  ;
     499       8   015BB                  ; WARNING:!!!!!!!
     500       9   015BB                  ; INCLUDE THIS FILE AT THE END OF THE USER PROGRAM
     501      10   015BB                  ;
     502      11   015BB                  ; Written by Roggemans M. (MGM) 07/2011 v0.0
     503      12   015BB                  ;
     504      13   015BB                  ;*******************************************************************************
     505      14   015BB                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     506      15   015BB                  ;
     507      16   015BB                  ; xcez is een board package driver voor het XC888 SBC bord van MGM/dp.
     508      17   015BB                  ;
     509      18   015BB                  ; De driver bevat subroutines die toelaten de hardware van het SBC bord op een
     510      19   015BB                  ; eenvoudige manier te gebruiken:
     511      20   015BB                  ;
     512      21   015BB                  ; standaard I/O:
     513      22   015BB                  ;      initdipswitch        klaar zetten poort 4 voor gebruik met de dipswitch
     514      23   015BB                  ;      initftoetsen         klaar zetten 4 functieschakelaars onderaan scherm
     515      24   015BB                  ;      initleds             klaar zetten LED's als outputs
     516      25   015BB                  ;
     517      26   015BB                  ; I2C interface (minimale interface op 100kbit/s) enkel master mode!!
     518      27   015BB                  ;      initiic              klaar zetten iic interface
     519      28   015BB                  ;      iicstart             genereren van een startconditie op iic poort
     520      29   015BB                  ;      iicstop              genereren stop conditie op iic poort
     521      30   015BB                  ;      iicinbyteack         lezen van 1 byte met ack (accu=output)
     522      31   015BB                  ;      iicinbytenack        lezen van 1 byte met nack (accu=output)
     523      32   015BB                  ;      iicoutbyte           schrijven van 1 byte (accu=input, c=waarde ack bit slave)
     524      33   015BB                  ;
     525      34   015BB                  ; LCD interace
     526      35   015BB                  ;      initlcd              klaar zetten LCD voor gebruik (incl i2c init)
     527      36   015BB                  ;      lcdoutchar           schrijven van ascii code (accu=input)
     528      37   015BB                  ;      lcdoutbyte           schrijven hex waarde accu naar LCD
     529      38   015BB                  ;      lcdoutnib            afdrukken 4 laagste bits accu op LCD
     530      39   015BB                  ;      lcdoutmsga           afdrukken ascii string @dptr, tot 000h code
     531      40   015BB                  ;      lcdlighton           backlight aan
     532      41   015BB                  ;      lcdlightoff          backlight uit
     533      42   015BB                  ;      lcdbuzon             buzzer aan
     534      43   015BB                  ;      lcdbuzof             buzzer uit
     535      44   015BB                  ;
     536      45   015BB                  ; Serile interface (via USB stekker!!)
     537      46   015BB                  ;      initsio              klaar zetten serile poort 9600 baud
     538      47   015BB                  ;      siooutchar           afdrukken ascii code (accu=input)
     539      48   015BB                  ;      siooutbyte           afdrkken getal in accu
     540      49   015BB                  ;      siooutnib            afdrukken 4 laagste bits accu
     541      50   015BB                  ;      siooutmsga           afdrukken ascii string @dptr tot 000h code
     542      51   015BB                  ;      sioinchar            inlezen van 1 ascii code in de accu
     543      52   015BB                  ;      sioinbufa            inlezen van ascii buffer vanaf adres strtbuf, max 20h karakters!
     544      53   015BB                  ;
     545      54   015BB                  ; ADC
     546      55   015BB                  ;      initadc              klaar zetten ADC voor minimaal gebruik
     547      56   015BB                  ;      adclm335             uitlezen lm35 (a-b) bevat resultaat
     548      57   015BB                  ;      adcpotmeter          uitlezen van de potmeter (a-b) bevat resultaat
     549      58   015BB                  ;
     550      59   015BB                  ; Arithmetic:
     551      60   015BB                  ;      mul16                vermenigvuldigen 2 16 bit getallen
     552      61   015BB                  ;      mul32                vermenigvuldigen 2 32 bit getallen
     553      62   015BB                  ;      div16                delen 2 16 bit getallen
     554      63   015BB                  ;      div32                delen 2 32 bit getallen
     555      64   015BB                  ;      add16                optellen 2 16 bit getallen
     556      65   015BB                  ;      add32                optellen 2 32 bit getallen
     557      66   015BB                  ;      sub16                verschil 2 16 bit getallen
     558      67   015BB                  ;      sub32                verschil 2 32 bit getallen
     559      68   015BB                  ;      hexbcd8              omvormen 8 bit hex naar bcd
     560      69   015BB                  ;      hexbcd16             omvormen 16 bit hex naar bcd
     561      70   015BB                  ;      bcdhex8              omvormen 8 bit bcd naar hex
     562      71   015BB                  ;      bcdhex16             omvormen 16 bit bcd naar hex
     563      72   015BB                  ;
     564      73   015BB                  ; Diverse
     565      74   015BB                  ;      delaya0k05s          tijdsvertraging (waarde in accu)*0,05s
     566      75   015BB                  ;      delay1ms             tijdsverraging 1 milliseconde
     567      76   015BB                  ;      delay10us            tijdsvertraging 10 microseconde
     568      77   015BB                  ;      XCsw2xtal            overschakelen rc naar kristal (Pauwels Danny)
     569      78   015BB                  ;	mapregs 		selecteer de SFR's in de mapped area
     570      79   015BB                  ;	nomapregs            selecteer de SFR's in de non-mapped area
     571      80   015BB                  ;
     572      81   015BB                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     573      82   015BB                  ; LET OP!!!!
     574      83   015BB                  ; Voor je de routines gebruikt ga in de betreffende header na wat het registergebruik is,
     575      84   015BB                  ; hoe parameters doorgegeven worden, en wat de beperkingen zijn!!
     576      85   015BB                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     577      86   015BB                  ;
     578      87   015BB                  ; Geschreven door Roggemans M. (MGM) xcbpd0.inc   07/2010
     579      88   015BB                  ;
     580      89   015BB                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     581      90   015BB                  
     582      91   015BB                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     583      92   015BB                  ;
     584      93   015BB                  ; initdipswitch      is een subroutine die de pinnen van poort 4 insteld als input met
     585      94   015BB                  ; pull-up weerstanden ingeschakeld. Hierdoor kunnen schakelaars gebruikt worden naar
     586      95   015BB                  ; massa zonder extra weerstanden.
     587      96   015BB                  ;
     588      97   015BB                  ; Gebruikt geen registers
     589      98   015BB                  ;
     590      99   015BB                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     591     100   015BB                  
     592     101   015BB C08F             initdipswitch:push   syscon0              ;juiste map selecteren
     593     102   015BD 758F04                         mov    syscon0,#004h
     594     103   015C0 C0B2                           push   port_page            ;tijdelijk bewaren zodat we dat kunnen herstellen
     595     104   015C2 75B201                         mov    port_page,#001h      ;selecteer poort page 1
     596     105   015C5 75C8FF                         mov    p4_pudsel,#0ffh      ;selecteer pull_up device
     597     106   015C8 75C9FF                         mov    p4_puden,#0ffh       ;selectie inschakelen
     598     107   015CB 75B200                         mov    port_page,#000h      ;pagina 0 selecteren
     599     108   015CE 75C900                         mov    p4_dir,#000h         ;poort 4 als input schakelen
     600     109   015D1 D0B2                           pop    port_page            ;herstellen in oorspronkelijke staat
     601     110   015D3 D08F                           pop    syscon0              ;pagina terug herstellen
     602     111   015D5 22                             ret
     603     112   015D6                  
     604     113   015D6                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     605     114   015D6                  ;
     606     115   015D6                  ; initftoetsen       is een routine die de 4 functieschakelaars onder het LCD display
     607     116   015D6                  ; klaar zet voor gebruik met een schakelaar naar massa. De overige 4 pinnen van poort
     608     117   015D6                  ; 2 behouden hun originele instelling.
     609     118   015D6                  ;
     610     119   015D6                  ; Gebruikt geen registers
     611     120   015D6                  ;
     612     121   015D6                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     613     122   015D6                  
     614     123   015D6 C08F             initftoetsen: push   syscon0              ;juiste map selecteren
     615     124   015D8 758F04                         mov    syscon0,#004h
     616     125   015DB C0B2                           push   port_page            ;tijdelijk bewaren zodat we dat kunnen herstellen
     617     126   015DD 75B201                         mov    port_page,#001h      ;selecteer poort page 1
     618     127   015E0 43A00F                         orl    p2_pudsel,#00fh      ;selecteer pull_up device (onderste 4 pinnen)
     619     128   015E3 43A10F                         orl    p2_puden,#00fh       ;selectie inschakelen (onderste 4 pinnen)
     620     129   015E6 75B200                         mov    port_page,#000h      ;pagina 0 selecteren
     621     130   015E9 53A1F0                         anl    p2_dir,#0f0h         ;input drivers activeren (onderste 4 pinnen)
     622     131   015EC D0B2                           pop    port_page            ;herstellen in oorspronkelijke staat
     623     132   015EE D08F                           pop    syscon0              ;pagina terug herstellen
     624     133   015F0 22                             ret
     625     134   015F1                  
     626     135   015F1                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     627     136   015F1                  ;
     628     137   015F1                  ; initleds           is een routine die de poort 3 als output schakeld. De LED's
     629     138   015F1                  ; worden gedoofd (actief laag om ze te laden branden).
     630     139   015F1                  ;
     631     140   015F1                  ; Gebruikt geen registers
     632     141   015F1                  ;
     633     142   015F1                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     634     143   015F1                  
     635     144   015F1                  
     636     145   015F1 C08F             initleds:     push   syscon0              ;juiste map selecteren
     637     146   015F3 758F04                         mov    syscon0,#004h
     638     147   015F6 C0B2                           push   port_page            ;tijdelijk bewaren zodat we dat kunnen herstellen
     639     148   015F8 75B200                         mov    port_page,#000h      ;selecteer poort page 0
     640     149   015FB 75B1FF                         mov    p3_dir,#0ffh         ;poort 3 als output schakelen
     641     150   015FE D0B2                           pop    port_page            ;herstellen in oorspronkelijke staat
     642     151   01600 D08F                           pop    syscon0              ;pagina terug herstellen
     643     152   01602 22                             ret
     644     153   01603                  
     645     154   01603                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     646     155   01603                  ;
     647     156   01603                  ; initiic            is een subroutine die de pinnen p0.7 (sda) en p0.3 (scl) klaar zet
     648     157   01603                  ; voor gebruik als IIC bus. De andere poortpinnen worden niet aangepast
     649     158   01603                  ; scl wordt als oc output geschakeld met data waarde 1 (bus in rust)
     650     159   01603                  ; sda wordt als input geschakeld
     651     160   01603                  ;
     652     161   01603                  ; LET OP!!
     653     162   01603                  ; Dit is een IIC bus met beperkte mogelijkheden:
     654     163   01603                  ; -vaste communicatiesnleheid van 100kbit/s
     655     164   01603                  ; -enkel master mode
     656     165   01603                  ; -enkel 7 bit adressering
     657     166   01603                  ; -geen klok stretching
     658     167   01603                  ;
     659     168   01603                  ; Gebruikt geen registers
     660     169   01603                  ;
     661     170   01603                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     662     171   01603                  
     663     172   01603                  sda           bit    p0_data.7            ;pin gebruikt als sda
     664     173   01603                  scl           bit    p0_data.3            ;pin gebruikt als scl
     665     174   01603                  sdaout        equ    10000000b            ;masker om sda als output te schakelen
     666     175   01603                  sdain         equ    01111111b            ;masker om sda als input te schakelen
     667     176   01603                  
     668     177   01603 C08F             initiic:      push   syscon0              ;juiste map selecteren
     669     178   01605 758F04                         mov    syscon0,#004h
     670     179   01608 C0B2                           push   port_page
     671     180   0160A 75B200                         mov    port_page,#000h      ;pagina 0 selecteren
     672     181   0160D D287                           setb   sda                  ;data op 1 zetten (ruststand iic)
     673     182   0160F D283                           setb   scl                  ;klok op 1 zetten (ruststand iic)
     674     183   01611 75B203                         mov    port_page,#003h      ;p0_od toegankelijk maken
     675     184   01614 D283                           setb   scl                  ;klok werkt als od
     676     185   01616 D287                           setb   sda                  ;sda werkt als od
     677     186   01618 75B200                         mov    port_page,#000h      ;terug pagina 0 selecteren
     678     187   0161B 438608                         orl    p0_dir,#00001000b    ;scl als output selecteren
     679     188   0161E 53867F                         anl    p0_dir,#01111111b    ;sda als input selecteren
     680     189   01621 D0B2                           pop    port_page            ;pagina herstellen
     681     190   01623 D08F                           pop    syscon0              ;map herstellen
     682     191   01625 22                             ret
     683     192   01626                  
     684     193   01626                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     685     194   01626                  ;
     686     195   01626                  ; iicstart           is een subroutine die op de iic bus een start conditie opwekt.
     687     196   01626                  ; Bij de start conditie wordt eerst de scl laag gemaakt, dan de sda. Om de bittijd
     688     197   01626                  ; te garanderen volgt er een delay van 10us
     689     198   01626                  ;
     690     199   01626                  ; Gebruikt geen registers
     691     200   01626                  ;
     692     201   01626                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     693     202   01626                  
     694     203   01626 C08F             iicstart:     push   syscon0              ;map bewaren
     695     204   01628 758F04                         mov    syscon0,#004h        ;hoofdmap selecteren
     696     205   0162B C0B2                           push   port_page            ;pagina bewaren
     697     206   0162D 75B200                         mov    port_page,#000h      ;hier zit alles wat we nodig hebben
     698     207   01630 D283                           setb   scl                  ;zeker zijn dat we vanuit ruststand vertrekken
     699     208   01632 D287                           setb   sda                  ;idem
     700     209   01634 438680                         orl    p0_dir,#sdaout       ;pin als output schakelen
     701     210   01637 121727                         lcall  delay10us            ;
     702     211   0163A C287                           clr    sda                  ;data laag
     703     212   0163C 121727                         lcall  delay10us
     704     213   0163F C283                           clr    scl                  ;dan klok laag
     705     214   01641 121727                         lcall  delay10us            ;bit lang genoeg maken
     706     215   01644 D0B2                           pop    port_page            ;registers herstellen
     707     216   01646 D08F                           pop    syscon0
     708     217   01648 22                             ret
     709     218   01649                  
     710     219   01649                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     711     220   01649                  ;
     712     221   01649                  ; iicstop            is een subroutine die een stop conditie op de IIC bus plaatst.
     713     222   01649                  ;
     714     223   01649                  ; Gebruikt geen registers
     715     224   01649                  ;
     716     225   01649                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     717     226   01649                  
     718     227   01649 C08F             iicstop:      push   syscon0              ;map bewaren
     719     228   0164B 758F04                         mov    syscon0,#004h        ;hoofd map selecteren
     720     229   0164E C0B2                           push   port_page            ;pagina bewaren
     721     230   01650 75B200                         mov    port_page,#000h      ;hier zit alles wat we nodig hebben
     722     231   01653 438680                         orl    p0_dir,#sdaout       ;pin als output schakelen
     723     232   01656 C287                           clr    sda                  ;data naar omlaag
     724     233   01658 121727                         lcall  delay10us
     725     234   0165B D283                           setb   scl                  ;klok naar 1
     726     235   0165D 121727                         lcall  delay10us            ;wachten
     727     236   01660 D287                           setb   sda                  ;idem data
     728     237   01662 121727                         lcall  delay10us            ;
     729     238   01665 53867F                         anl    p0_dir,#sdain        ;pin terug als input schakelen
     730     239   01668 D0B2                           pop    port_page            ;registers herstellen
     731     240   0166A D08F                           pop    syscon0
     732     241   0166C 22                             ret
     733     242   0166D                  
     734     243   0166D                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     735     244   0166D                  ;
     736     245   0166D                  ; iicoutbyte         is een subroutine die de data uit de accu naar buiten stuurt op
     737     246   0166D                  ; de iic bus. In totaal worden er 8 bits verzonden. Daarna wordt een negende klokpuls
     738     247   0166D                  ; gegenereerd om de ack bit in te lezen. Die wordt doorgegeven via de c vlag
     739     248   0166D                  ;
     740     249   0166D                  ; Gebruikt:
     741     250   0166D                  ;      a=inbut te verzenden byte (accu wordt niet vernietigd)
     742     251   0166D                  ;      cy=ack bit vanuit de slave
     743     252   0166D                  ;
     744     253   0166D                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     745     254   0166D                  
     746     255   0166D C0E0             iicoutbyte:   push   acc                  ;straks alles herstellen
     747     256   0166F C0F0                           push   b                    ;gebruikt als loopcounter
     748     257   01671 C08F                           push   syscon0              ;map juist zetten
     749     258   01673 758F04                         mov    syscon0,#004h        ;hofdmap selecteren
     750     259   01676 C0B2                           push   port_page            ;poort pagina bewaren
     751     260   01678 75B200                         mov    port_page,#000h      ;basispagina selecteren
     752     261   0167B 75F008                         mov    b,#008h              ;wordt gebruikt als loopcounter
     753     262   0167E 438680                         orl    p0_dir,#sdaout       ;poortpin als output zetten
     754     263   01681 33               iicoutbyte1:  rlc    a                    ;hier gaan we dan (bit per bit naar buiten)
     755     264   01682 9287                           mov    sda,c                ;op pin
     756     265   01684 121727                         lcall  delay10us            ;wachten
     757     266   01687 D283                           setb   scl                  ;puls genereren
     758     267   01689 121727                         lcall  delay10us            ;ook hier wat tijd laten
     759     268   0168C C283                           clr    scl                  ;klok terug laag maken
     760     269   0168E D5F0F0                         djnz   b,iicoutbyte1        ;herhaal 8 keer
     761     270   01691                  
     762     271   01691                  ; de 8 bits zijn weg, nu de ack binnen nemen.
     763     272   01691                  
     764     273   01691 53867F                         anl    p0_dir,#sdain        ;pin als input schakelen
     765     274   01694 121727                         lcall  delay10us            ;wachten tot data zeker beschikbaar
     766     275   01697 D283                           setb   scl                  ;puls terug hoog
     767     276   01699 A287                           mov    c,sda                ;inlezen en naar carry
     768     277   0169B 121727                         lcall  delay10us
     769     278   0169E C283                           clr    scl                  ;klok blijft laag achter
     770     279   016A0 D0B2                           pop    port_page
     771     280   016A2 D08F                           pop    syscon0
     772     281   016A4 D0F0                           pop    b
     773     282   016A6 D0E0                           pop    acc
     774     283   016A8 22                             ret
     775     284   016A9                  
     776     285   016A9                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     777     286   016A9                  ;
     778     287   016A9                  ; iicinbyteack       is een subroutine die 1 byte inleest en als negendebit een ack
     779     288   016A9                  ; naar de slave zal zenden. De accu wordt gebruikt om de ingelezen data door te geven.
     780     289   016A9                  ;
     781     290   016A9                  ; Gebruikt:
     782     291   016A9                  ;      -de accu als output
     783     292   016A9                  ;
     784     293   016A9                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     785     294   016A9                  
     786     295   016A9 C08F             iicinbyteack: push   syscon0              ;huidige map bewaren
     787     296   016AB 758F04                         mov    syscon0,#004h        ;basispagina kiezen
     788     297   016AE C0B2                           push   port_page            ;pagina bewaren
     789     298   016B0 75B200                         mov    port_page,#000h      ;deze hebben we nodig
     790     299   016B3 C0F0                           push   b                    ;wordt gebruikt als loopcounter
     791     300   016B5 C0D0                           push   psw                  ;vlaggen bewaren
     792     301   016B7 75F008                         mov    b,#008h              ;loopcounter laden
     793     302   016BA 53867F                         anl    p0_dir,#sdain        ;pin als input schakelen
     794     303   016BD 121727           iicinbyteack1:lcall  delay10us
     795     304   016C0 D283                           setb   scl                  ;klok hoog
     796     305   016C2 A287                           mov    c,sda                ;pin inlezen
     797     306   016C4 33                             rlc    a                    ;in accu shiften
     798     307   016C5 121727                         lcall  delay10us
     799     308   016C8 C283                           clr    scl                  ;klok terug laag
     800     309   016CA D5F0F0                         djnz   b,iicinbyteack1
     801     310   016CD 438680                         orl    p0_dir,#sdaout       ;pin als output schakelen
     802     311   016D0 C287                           clr    sda                  ;ack genereren
     803     312   016D2 121727                         lcall  delay10us
     804     313   016D5 D283                           setb   scl
     805     314   016D7 121727                         lcall  delay10us
     806     315   016DA C283                           clr    scl
     807     316   016DC 53867F                         anl    p0_dir,#sdain        ;pin terug als input schakelen
     808     317   016DF D0D0                           pop    psw                  ;registers herstellen
     809     318   016E1 D0F0                           pop    b
     810     319   016E3 D0B2                           pop    port_page
     811     320   016E5 D08F                           pop    syscon0
     812     321   016E7 22                             ret
     813     322   016E8                  
     814     323   016E8                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     815     324   016E8                  ;
     816     325   016E8                  ; iicinbytenack      is een subroutine die 1 byte inleest en als negendebit een nack
     817     326   016E8                  ; naar de slave zal zenden. De accu wordt gebruikt om de ingelezen data door te geven.
     818     327   016E8                  ;
     819     328   016E8                  ; Gebruikt:
     820     329   016E8                  ;      -de accu als output
     821     330   016E8                  ;
     822     331   016E8                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     823     332   016E8                  
     824     333   016E8 C08F             iicinbytenack:push   syscon0              ;huidige map bewaren
     825     334   016EA 758F04                         mov    syscon0,#004h        ;basispagina kiezen
     826     335   016ED C0B2                           push   port_page            ;pagina bewaren
     827     336   016EF 75B200                         mov    port_page,#000h      ;deze hebben we nodig
     828     337   016F2 C0F0                           push   b                    ;wordt gebruikt als loopcounter
     829     338   016F4 C0D0                           push   psw                  ;vlaggen bewaren
     830     339   016F6 75F008                         mov    b,#008h              ;loopcounter laden
     831     340   016F9 53867F                         anl    p0_dir,#sdain        ;pin als input schakelen
     832     341   016FC 121727           iicinbytenack1:lcall  delay10us
     833     342   016FF D283                           setb   scl                  ;klok hoog
     834     343   01701 A287                           mov    c,sda                ;pin inlezen
     835     344   01703 33                             rlc    a                    ;in accu shiften
     836     345   01704 121727                         lcall  delay10us
     837     346   01707 C283                           clr    scl                  ;klok terug laag
     838     347   01709 D5F0F0                         djnz   b,iicinbytenack1     ;8 keer herhalen
     839     348   0170C 438680                         orl    p0_dir,#sdaout       ;pin als output schakelen
     840     349   0170F D287                           setb   sda                  ;nack genereren
     841     350   01711 121727                         lcall  delay10us
     842     351   01714 D283                           setb   scl
     843     352   01716 121727                         lcall  delay10us
     844     353   01719 C283                           clr    scl
     845     354   0171B 53867F                         anl    p0_dir,#sdain        ;pin terug als input schakelen
     846     355   0171E D0D0                           pop    psw                  ;registers herstellen
     847     356   01720 D0F0                           pop    b
     848     357   01722 D0B2                           pop    port_page
     849     358   01724 D08F                           pop    syscon0
     850     359   01726 22                             ret
     851     360   01727                  
     852     361   01727                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     853     362   01727                  ;
     854     363   01727                  ; delay10us          is een tijdsvertraging van 10us. Wordt gebruikt om de IIC bus
     855     364   01727                  ; te vertragen tot een maximale snelheid van 100kbit/s In realiteit zal de bussnelheid
     856     365   01727                  ; lager liggen. We houden immers geen rekening met de uitvoeringstijd van de routines,
     857     366   01727                  ; en de gebruikte delay is dubbel zo lang als stikt nodig (5us volstaat).
     858     367   01727                  ;
     859     368   01727                  ; Gebruikt geen registers
     860     369   01727                  ;
     861     370   01727                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     862     371   01727                  
     863     372   01727 C0E0             delay10us:    push   acc                  ;8*42ns=330ns
     864     373   01729 C0D0                           push   psw                  ;8*42ns=330ns
     865     374   0172B 75E01A                         mov    acc,#01ah            ;420ns
     866     375   0172E D5E0FD                         djnz   acc,$                ;420ns*aantal keer doorlopen
     867     376   01731 D0D0                           pop    psw                  ;8*42ns=330ns
     868     377   01733 D0E0                           pop    acc                  ;8*42ns=330ns
     869     378   01735 22                             ret                         ;165ns
     870     379   01736                  
     871     380   01736                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     872     381   01736                  ;
     873     382   01736                  ; delaya0k05s        is een tijdsvertraging van 0,05s maal het getal in de accu
     874     383   01736                  ;
     875     384   01736                  ; Gebruikt geen registers
     876     385   01736                  ;
     877     386   01736                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     878     387   01736                  
     879     388   01736 C0E0             delaya0k05s:  push   acc                  ;registers bewaren
     880     389   01738 C0D0                           push   psw
     881     390   0173A C0F0                           push   b
     882     391   0173C 75F032           delaya0k05s2: mov    b,#050               ;loopcounter
     883     392   0173F 12174F           delaya0k05s1: lcall  delay1ms
     884     393   01742 D5F0FA                         djnz   b,delaya0k05s1
     885     394   01745 D5E0F4                         djnz   acc,delaya0k05s2
     886     395   01748 D0F0                           pop    b                    ;registers herstellen
     887     396   0174A D0D0                           pop    psw
     888     397   0174C D0E0                           pop    acc
     889     398   0174E 22                             ret
     890     399   0174F                  
     891     400   0174F                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     892     401   0174F                  ;
     893     402   0174F                  ; Delay1ms           is een tijdsvertraging van 1 ms.
     894     403   0174F                  ;
     895     404   0174F                  ; Gebruikt geen registers
     896     405   0174F                  ;
     897     406   0174F                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     898     407   0174F                  
     899     408   0174F C0E0             delay1ms:     push   acc                  ;8*42ns=330ns
     900     409   01751 C0D0                           push   psw                  ;8*42ns=330ns
     901     410   01753 75E064                         mov    acc,#100             ;420ns
     902     411   01756 121727           delay1ms1:    lcall  delay10us            ;10us
     903     412   01759 D5E0FA                         djnz   acc,delay1ms1        ;420ns*aantal keer doorlopen
     904     413   0175C D0D0                           pop    psw                  ;8*42ns=330ns
     905     414   0175E D0E0                           pop    acc                  ;8*42ns=330ns
     906     415   01760 22                             ret                         ;165ns
     907     416   01761                  
     908     417   01761                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     909     418   01761                  ;
     910     419   01761                  ; Dit is het LCD driver gedeelte. Het is gebaseerd op de LCD driver van MGM van 1994.
     911     420   01761                  ; De driver is aangepast voor het XC888 SBC en kan gebruikt worden met standaard
     912     421   01761                  ; alfanumerische display's. Het bord wordt gebruikt met een 2*20 of een 4*20 karakter
     913     422   01761                  ; display. De basisroutines zijn bruikbaar voor alle types schermen (de
     914     423   01761                  ; gebruiker moet dan wel zelf wakker liggen over cursorrouting).
     915     424   01761                  ; De hogere routines gaan er van uit dat we een 4*20 karakter display gebruiken.
     916     425   01761                  ; Parameters worden doorgegeven via de accu, b register, dptr of r0.
     917     426   01761                  ; De routines gebruiken geen registers. Alle timing is voorzien voor een XC888 op
     918     427   01761                  ; maximale snelheid. Loopt de controller trager, dan zullen de tijdsvertragingen te
     919     428   01761                  ; lang zijn. De driver zal automatisch de IIC interface initialiseren omdat die gebruikt
     920     429   01761                  ; wordt om de LCD te bereiken. Deze routines zijn NIET bruikbaar op andere hadware
     921     430   01761                  ; systemen!!!!
     922     431   01761                  ;
     923     432   01761                  ; GESCHREVEN OP 02/1994 DOOR MARC ROGGEMANS (MGM) als lcd.drv
     924     433   01761                  ;      -aangepast door Roggemans Marc (MGM) op 11/2004 voor ADuC800 kaart als
     925     434   01761                  ;       aduclcd0.inc
     926     435   01761                  ;      -aangepast door Roggemans Marc (MGM) op 11/11/2004
     927     436   01761                  ;       aduclcd1.inc
     928     437   01761                  ;      -aangepast door Roggemans Marc (MGM) op 07/2010 voor XC888 SBC met IIC bus
     929     438   01761                  ;
     930     439   01761                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     931     440   01761                  
     932     441   01761                  e             bit    b.1                  ;enable
     933     442   01761                  rs            bit    b.0                  ;register select
     934     443   01761                  backlight     bit    b.6                  ;bit waar backlight op zit
     935     444   01761                  buzzer        bit    b.7                  ;bit waar buzzer op zit
     936     445   01761                  
     937     446   01761                  lcdport       EQU    b                    ;b regsiter wordt gebruikt als dummy poort
     938     447   01761                  
     939     448   01761                  cleardisp     EQU    001H                 ;LEEG MAKEN VAN HET SCHERM
     940     449   01761                  cursathom     EQU    002H                 ;CURSOR OP DE EERSTE PLAATS ZETTEN
     941     450   01761                  
     942     451   01761                  entrymode     EQU    00000110B            ;CURSOR NAAR RECHTS, SCHERM VAST
     943     452   01761                  displayon     EQU    00000001B            ;HOMEN EN CLEAR CURSOR
     944     453   01761                  displayof     EQU    00001000B            ;DISPLAY OFF, CURSOR OFF
     945     454   01761                  cursoroff     EQU    00001100B            ;DISPLAY ON ZONDER CURSOR
     946     455   01761                  cursoronb     EQU    00001111B            ;CURSOR ON AND BLINK
     947     456   01761                  cursoronn     EQU    00001110B            ;CURSOR ON NO BLINK
     948     457   01761                  functions     EQU    00101000B            ;INTERFACE LENGTE EN KARAKTER FONT
     949     458   01761                  cgram         EQU    01000000B            ;SELECTIE KARAKTER GENERATOR RAM
     950     459   01761                  ddram         EQU    10000000B            ;SELECTIE DATA DISPLAY RAM
     951     460   01761                  
     952     461   01761                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     953     462   01761                  ;
     954     463   01761                  ; initlcd     zal het scherm resetten en initialiseren voor gebruik via een 4
     955     464   01761                  ; bit bus. De routine zet het scherm klaar voor normaal gebruik: ingave van
     956     465   01761                  ; links naar rechts zonder display shift, normale karakterfont. De kursor staat
     957     466   01761                  ; aan als een knipperend lijntje onderaan de regel. Het scherm is leeg.
     958     467   01761                  ;
     959     468   01761                  ; registergebruik: geen
     960     469   01761                  ;
     961     470   01761                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     962     471   01761                  
     963     472   01761 C0E0             initlcd:      push   acc                  ;registers op stack plaatsen
     964     473   01763 C0D0                           push   psw
     965     474   01765 C0F0                           push   b                    ;wordt gebruikt als dummy lcd poort
     966     475   01767 121603                         lcall  initiic              ;vermits de LCD gebruikt wordt via een IIC bus
     967     476   0176A 75F0FD                         mov    lcdport,#11111101b   ;poort in uitgangstoestand zetten
     968     477   0176D                                                            ;buzzer en baklight worden nu op 1 gezet
     969     478   0176D 121905                         lcall  porttolcd            ;routine die de data uit b naar het scherm stuurt
     970     479   01770 7410                           mov    a,#010h       ;bij opstarten meer dan 30ms wachten
     971     480   01772 1218FE           initlcd1:     lcall  delay2ms
     972     481   01775 D5E0FA                         djnz   acc,initlcd1
     973     482   01778 7430                           mov    a,#00110000b  ;volgende drie schrijfbeurten zijn
     974     483   0177A 1218BD                         lcall  outhnibc      ;een truuk om het display altijd opgestart
     975     484   0177D 1218FE                         lcall  delay2ms      ;te krijgen.
     976     485   01780 7430                           mov    a,#00110000b
     977     486   01782 1218BD                         lcall  outhnibc
     978     487   01785 1218FE                         lcall  delay2ms
     979     488   01788 7430                           mov    a,#00110000b
     980     489   0178A 1218BD                         lcall  outhnibc
     981     490   0178D 1218FE                         lcall  delay2ms
     982     491   01790 7420                           mov    a,#00100000b  ;instellen 4 bit interface gebruiken
     983     492   01792 1218BD                         lcall  outhnibc      ;hoge nibble naar het controleregister
     984     493   01795 1218FE                         lcall  delay2ms      ;niet nodig volgens datasheet
     985     494   01798 7428                           mov    a,#functions  ;4 bit interface, twee lijnen 5*8 dots
     986     495   0179A 1218A7                         lcall  outc          ;naar display
     987     496   0179D 1218FE                         lcall  delay2ms      ;is iets te lang volgens datasheet
     988     497   017A0 740F                           mov    a,#cursoronb  ;display on cursor on and blink
     989     498   017A2 1218A7                         lcall  outc
     990     499   017A5 1218FE                         lcall  delay2ms      ;ook deze delay is iets te lang
     991     500   017A8 7401                           mov    a,#displayon  ;clear display and home cursor
     992     501   017AA 1218A7                         lcall  outc
     993     502   017AD 1218FE                         lcall  delay2ms      ;deze wachttijd is bijna juist
     994     503   017B0 7406                           mov    a,#entrymode  ;display klaar zetten normaal gebruik
     995     504   017B2 1218A7                         lcall  outc
     996     505   017B5 1218FE                         lcall  delay2ms      ;wachten weer veel te lang
     997     506   017B8 D0F0                           pop    b             ;registers terug in orde zetten
     998     507   017BA D0D0                           pop    psw
     999     508   017BC D0E0                           pop    acc
    1000     509   017BE 22                             ret                  ;einde van de initialisatie
    1001     510   017BF                  
    1002     511   017BF                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1003     512   017BF                  ;
    1004     513   017BF                  ; lcdoutchar  zal de ascii code in de accu naar het lcd scherm sturen. De codes
    1005     514   017BF                  ; lager dan 020h worden als controlekarakters bekeken met volgende acties:
    1006     515   017BF                  ;      00dh   =cursor in de home positie
    1007     516   017BF                  ;      00ch   =form feed    =scherm leeg maken en cursor op lacatie 000h
    1008     517   017BF                  ;      00ah   =cursor op tweede lijn plaatsen
    1009     518   017BF                  ;      001h   =cursor on blink
    1010     519   017BF                  ;      002h   =cursor on, no blink
    1011     520   017BF                  ;      003h   =cursor off
    1012     521   017BF                  ;      080h-0ffh     =cursor plaatsen op dit adres -80h
    1013     522   017BF                  ;
    1014     523   017BF                  ; de routine gebruikt geen registers
    1015     524   017BF                  ;
    1016     525   017BF                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1017     526   017BF                  
    1018     527   017BF                  ; we gaan eerst na of het een ascii code betreft van een symbool. Als dat zo is,
    1019     528   017BF                  ; dan mag de data direct naar het dataregister van het scherm.
    1020     529   017BF                  ; Betreft een controle karakter, dan is een andere aanpak nodig (zie verder).
    1021     530   017BF                  
    1022     531   017BF                  lcdoutchar:
    1023     532   017BF C0E0             outcharlcd:   push   acc           ;registers op stack
    1024     533   017C1 C0D0                           push   psw
    1025     534   017C3 B48000                         cjne   a,#080h,outcharlcd1  ;hogere codes zijn adressen
    1026     535   017C6 5046             outcharlcd1:  jnc    outcharlcd9   ;als geen carry dan is de code een address
    1027     536   017C8 B42000                         cjne   a,#020h,outcharlcd2  ;hogere codes zijn ascii van symbolen
    1028     537   017CB 503C             outcharlcd2:  jnc    outcharlcd8   ;als geen carry dan ascii code naar display
    1029     538   017CD                  
    1030     539   017CD                  ; de code in de accu is geen adres of geen geldige ascii code van een symbool.
    1031     540   017CD                  ; Het is dus een opdracht die we moeten uitvoeren.
    1032     541   017CD                  
    1033     542   017CD B40C07                         cjne   a,#00ch,outcharlcd3  ;geen form feed, dan jump
    1034     543   017D0 7401                           mov    a,#cleardisp         ;scherm leegmaken
    1035     544   017D2 1218A7                         lcall  outc                 ;naar controleregister
    1036     545   017D5 803A                           sjmp   outcharlcde          ;afsluiten
    1037     546   017D7                  
    1038     547   017D7 B40107           outcharlcd3:  cjne   a,#001h,outcharlcd4  ;geen cursor on blink
    1039     548   017DA 740F                           mov    a,#cursoronb         ;cursoron met blink
    1040     549   017DC 1218A7                         lcall  outc
    1041     550   017DF 8030                           sjmp   outcharlcde
    1042     551   017E1                  
    1043     552   017E1 B40207           outcharlcd4:  cjne   a,#002h,outcharlcd5  ;geen cursor on no blink
    1044     553   017E4 740E                           mov    a,#cursoronn         ;cursoron no blink
    1045     554   017E6 1218A7                         lcall  outc
    1046     555   017E9 8026                           sjmp   outcharlcde
    1047     556   017EB                  
    1048     557   017EB B40307           outcharlcd5:  cjne   a,#003h,outcharlcd6  ;geen cursor off, dus afsluiten routine
    1049     558   017EE 740C                           mov    a,#cursoroff         ;cursor uitschakelen
    1050     559   017F0 1218A7                         lcall  outc
    1051     560   017F3 801C                           sjmp   outcharlcde
    1052     561   017F5                  
    1053     562   017F5 B40D07           outcharlcd6:  cjne   a,#00dh,outcharlcd7  ;geen cursor home zonder clear scherm
    1054     563   017F8 7402                           mov    a,#cursathom         ;cursor in home positie
    1055     564   017FA 1218A7                         lcall  outc
    1056     565   017FD 8012                           sjmp   outcharlcde
    1057     566   017FF                  
    1058     567   017FF B40A0F           outcharlcd7:  cjne   a,#00ah,outcharlcde  ;line feed gevraagd (zet cursor op
    1059     568   01802                                                            ;tweede lijn
    1060     569   01802 74C0                           mov    a,#0c0h
    1061     570   01804 1218A7                         lcall  outc
    1062     571   01807 8008                           sjmp   outcharlcde
    1063     572   01809                  
    1064     573   01809                  ; dit label wordt uitgevoerd als de code in de accumulator een geldige ascii code
    1065     574   01809                  ; is. dit mag naar het data register.
    1066     575   01809                  
    1067     576   01809 12186D           outcharlcd8:  lcall  outd          ;klaar
    1068     577   0180C 8003                           sjmp   outcharlcde   ;einde routine
    1069     578   0180E                  
    1070     579   0180E                  ; dit label wordt uitgevoerd als de code in de accu een adres is. Dit adres is
    1071     580   0180E                  ; eigenlijk 80 te groot. Dat komt echter goed uit als commando om een adrers te
    1072     581   0180E                  ; te schrijven.
    1073     582   0180E                  
    1074     583   0180E 1218A7           outcharlcd9:  lcall  outc          ;klaar
    1075     584   01811 D0D0             outcharlcde:  pop    psw           ;registers herstellen
    1076     585   01813 D0E0                           pop    acc
    1077     586   01815 22                             ret
    1078     587   01816                  
    1079     588   01816                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1080     589   01816                  ;
    1081     590   01816                  ; outniblcd     zal de lage nibble omzetten in een ascii code en die afdrukken
    1082     591   01816                  ; op het lcd scherm.
    1083     592   01816                  ;
    1084     593   01816                  ; de routine gebruikt geen registers
    1085     594   01816                  ;
    1086     595   01816                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1087     596   01816                  
    1088     597   01816                  lcdoutnib:
    1089     598   01816 C0E0             outniblcd:    push   acc           ;registers op stack zetten
    1090     599   01818 C0D0                           push   psw
    1091     600   0181A 540F                           anl    a,#00fh       ;laagste 4 bits overhouden
    1092     601   0181C 2430                           add    a,#030h       ;omvormen naar ascii codes 0-9
    1093     602   0181E B43A00                         cjne   a,#03ah,outniblcd1   ;als groter dan dit nog 7 bijtellen
    1094     603   01821 4002             outniblcd1:   jc     outniblcde    ;als carry dan omzetting klaar
    1095     604   01823 2407                           add    a,#007h       ;omvormen naar hoofdletter
    1096     605   01825 12186D           outniblcde:   lcall  outd          ;naar het scherm
    1097     606   01828 D0D0                           pop    psw
    1098     607   0182A D0E0                           pop    acc
    1099     608   0182C 22                             ret
    1100     609   0182D                  
    1101     610   0182D                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1102     611   0182D                  ;
    1103     612   0182D                  ; lcdoutbyte    zal de inhoud van de accu afdrukken op het lcd scherm.
    1104     613   0182D                  ;
    1105     614   0182D                  ; de routine gebruikt geen registers
    1106     615   0182D                  ;
    1107     616   0182D                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1108     617   0182D                  
    1109     618   0182D                  lcdoutbyte:
    1110     619   0182D C0E0             outbytelcd:   push   acc           ;registers op de stack zetten
    1111     620   0182F C0D0                           push   psw
    1112     621   01831 C4                             swap   a             ;bitjes omruilen
    1113     622   01832 121816                         lcall  outniblcd
    1114     623   01835 C4                             swap   a             ;nog eens
    1115     624   01836 121816                         lcall  outniblcd
    1116     625   01839 D0D0                           pop    psw
    1117     626   0183B D0E0                           pop    acc
    1118     627   0183D 22                             ret
    1119     628   0183E                  
    1120     629   0183E                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1121     630   0183E                  ;
    1122     631   0183E                  ; lcddispdptr   zal de inhoud van de dptr afdrukken op het lcd scherm
    1123     632   0183E                  ;
    1124     633   0183E                  ; de routine gebruikt geen registers
    1125     634   0183E                  ;
    1126     635   0183E                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1127     636   0183E                  
    1128     637   0183E                  lcddispdptr:
    1129     638   0183E C0E0             dispdptrlcd:  push   acc           ;registers bewaren op stack
    1130     639   01840 C0D0                           push   psw
    1131     640   01842 E583                           mov    a,dph         ;hoge deel eerst naar het scherm
    1132     641   01844 12182D                         lcall  outbytelcd
    1133     642   01847 E582                           mov    a,dpl         ;dan het lage deel
    1134     643   01849 12182D                         lcall  outbytelcd
    1135     644   0184C D0D0                           pop    psw
    1136     645   0184E D0E0                           pop    acc
    1137     646   01850 22                             ret
    1138     647   01851                  
    1139     648   01851                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1140     649   01851                  ;
    1141     650   01851                  ; lcdoutmsga  zal een string ascii codes op het scherm plaatsen. Het startadres
    1142     651   01851                  ; van de string staat in de dptr. De string wordt afgesloten met een 000h.
    1143     652   01851                  ; De routine gebruikt outcharlcd voor het sturen van karakters naar het LCD
    1144     653   01851                  ; scherm. Positionnering van de cursor en cursorcontrole kan in de ascii string
    1145     654   01851                  ; opgenomen worden met de pseudo ascii codes (zie outcharlcd).
    1146     655   01851                  ;
    1147     656   01851                  ; de routine gebruikt geen registers
    1148     657   01851                  ;
    1149     658   01851                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1150     659   01851                  
    1151     660   01851                  lcdoutmsga:
    1152     661   01851 C0E0             outmsgalcd:   push   acc           ;registers op de stack
    1153     662   01853 C0D0                           push   psw
    1154     663   01855 C083                           push   dph           ;ook de data pointer
    1155     664   01857 C082                           push   dpl
    1156     665   01859                  
    1157     666   01859                  ;We lezen karakters uit code memory tot de 000h code gevonden wordt.
    1158     667   01859                  
    1159     668   01859 E4               outmsgalcd1:  clr    a             ;waarde zit in onze weg
    1160     669   0185A 93                             movc   a,@a+dptr     ;waarde lezen
    1161     670   0185B 6007                           jz     outmsgalcde   ;als 0 dan naar einde springen
    1162     671   0185D                  
    1163     672   0185D                  ; de code is niet 0 dus versturen met outchar
    1164     673   0185D                  
    1165     674   0185D 1217BF                         lcall  outcharlcd    ;weg er mee
    1166     675   01860 A3                             inc    dptr          ;naar volgende ascii code wijzen
    1167     676   01861 021859                         ljmp   outmsgalcd1   ;lus sluiten
    1168     677   01864                  
    1169     678   01864 D082             outmsgalcde:  pop    dpl           ;registers herstellen
    1170     679   01866 D083                           pop    dph
    1171     680   01868 D0D0                           pop    psw
    1172     681   0186A D0E0                           pop    acc
    1173     682   0186C 22                             ret
    1174     683   0186D                  
    1175     684   0186D                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1176     685   0186D                  ;
    1177     686   0186D                  ; outd is een routine die naar het data register van het display een
    1178     687   0186D                  ; volledige byte stuurt.
    1179     688   0186D                  ;
    1180     689   0186D                  ; De routine gebruikt geen registers.
    1181     690   0186D                  ;
    1182     691   0186D                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1183     692   0186D                  
    1184     693   0186D C0E0             outd:         push   acc           ;registers op stack zetten
    1185     694   0186F C0D0                           push   psw
    1186     695   01871 12187D                         lcall  outhnibd      ;hoogste vier bits verzenden
    1187     696   01874 C4                             swap   a             ;bitjes omruilen
    1188     697   01875 12187D                         lcall  outhnibd      ;naar het scherm sturen
    1189     698   01878 D0D0                           pop    psw           ;registers terug herstellen
    1190     699   0187A D0E0                           pop    acc
    1191     700   0187C 22                             ret
    1192     701   0187D                  
    1193     702   0187D                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1194     703   0187D                  ;
    1195     704   0187D                  ; outhnibd stuurt de hoge 4 bits van de accu naar het data register van het
    1196     705   0187D                  ; lcd scherm.
    1197     706   0187D                  ;
    1198     707   0187D                  ; de routine gebruikt geen registers.
    1199     708   0187D                  ;
    1200     709   0187D                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1201     710   0187D                  
    1202     711   0187D C0E0             outhnibd:     push   acc           ;registers op stack plaatsen
    1203     712   0187F C0D0                           push   psw
    1204     713   01881 C0F0                           push   b             ;werkregister
    1205     714   01883 12191E                         lcall  lcdtoport     ;lees de expander naar b register
    1206     715   01886 D2F0                           setb   rs            ;controle lijn in orde
    1207     716   01888 C2F1                           clr    e             ;deselectie display
    1208     717   0188A 54F0                           anl    a,#0f0h       ;hoogste 4 bits afzonderen
    1209     718   0188C 03                             rr     a             ;bits op juiste plaats zetten
    1210     719   0188D 03                             rr     a             ;voor b reg
    1211     720   0188E 53F0C3                         anl    b,#11000011b  ;bits laag maken, worden vervangen door data in a
    1212     721   01891 42F0                           orl    b,a           ;bij elkaar voegen
    1213     722   01893 121905                         lcall  porttolcd     ;naar expnder
    1214     723   01896 D2F1                           setb   e             ;display enabelen
    1215     724   01898 121905                         lcall  porttolcd
    1216     725   0189B C2F1                           clr    e             ;display deselecteren
    1217     726   0189D 121905                         lcall  porttolcd
    1218     727   018A0 D0F0                           pop    b
    1219     728   018A2 D0D0                           pop    psw           ;registers herstellen
    1220     729   018A4 D0E0                           pop    acc
    1221     730   018A6 22                             ret
    1222     731   018A7                  
    1223     732   018A7                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1224     733   018A7                  ;
    1225     734   018A7                  ; outc is een routine die naar het controleregister van het display een
    1226     735   018A7                  ; volledige byte stuurt.
    1227     736   018A7                  ;
    1228     737   018A7                  ; De routine gebruikt geen registers.
    1229     738   018A7                  ;
    1230     739   018A7                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1231     740   018A7                  
    1232     741   018A7 C0E0             outc:         push   acc           ;registers op stack zetten
    1233     742   018A9 C0D0                           push   psw
    1234     743   018AB 1218BD                         lcall  outhnibc      ;hoogste vier bits verzenden
    1235     744   018AE 1218FE                         lcall  delay2ms      ;niet echt nodig
    1236     745   018B1 C4                             swap   a             ;bitjes omruilen
    1237     746   018B2 1218BD                         lcall  outhnibc      ;naar het scherm sturen
    1238     747   018B5 1218FE                         lcall  delay2ms      ;altijd goed voor traagste commando
    1239     748   018B8 D0D0                           pop    psw           ;registers terug herstellen
    1240     749   018BA D0E0                           pop    acc
    1241     750   018BC 22                             ret
    1242     751   018BD                  
    1243     752   018BD                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1244     753   018BD                  ;
    1245     754   018BD                  ; outhnibc stuurt de hoge 4 bits van de accu naar het controle register van het
    1246     755   018BD                  ; lcd scherm.
    1247     756   018BD                  ;
    1248     757   018BD                  ; de routine gebruikt geen registers.
    1249     758   018BD                  ;
    1250     759   018BD                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1251     760   018BD                  
    1252     761   018BD C0E0             outhnibc:     push   acc           ;registers op stack plaatsen
    1253     762   018BF C0D0                           push   psw
    1254     763   018C1 C0F0                           push   b             ;werkregister
    1255     764   018C3 12191E                         lcall  lcdtoport     ;lees de expander naar b register
    1256     765   018C6 C2F0                           clr    rs            ;controle lijn in orde
    1257     766   018C8 C2F1                           clr    e             ;deselectie display
    1258     767   018CA 54F0                           anl    a,#0f0h       ;hoogste 4 bits afzonderen
    1259     768   018CC 03                             rr     a             ;bits op juiste plaats zetten
    1260     769   018CD 03                             rr     a             ;voor b reg
    1261     770   018CE 53F0C3                         anl    b,#11000011b  ;bits laag maken, worden vervangen door data in a
    1262     771   018D1 42F0                           orl    b,a           ;bij elkaar voegen
    1263     772   018D3 121905                         lcall  porttolcd     ;naar expnder
    1264     773   018D6 D2F1                           setb   e             ;display enabelen
    1265     774   018D8 121905                         lcall  porttolcd
    1266     775   018DB C2F1                           clr    e             ;display deselecteren
    1267     776   018DD 121905                         lcall  porttolcd
    1268     777   018E0 D0F0                           pop    b
    1269     778   018E2 D0D0                           pop    psw           ;registers herstellen
    1270     779   018E4 D0E0                           pop    acc
    1271     780   018E6 22                             ret
    1272     781   018E7                  
    1273     782   018E7                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1274     783   018E7                  ;
    1275     784   018E7                  ; BUILD0 IS EEN ROUTINE DIE DE KARAKTERGENERATOR RAM ZAL LADEN MET HET
    1276     785   018E7                  ; BITPATROON VOOR 8 KARAKTERS. DE ROUTINE GEBRUIKT EEN BITMAP OP HET ADRES
    1277     786   018E7                  ; IN DPTR. DE TABEL WORDT AFGESLOTEN DOOR EEN BYTE MET BIT 7=1. DE ROUTINE
    1278     787   018E7                  ; GEBRUIKT DPTR, ACC, PSW EN ENKELE LCD.DRV ROUTINES. NA HET VULLEN VAN DE
    1279     788   018E7                  ; DATA RAM WORDT OPNIEUW ADRES 0 VAN DE DISPLAY RAM GESELECTEERD. ER WORDT GEEN
    1280     789   018E7                  ; DATA GESCHREVEN.
    1281     790   018E7                  ;
    1282     791   018E7                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1283     792   018E7                  
    1284     793   018E7 7440             BUILD:        MOV    A,#CGRAM      ;TOEGANG TOT KARAKTER GENERATOR RAM
    1285     794   018E9 1218A7           BUILD1:       LCALL  OUTC          ;NAAR SCHERM VERSTUREN
    1286     795   018EC 7400             BUILD3:       MOV    A,#000H       ;ACCU OP NUL ZETTEN
    1287     796   018EE 93                             MOVC   A,@A+DPTR     ;EERSTE CODE UIT TABEL LEZEN
    1288     797   018EF 12186D                         LCALL  OUTD          ;NAAR KARAKTER GENERATOR RAM STUREN
    1289     798   018F2 20E703                         JB     ACC.7,BUILD2  ;ALS BIT 1 DAN EINDE
    1290     799   018F5 A3                             INC    DPTR          ;NAAR VOLGENDE LOKATIE WIJZEN
    1291     800   018F6 80F4                           SJMP   BUILD3
    1292     801   018F8 7480             BUILD2:       MOV    A,#DDRAM      ;DATA DISPLAY RAM SELECTEREN
    1293     802   018FA 1218A7                         LCALL  OUTC          ;NAAR KONTROLE REGISTER STUREN
    1294     803   018FD 22                             RET                  ;EINDE VAN DE ROUTINE
    1295     804   018FE                  
    1296     805   018FE                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1297     806   018FE                  ;
    1298     807   018FE                  ; Delay2ms is een vertragingsroutine van 2ms.
    1299     808   018FE                  ;
    1300     809   018FE                  ; De routine gebruikt geen registers.
    1301     810   018FE                  ;
    1302     811   018FE                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1303     812   018FE                  
    1304     813   018FE 12174F           delay2ms:     lcall  delay1ms
    1305     814   01901 12174F                         lcall  delay1ms
    1306     815   01904 22                             ret
    1307     816   01905                  
    1308     817   01905                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1309     818   01905                  ;
    1310     819   01905                  ; porttolcd          is een subroutine die de inhoud van het b register naar het lcd
    1311     820   01905                  ; scherm stuurt via de port expander.
    1312     821   01905                  ;
    1313     822   01905                  ; Gebruikt geen registers
    1314     823   01905                  ;
    1315     824   01905                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1316     825   01905                  
    1317     826   01905 C0E0             porttolcd:    push   acc           ;geen registers gebruiken
    1318     827   01907 C0D0                           push   psw           ;trekken ons niks aan van ack bit
    1319     828   01909 121626                         lcall  iicstart      ;vertrokken
    1320     829   0190C 7440                           mov    a,#01000000b  ;schrijven naar expander
    1321     830   0190E 12166D                         lcall  iicoutbyte    ;weg er mee
    1322     831   01911 E5F0                           mov    a,b           ;data verzenden
    1323     832   01913 12166D                         lcall  iicoutbyte
    1324     833   01916 121649                         lcall  iicstop       ;transactie sluiten
    1325     834   01919 D0D0                           pop    psw
    1326     835   0191B D0E0                           pop    acc
    1327     836   0191D 22                             ret
    1328     837   0191E                  
    1329     838   0191E                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1330     839   0191E                  ;
    1331     840   0191E                  ; lcdtoport          is een subroutine die de waarde van de expander uitleest naar
    1332     841   0191E                  ; het b regiser. Op die manier kunnen we de expander laten onthouden wat de waarde
    1333     842   0191E                  ; van buzzet en backlight is.
    1334     843   0191E                  ;
    1335     844   0191E                  ; Gebruikt b register
    1336     845   0191E                  ;
    1337     846   0191E                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1338     847   0191E                  
    1339     848   0191E C0E0             lcdtoport:    push   acc           ;geen registers gebruiken
    1340     849   01920 C0D0                           push   psw           ;trekken ons niks aan van ack bit
    1341     850   01922 121626                         lcall  iicstart      ;vertrokken
    1342     851   01925 7441                           mov    a,#01000001b  ;lezen van expander
    1343     852   01927 12166D                         lcall  iicoutbyte    ;weg er mee
    1344     853   0192A 1216E8                         lcall  iicinbytenack ;data inlezen
    1345     854   0192D 121649                         lcall  iicstop
    1346     855   01930 F5F0                           mov    b,a
    1347     856   01932 D0D0                           pop    psw
    1348     857   01934 D0E0                           pop    acc
    1349     858   01936 22                             ret
    1350     859   01937                  
    1351     860   01937                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1352     861   01937                  ;
    1353     862   01937                  ; lcdlighton         is een subroutine die de backlight inschakeld
    1354     863   01937                  ;
    1355     864   01937                  ; Gebruikt geen registers
    1356     865   01937                  ;
    1357     866   01937                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1358     867   01937                  
    1359     868   01937 C0F0             lcdlighton:   push   b
    1360     869   01939 12191E                         lcall  lcdtoport     ;expander lezen
    1361     870   0193C C2F6                           clr    b.6           ;licht aan doen
    1362     871   0193E 121905                         lcall  porttolcd     ;expander scrijven
    1363     872   01941 D0F0                           pop    b
    1364     873   01943 22                             ret
    1365     874   01944                  
    1366     875   01944                  
    1367     876   01944                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1368     877   01944                  ;
    1369     878   01944                  ; lcdlightoff        is een subroutine die de backlight uitschakeld
    1370     879   01944                  ;
    1371     880   01944                  ; Gebruikt geen registers
    1372     881   01944                  ;
    1373     882   01944                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1374     883   01944                  
    1375     884   01944 C0F0             lcdlightoff:  push   b
    1376     885   01946 12191E                         lcall  lcdtoport     ;expander lezen
    1377     886   01949 D2F6                           setb   b.6           ;licht uit doen
    1378     887   0194B 121905                         lcall  porttolcd     ;expander scrijven
    1379     888   0194E D0F0                           pop    b
    1380     889   01950 22                             ret
    1381     890   01951                  
    1382     891   01951                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1383     892   01951                  ;
    1384     893   01951                  ; lcdbuzon           is een subroutine die de buzzer inschakeld
    1385     894   01951                  ;
    1386     895   01951                  ; Gebruikt geen registers
    1387     896   01951                  ;
    1388     897   01951                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1389     898   01951                  
    1390     899   01951 C0F0             lcdbuzon:     push   b
    1391     900   01953 12191E                         lcall  lcdtoport     ;expander lezen
    1392     901   01956 C2F7                           clr    b.7           ;buzzer aan doen
    1393     902   01958 121905                         lcall  porttolcd     ;expander scrijven
    1394     903   0195B D0F0                           pop    b
    1395     904   0195D 22                             ret
    1396     905   0195E                  
    1397     906   0195E                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1398     907   0195E                  ;
    1399     908   0195E                  ; lcdbuzoff          is een subroutine die de buzzer uitschakeld
    1400     909   0195E                  ;
    1401     910   0195E                  ; Gebruikt geen registers
    1402     911   0195E                  ;
    1403     912   0195E                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1404     913   0195E                  
    1405     914   0195E C0F0             lcdbuzoff:    push   b
    1406     915   01960 12191E                         lcall  lcdtoport     ;expander lezen
    1407     916   01963 D2F7                           setb   b.7           ;buzzer aan doen
    1408     917   01965 121905                         lcall  porttolcd     ;expander scrijven
    1409     918   01968 D0F0                           pop    b
    1410     919   0196A 22                             ret
    1411     920   0196B                  
    1412     921   0196B                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1413     922   0196B                  ;
    1414     923   0196B                  ; Dit deel van de driver laat toe de USB verbinding met de PC te gebruiken als
    1415     924   0196B                  ; een standaard com poort op 9600 baud.
    1416     925   0196B                  ; De file laat toe om de seriele poort te gebruiken en biedt de standaard
    1417     926   0196B                  ; monitorroutines zoals die beschikbaar zijn in de MGM monitors voor 8051.
    1418     927   0196B                  ; De belangrijkste afwijking van de standaard routines is de initsio subroutine.
    1419     928   0196B                  ; Die laat toe om 9600 baud in te stellen. Dit zal enkel kunnen met het xtal
    1420     929   0196B                  ; ingeschakeld en met de CPU klok 24 Mhz. Het inschakelen van het XTAL gebeurt
    1421     930   0196B                  ; NIET door deze routine.
    1422     931   0196B                  ;
    1423     932   0196B                  ; Geschreven door Roggemans Marc (MGM) op 07/2010 v0
    1424     933   0196B                  ;
    1425     934   0196B                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1426     935   0196B                  
    1427     936   0196B                  blank         equ    020h          ;ascii code voor een blank
    1428     937   0196B                  xoff          equ    013h          ;ascii code xoff caracter (ctrl s)
    1429     938   0196B                  ff            equ    00ch          ;ascii code voor nieuw blad
    1430     939   0196B                  cr            equ    00dh          ;ascii code voor een wagenterugloop
    1431     940   0196B                  lf            equ    00ah          ;ascii code voor volgende lijn
    1432     941   0196B                  backsp        equ    008h          ;ascii code voor het bs karakter
    1433     942   0196B                  beep          equ    007h          ;ascii code voor een beep
    1434     943   0196B                  
    1435     944   0196B 08200800         wissen:       db     backsp,blank,backsp,000h    ;string wissen karakter
    1436     945   0196F                                                                          ;van het scherm
    1437     946   0196F                  
    1438     947   0196F                  strtbuf       equ     054h         ;start adres van de buffer
    1439     948   0196F                  endbuf        equ     07fh         ;laatst gebruikte locatie (kan cr bevatten)
    1440     949   0196F                  
    1441     950   0196F                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1442     951   0196F                  ;
    1443     952   0196F                  ; initsio zal de seriele poort klaar zetten voor gebruik. De baudrate is 9600.
    1444     953   0196F                  ;
    1445     954   0196F                  ; Gebruikt geen registers
    1446     955   0196F                  ;
    1447     956   0196F                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1448     957   0196F                  
    1449     958   0196F C0E0             initsio:      push   acc                  ;registers op de stack zetten
    1450     959   01971 C08F                           push   syscon0              ;map bewaren
    1451     960   01973 758F04                         mov    syscon0,#004h        ;hier zit al wat we nodig hebben
    1452     961   01976 C0B2                           push   port_page            ;pagina op stack zetten
    1453     962   01978 C0BF                           push   scu_page
    1454     963   0197A 75BF00                         mov    scu_page,#000h       ;pagina 0 system control regs
    1455     964   0197D                  ; eerst gaan we de pinnen van poort 1 juist zetten:
    1456     965   0197D                  ;      -p1.0 als input en alt1 selectie
    1457     966   0197D                  ;      -p1.1 als output en alt2 selectie
    1458     967   0197D                  
    1459     968   0197D 75B202                         mov    port_page,#002h      ;pagina 2 selecteren
    1460     969   01980 5390FD                         anl    p1_altsel0,#11111101b
    1461     970   01983 439001                         orl    p1_altsel0,#00000001b
    1462     971   01986 5391FE                         anl    p1_altsel1,#11111110b
    1463     972   01989 439102                         orl    p1_altsel1,#00000010b
    1464     973   0198C 75B200                         mov    port_page,#000h      ;pagina 0 selecteren
    1465     974   0198F 5391FE                         anl    p1_dir,#11111110b    ;p1.0=input
    1466     975   01992 439102                         orl    p1_dir,#00000010b    ;p1.1=output
    1467     976   01995                  
    1468     977   01995                  ; Nu moet de baud rate generator ingesteld worden
    1469     978   01995                  ; We gaan er van uit dat de systeemklok 24MHz is
    1470     979   01995                  
    1471     980   01995 759850                         mov    scon,#01010000b      ;UART initialiseren
    1472     981   01998                  
    1473     982   01998                  ; LET OP!!!!!!!!!!!!!! eerst BG laden, dan bcon, anders wordt BG waarde niet
    1474     983   01998                  ; gebruikt!!
    1475     984   01998                  
    1476     985   01998 75BE9B                         mov    bg,#155              ;zie 12-13 in XC888 UM
    1477     986   0199B 75BD11                         mov    bcon,#00010001b
    1478     987   0199E D0BF                           pop    scu_page
    1479     988   019A0 D0B2                           pop    port_page            ;alles terug herstellen
    1480     989   019A2 D08F                           pop    syscon0
    1481     990   019A4 D0E0                           pop    acc
    1482     991   019A6 22                             ret
    1483     992   019A7                  
    1484     993   019A7                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1485     994   019A7                  ;
    1486     995   019A7                  ; SIOOUTCHAR IS EEN SUBROUTINE DIE EEN KARAKTER VIA DE SERIELE INTERFACE NAAR
    1487     996   019A7                  ; BUITEN STUURT. DE ROUTINE GEBRUIKT DE ACCU ALS INPUT. DE ROUTINE GAAT NA DAT
    1488     997   019A7                  ; DE TRANSMITTER LEEG IS ALVORENS HET KARAKTER TE VERSTUREN.
    1489     998   019A7                  ;
    1490     999   019A7                  ; de routine gebruikt geen registers.
    1491    1000   019A7                  ;
    1492    1001   019A7                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1493    1002   019A7                  
    1494    1003   019A7                  siooutchar:
    1495    1004   019A7 F599             OUTCHAR:      MOV    SBUF,A        ;KARAKTER VERZENDEN
    1496    1005   019A9 3099FD           OUTCHAR1:     JNB    TI,OUTCHAR1   ;WACHT TOT ZENDER BESCHIKBAAR
    1497    1006   019AC C299                           CLR    TI            ;LAAG MAKEN VAN DE BIT
    1498    1007   019AE 22                             RET
    1499    1008   019AF                  
    1500    1009   019AF                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1501    1010   019AF                  ;
    1502    1011   019AF                  ; SIOOUTNIB VERZEND DE LAAGSTE VIER BITS NAAR DE SERIELE POORT ONDER DE VORM VAN
    1503    1012   019AF                  ; EEN ASCII CODE. DE ACCU EN DE VLAGGEN WORDEN DOOR DE ROUTINE GEBRUIKT.
    1504    1013   019AF                  ;
    1505    1014   019AF                  ; de routine gebruikt geen registers.
    1506    1015   019AF                  ;
    1507    1016   019AF                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1508    1017   019AF                  
    1509    1018   019AF                  siooutnib:
    1510    1019   019AF C0E0             OUTNIB:       push   acc           ;registers op de stack
    1511    1020   019B1 C0D0                           push   psw
    1512    1021   019B3 540F                           ANL    A,#00FH       ;AFZONDEREN
    1513    1022   019B5 121A9F                         LCALL  BATRANS       ;OMZETTEN IN ASCII CODE
    1514    1023   019B8 1219A7                         LCALL  OUTCHAR       ;VERSTUREN
    1515    1024   019BB 121A08                         LCALL  XONXOFF       ;FLOW CONTROL
    1516    1025   019BE D0D0                           pop    psw           ;registers herstellen
    1517    1026   019C0 D0E0                           pop    acc
    1518    1027   019C2 22                             RET
    1519    1028   019C3                  
    1520    1029   019C3                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1521    1030   019C3                  ;
    1522    1031   019C3                  ; SIOOUTBYTE ZET DE HEX INHOUD VAN DE ACCU OP DE SERIELE POORT. ALS FLOW CONTROL
    1523    1032   019C3                  ; WORDT XONXOFF GEBRUIKT.
    1524    1033   019C3                  ;
    1525    1034   019C3                  ; de routine gebruikt geen registers.
    1526    1035   019C3                  ;
    1527    1036   019C3                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1528    1037   019C3                  
    1529    1038   019C3                  siooutbyte:
    1530    1039   019C3 C0E0             OUTBYTE:      push   acc           ;registers op de stack zetten
    1531    1040   019C5 C0D0                           push   psw
    1532    1041   019C7 C0E0                           PUSH   ACC           ;BACK UP NEMEN VAN DE ACCU
    1533    1042   019C9 C4                             SWAP   A             ;EERST HOOGSTE DEEL
    1534    1043   019CA 1219AF                         LCALL  OUTNIB        ;NIBBLE NAAR HET SCHERM
    1535    1044   019CD D0E0                           POP    ACC           ;HERSTELLEN VAN DE ACCU
    1536    1045   019CF 1219AF                         LCALL  OUTNIB        ;NIBBLE NAAR HET SCHERM
    1537    1046   019D2 D0D0                           pop    psw           ;registers herstellen
    1538    1047   019D4 D0E0                           pop    acc
    1539    1048   019D6 22                             RET
    1540    1049   019D7                  
    1541    1050   019D7                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1542    1051   019D7                  ;
    1543    1052   019D7                  ; SIODISPDPTR ZET DE HEX INHOUD VAN DE DPTR OP HET SCHERM OP DE HUIDIGE PLAATS
    1544    1053   019D7                  ; VAN DE CURSOR.
    1545    1054   019D7                  ;
    1546    1055   019D7                  ; de routine gebruikt geen registers.
    1547    1056   019D7                  ;
    1548    1057   019D7                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1549    1058   019D7                  
    1550    1059   019D7                  siodispdptr:
    1551    1060   019D7 C0E0             DISPDPTR:     push   acc           ;registers op de stack zetten
    1552    1061   019D9 C0D0                           push   psw
    1553    1062   019DB E583                           MOV    A,DPH         ;EERST HOOGSTE DEEL OP SCHERM
    1554    1063   019DD 1219C3                         LCALL  OUTBYTE       ;BYTE IN ASCII NAAR HET SCHERM
    1555    1064   019E0 E582                           MOV    A,DPL         ;MINST BEDUIDENDE DEEL VERZENDEN
    1556    1065   019E2 1219C3                         LCALL  OUTBYTE       ;WEG ER MEE
    1557    1066   019E5 D0D0                           pop    psw           ;registers herstellen
    1558    1067   019E7 D0E0                           pop    acc
    1559    1068   019E9 22                             RET                  ;EINDE
    1560    1069   019EA                  
    1561    1070   019EA                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1562    1071   019EA                  ;
    1563    1072   019EA                  ; SIOOUTMSGA IS EEN SUBROUTINE, DIE DE ASCII CODES VANAF HET ADRES IN DE DPTR,
    1564    1073   019EA                  ; TOT AAN DE CODE 00H, OP HET SCHERM ZET. HET BERICHT STAAT IN CODE MEMORY.
    1565    1074   019EA                  ;
    1566    1075   019EA                  ; de routine gebruikt geen registers.
    1567    1076   019EA                  ;
    1568    1077   019EA                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1569    1078   019EA                  
    1570    1079   019EA                  siooutmsga:
    1571    1080   019EA C0E0             OUTMSGA:      push   acc           ;alles op de stack zetten
    1572    1081   019EC C0D0                           push   psw
    1573    1082   019EE C082                           push   dpl
    1574    1083   019F0 C083                           push   dph
    1575    1084   019F2 E4               outmsga2:     CLR    A             ;ACCU LEEG MAKEN
    1576    1085   019F3 93                             MOVC   A,@A+DPTR     ;EERSTE CODE OPHALEN
    1577    1086   019F4 6009                           JZ     OUTMSGA1      ;ALS NUL DAN EINDE
    1578    1087   019F6 1219A7                         LCALL  OUTCHAR       ;KARAKTER NAAR HET SCHERM
    1579    1088   019F9 121A08                         LCALL  XONXOFF       ;SOFTWARE HANDSHAKE
    1580    1089   019FC A3                             INC    DPTR          ;DPTR AANPASSEN
    1581    1090   019FD 80F3                           SJMP   OUTMSGA2      ;HERHAAL TOT EINDE
    1582    1091   019FF D083             OUTMSGA1:     pop    dph           ;alles herstellen
    1583    1092   01A01 D082                           pop    dpl
    1584    1093   01A03 D0D0                           pop    psw
    1585    1094   01A05 D0E0                           pop    acc
    1586    1095   01A07 22                             RET                  ;EINDE ROUTINE
    1587    1096   01A08                  
    1588    1097   01A08                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1589    1098   01A08                  ;
    1590    1099   01A08                  ; XONXOFF LAAT HET GEBRUIK VAN SOFTWARE HANDSHAKE TOE. DE ROUTINE GAAT NA DAT
    1591    1100   01A08                  ; ER EEN KARAKTER ONTVANGEN WERD. ALS DIT HET XOFF KARAKTER IS BLIJFT DE
    1592    1101   01A08                  ; ROUTINE WACHTEN OP EEN ANDER WILLEKEURIG KARAKTER. DIT LAATSTE WORDT NIET
    1593    1102   01A08                  ; VERDER DOORGEGEVEN.
    1594    1103   01A08                  ;
    1595    1104   01A08                  ; de routine gebruikt geen registers.
    1596    1105   01A08                  ;
    1597    1106   01A08                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1598    1107   01A08                  
    1599    1108   01A08 C0E0             XONXOFF:      push   acc           ;registers op de stack zetten
    1600    1109   01A0A C0D0                           push   psw
    1601    1110   01A0C 109805                         JBC    RI,XONXOFF1   ;GA NA KARAKTER ONTVANGEN
    1602    1111   01A0F D0D0             XONXOFF2:     pop    psw           ;registers herstellen
    1603    1112   01A11 D0E0                           pop    acc
    1604    1113   01A13 22                             RET                  ;ANDERS EINDE
    1605    1114   01A14 E599             XONXOFF1:     MOV    A,SBUF        ;ZO JA, KARAKTER LADEN IN ACCU
    1606    1115   01A16 B413F6                         CJNE   A,#XOFF,XONXOFF2     ;ALS NIET XOFF DAN VERDER
    1607    1116   01A19 1098F3           XONXOFF3:     JBC    RI,XONXOFF2   ;WACHTEN OP WILLEKEURIG KARAKTER
    1608    1117   01A1C 80FB                           SJMP   XONXOFF3      ;EN DAN RIBBE EN DE BIE
    1609    1118   01A1E                  
    1610    1119   01A1E                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1611    1120   01A1E                  ;
    1612    1121   01A1E                  ; SIOINCHAR BLIJFT WACHTEN TOTDAT ER EEN KARAKTER ONTVANGEN WERD DOOR DE SERIELE
    1613    1122   01A1E                  ; INTERFACE. HET KARAKTER WORDT DOORGEGEVEN IN DE ACCUMULATOR.
    1614    1123   01A1E                  ;
    1615    1124   01A1E                  ; de routine gebruikt de accu.
    1616    1125   01A1E                  ;
    1617    1126   01A1E                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1618    1127   01A1E                  
    1619    1128   01A1E                  sioinchar:
    1620    1129   01A1E 3098FD           INCHAR:       JNB    RI,INCHAR            ;BLIJF WACHTEN OP HET KARAKTER
    1621    1130   01A21 C298                           CLR    RI                   ;BIT LAAG MAKEN
    1622    1131   01A23 E599                           MOV    A,SBUF               ;KARAKTER IN DE ACCU
    1623    1132   01A25 22                             RET
    1624    1133   01A26                  
    1625    1134   01A26                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1626    1135   01A26                  ;
    1627    1136   01A26                  ; SIOINBYTE LEEST TWEE ASCII CODES BINNEN EN VORMT ZE OM TOT EEN HEX BYTE.
    1628    1137   01A26                  ; ALS OUTPUT WORDT DE ACCU GEBRUIKT.
    1629    1138   01A26                  ; ALS HET DE TWEE ASCII CODES NIET TOT EEN BYTE OMGEZET KUNNEN WORDEN, ZAL
    1630    1139   01A26                  ; DE CARRY OP 1 GEZET WORDEN.
    1631    1140   01A26                  ;
    1632    1141   01A26                  ; De routine gebruikt de accu, r0 en de psw.
    1633    1142   01A26                  ;
    1634    1143   01A26                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1635    1144   01A26                  
    1636    1145   01A26                  sioinbyte:
    1637    1146   01A26 121A1E           INBYTE:       LCALL  INCHAR               ;EERSTE KARAKTER INLEZEN
    1638    1147   01A29 121A92                         LCALL  LOWUPTR
    1639    1148   01A2C 121AA9                         LCALL  ASCBINTRANS          ;OMZETTEN NAAR HEX GETAL
    1640    1149   01A2F 400E                           JC     INBYTE1              ;BIJ ERROR AKTIE ONDERNEMEN
    1641    1150   01A31 C4                             SWAP   A                    ;IS HOOGSTE NIBBLE
    1642    1151   01A32 F8                             MOV    R0,A                 ;ACCU TIJDELIJK BEWAREN
    1643    1152   01A33 121A1E                         LCALL  INCHAR               ;TWEEDE KARAKTER OPHALEN
    1644    1153   01A36 121A92                         LCALL  LOWUPTR
    1645    1154   01A39 121AA9                         LCALL  ASCBINTRANS          ;OMZETTEN NAAR BIN GETAL
    1646    1155   01A3C 4001                           JC     INBYTE1              ;BIJ ERROR ....
    1647    1156   01A3E 48                             ORL    A,R0                 ;BIJDE GETALLEN SAMEN VOEGEN
    1648    1157   01A3F 22               INBYTE1:      RET
    1649    1158   01A40                  
    1650    1159   01A40                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1651    1160   01A40                  ;
    1652    1161   01A40                  ; SIOINBUFA LEEST EEN ASCII BUFFER BINNEN VIA DE SERIELE POORT. DE ROUTINE LAAT
    1653    1162   01A40                  ; TOE OM FOUTIEVE INGAVEN TE VERBETEREN. HIERVOOR KAN DE BACKSPACE TOETS
    1654    1163   01A40                  ; GEBRUIKT WORDEN. HET STARTADRES VAN DE BUFFER IS STRTBUF. DE LAATSE BYTE
    1655    1164   01A40                  ; HEEFT HET ADRES ENDBUF. ALS DE BUFFER TE VOL, OF TE LEEG, GEMAAKT WORDT,
    1656    1165   01A40                  ; LAAT DE CPU EEN BEEP HOREN. DE ROUTINE GEBRUIKT DE ACCU EN R0. CONTROLE
    1657    1166   01A40                  ; KARAKTERS WORDEN NIET VERWERKT. DE ROUTINE GEEFT OOK EEN ECHO NAAR HET
    1658    1167   01A40                  ; SCHERM. ZE GEBRUIKT DE SUBROUTINES INCHAR, OUTCHAR EN ASCCTR. INBUFA DOET
    1659    1168   01A40                  ; OOK DE OMVORMING NAAR ASCII 0 KARAKTERS. Door de waarden van strtbuf en endbuf
    1660    1169   01A40                  ; aan te passen kan de gebruiker zelf de lengte en de plaats van de buffer
    1661    1170   01A40                  ; bepalen.
    1662    1171   01A40                  ;
    1663    1172   01A40                  ; De routine gebruikt de accu, r0 en de psw.
    1664    1173   01A40                  ;
    1665    1174   01A40                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1666    1175   01A40                  
    1667    1176   01A40                  sioinbufa:
    1668    1177   01A40 7854             INBUFA:       MOV    R0,#STRTBUF          ;START ADRES VAN DE BUFFER LADEN
    1669    1178   01A42 121A1E           INBUFA2:      LCALL  INCHAR               ;KARAKTER LEZEN
    1670    1179   01A45 547F                           ANL    A,#07FH              ;KARAKTERS OMVORMEN TOT ASCII 0
    1671    1180   01A47                  ; ALVORENS EEN ECHO NAAR HET SCHERM TE VERSTUREN, MOET NAGEGAAN WORDEN DAT HET
    1672    1181   01A47                  ; BEKOMEN KARAKTER AAN DE TE VERWACHTEN KARAKTERS VOLDOET. DE ENIGE TOEGELATEN
    1673    1182   01A47                  ; CONTROLEKARAKTERS ZIJN 'CR' EN 'BACKSPACE'. VOOR AL DE ANDERE KARAKTERS
    1674    1183   01A47                  ; WORDT EEN BEEP NAAR HET SCHERM GESTUURD. DE CONTROLE WORDT DOOR ASCCTR UIT-
    1675    1184   01A47                  ; GEVOERD.
    1676    1185   01A47 121A92                         LCALL  LOWUPTR              ;WEL EFFE IN CAPS TE ZETTEN
    1677    1186   01A4A B40D02                         CJNE   A,#CR,INBUFA1        ;CR INGEGEVEN?
    1678    1187   01A4D F6                             MOV    @R0,A                ;IN GEHEUGEN ZETTEN
    1679    1188   01A4E 22                             RET                         ;EINDE VAN DE ROUTINE
    1680    1189   01A4F B40813           INBUFA1:      CJNE   A,#BACKSP,INBUFA6    ;NAGAAN BACK SPACE INDRUKKEN
    1681    1190   01A52 B85407                         CJNE   R0,#STRTBUF,INBUFA3  ;STAAT DE BUFFER ONDERAAN,DAN BEEP
    1682    1191   01A55 7407             INBUFA4:      MOV    A,#BEEP
    1683    1192   01A57 1219A7           INBUFA7:      LCALL  OUTCHAR
    1684    1193   01A5A 80E6                           SJMP   INBUFA2              ;NIEUW KARAKTER OPHALEN
    1685    1194   01A5C 18               INBUFA3:      DEC    R0                   ;ENTRY UIT BUFFER HALEN
    1686    1195   01A5D 90196B                         MOV    DPTR,#wissen         ;WIS KARAKTER DATA NAAR SCHERM
    1687    1196   01A60 1219EA                         LCALL  OUTMSGA
    1688    1197   01A63 80DD                           SJMP   INBUFA2              ;WACHT OP VOLGENDE INGAVE
    1689    1198   01A65 121A84           INBUFA6:      LCALL  ASCCTR               ;ALS CARRY DAN NIET GELDIG
    1690    1199   01A68 40EB                           JC     INBUFA4              ;BEEP NAAR SCHERM
    1691    1200   01A6A B87E02                         CJNE   R0,#ENDBUF-1,INBUFA5 ;BUFFER OP HET EINDE DAN ERROR
    1692    1201   01A6D 80E6                           SJMP   INBUFA4              ;BEEP NAAR HET SCHERM
    1693    1202   01A6F F6               INBUFA5:      MOV    @R0,A                ;KARAKTER IN DE BUFFER
    1694    1203   01A70 08                             INC    R0                   ;BUFFER POINTER AANPASSEN
    1695    1204   01A71 80E4                           SJMP   INBUFA7              ;KARAKTER IN BUFFER, VOLGENDE ?
    1696    1205   01A73                  
    1697    1206   01A73                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1698    1207   01A73                  ;
    1699    1208   01A73                  ; BDELETE HAALT ALLE blank KARAKTERS UIT de inputbuffer
    1700    1209   01A73                  ;
    1701    1210   01A73                  ; De routine gebruikt de accu, r0, r1 en de psw.
    1702    1211   01A73                  ;
    1703    1212   01A73                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1704    1213   01A73                  
    1705    1214   01A73 7854             BDELETE:      MOV    R0,#STRTBUF          ;START ADRES IN R0
    1706    1215   01A75 7954                           MOV    R1,#STRTBUF          ;START ADRES IN R1
    1707    1216   01A77 E6               BDELETE1:     MOV    A,@R0                ;LEES KARAKTER
    1708    1217   01A78 B42005                         CJNE   A,#BLANK,BDELETE2    ;KARAKTER GEEN BLANKO,DAN BDELETE2
    1709    1218   01A7B 08               BDELETE3:     INC    R0                   ;VOLGENDE KARAKTER OPHALEN
    1710    1219   01A7C B880F8                         CJNE   R0,#ENDBUF+1,BDELETE1 ;ALS NIET EINDE DAN VERDER
    1711    1220   01A7F 22                             RET                         ;EINDE VAN DE ROUTINE
    1712    1221   01A80 F7               BDELETE2:     MOV    @R1,A                ;KARAKTER NAAR BUFFER STUREN
    1713    1222   01A81 09                             INC    R1
    1714    1223   01A82 80F7                           SJMP   BDELETE3
    1715    1224   01A84                  
    1716    1225   01A84                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1717    1226   01A84                  ;
    1718    1227   01A84                  ; ASCCTR MOET NAGAAN DAT HET KARAKTER IN DE ACCU BIJ DE STANDAARD KARAKTERS
    1719    1228   01A84                  ; HOORT. ENKEL DE KONTROLEKARAKTERS CR EN BP ZIJN TOEGELATEN. DE ACCU EN DE
    1720    1229   01A84                  ; VLAGGEN WORDEN GEBRUIKT. DE KARAKTERS < 020H EN > DAN 07EH WORDEN ALS FOUT
    1721    1230   01A84                  ; AANZIEN.
    1722    1231   01A84                  ;
    1723    1232   01A84                  ; De routine gebruikt de accu en de psw.
    1724    1233   01A84                  ;
    1725    1234   01A84                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1726    1235   01A84                  
    1727    1236   01A84 B42000           ASCCTR:       CJNE   A,#020H,ASCCTR1      ;NAGAAN KARAKTER KLEINER DAN
    1728    1237   01A87 4007             ASCCTR1:      JC     ASCCTR3              ;CARRY, DAN ERROR
    1729    1238   01A89 B47F00                         CJNE   A,#07FH,ASCCTR2      ;GROTER DAN 7EH
    1730    1239   01A8C 5002             ASCCTR2:      JNC    ASCCTR3              ;GEEN CARRY DAN ERROR
    1731    1240   01A8E C3                             CLR    C                    ;AANGEVEN GEEN FOUT
    1732    1241   01A8F 22                             RET
    1733    1242   01A90 D3               ASCCTR3:      SETB   C                    ;AANGEVEN FOUT TOESTAND
    1734    1243   01A91 22                             RET
    1735    1244   01A92                  
    1736    1245   01A92                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1737    1246   01A92                  ;
    1738    1247   01A92                  ; LOWUPTR ZET HET KARAKTER IN DE ACCU OM VAN LOWER NAAR UPPER CASE. DE ROUTINE
    1739    1248   01A92                  ; GEBRUIKT DE VLAGGEN EN DE ACCU. DE HEX WAARDEN 61H TOT EN MET 7AH MOETEN
    1740    1249   01A92                  ; OMGEZET WORDEN NAAR 41H TOT EN MET 5AH. DE ANDERE GETALLEN MOGEN NIET
    1741    1250   01A92                  ; AANGEPAST WORDEN.
    1742    1251   01A92                  ;
    1743    1252   01A92                  ; De routine gebruikt de accu en de psw.
    1744    1253   01A92                  ;
    1745    1254   01A92                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1746    1255   01A92                  
    1747    1256   01A92 B47B00           LOWUPTR:      CJNE   A,#07BH,LOWUPTR1     ;BOVENSTE GRENS
    1748    1257   01A95 5007             LOWUPTR1:     JNC    LOWUPTR2             ;GEEN CARRY DAN GEEN OMZETTING
    1749    1258   01A97 B46100                         CJNE   A,#061H,LOWUPTR3     ;ONDERSTE GRENS NAGAAN
    1750    1259   01A9A 4002             LOWUPTR3:     JC     LOWUPTR2             ;CARRY DAN GEEN OMZETTING
    1751    1260   01A9C 9420                           SUBB   A,#020H              ;OMZETTING
    1752    1261   01A9E 22               LOWUPTR2:     RET                         ;EINDE OMZETTING
    1753    1262   01A9F                  
    1754    1263   01A9F                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1755    1264   01A9F                  ;
    1756    1265   01A9F                  ; BATRANS DOET DE OMZETTING VAN EEN HEX NIBBLE IN DE ACCU NAAR DE PASSENDE
    1757    1266   01A9F                  ; ASCII CODE.
    1758    1267   01A9F                  ;
    1759    1268   01A9F                  ; De routine gebruikt de accu en de psw.
    1760    1269   01A9F                  ;
    1761    1270   01A9F                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1762    1271   01A9F                  
    1763    1272   01A9F B40A00           BATRANS:      CJNE   A,#00AH,BATRANS1     ;NAGAAN 30 OF 37 MOETEN BIJ OPTELLEN
    1764    1273   01AA2 4002             BATRANS1:     JC     BATRANS2             ;CARRY=1 DAN SLECHTS 30
    1765    1274   01AA4 2407                           ADD    A,#007H              ;ANDERS 30+7=37
    1766    1275   01AA6 2430             BATRANS2:     ADD    A,#030H              ;30 BIJ OPTELLEN
    1767    1276   01AA8 22                             RET
    1768    1277   01AA9                  
    1769    1278   01AA9                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1770    1279   01AA9                  ;
    1771    1280   01AA9                  ; ASCBINTRANS ZET HET ASCII KARAKTER IN DE ACCU OM IN EEN BINAIR GETAL. DE
    1772    1281   01AA9                  ; ROUTINE KAN ENKEL DE KARAKTERS TUSSEN 0-9 EN A-F VERWERKEN. IN HET ANDERE
    1773    1282   01AA9                  ; GEVAL WORDT DE CARRY GEZET.
    1774    1283   01AA9                  ;
    1775    1284   01AA9                  ; De routine gebruikt de accu en de psw.
    1776    1285   01AA9                  ;
    1777    1286   01AA9                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1778    1287   01AA9                  
    1779    1288   01AA9 C3               ASCBINTRANS:  CLR    C                    ;CARRY LAAG MAKEN VOOR BEREKENINGEN
    1780    1289   01AAA 9430                           SUBB   A,#030H              ;NAGAAN GETAL BINNEN GRENZEN
    1781    1290   01AAC 4010                           JC     ASCBINTRANS1         ;ALS C=1 DAN FOUT
    1782    1291   01AAE B40A00                         CJNE   A,#00AH,ASCBINTRANS3 ;GETAL TUSSEN 0 EN 9 ?
    1783    1292   01AB1 400A             ASCBINTRANS3: JC     ASCBINTRANS2         ;ALS CARRY DAN ALLES OK
    1784    1293   01AB3 9407                           SUBB   A,#007H              ;VERDER MET DE OMZETTING
    1785    1294   01AB5 4007                           JC     ASCBINTRANS1         ;ALS CARRY DAN ERROR
    1786    1295   01AB7 B41000                         CJNE   A,#010H,ASCBINTRANS4 ;CONTROLE OP TE GROTE GETALLEN
    1787    1296   01ABA B3               ASCBINTRANS4: CPL    C                    ;CARRY COMPLEMENTEREN
    1788    1297   01ABB 4001                           JC     ASCBINTRANS1         ;ALS CARRY DAN FOUT IN HET GETAL
    1789    1298   01ABD C3               ASCBINTRANS2: CLR    C                    ;CARRY LAAG MAKEN
    1790    1299   01ABE 22               ASCBINTRANS1: RET
    1791    1300   01ABF                  
    1792    1301   01ABF                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1793    1302   01ABF                  ;
    1794    1303   01ABF                  ; ASCII1 ZET HET ASCII KARAKTER @R0 OM IN EEN HEX GETAL IN DE ACCU.
    1795    1304   01ABF                  ; DE ROUTINE VERANDERD OOK DE VLAGGEN.
    1796    1305   01ABF                  ;
    1797    1306   01ABF                  ; De routine gebruikt de accu en de psw.
    1798    1307   01ABF                  ;
    1799    1308   01ABF                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1800    1309   01ABF                  
    1801    1310   01ABF E6               ASCII1:       MOV    A,@R0                ;KARAKTER OPHALEN
    1802    1311   01AC0 121AA9                         LCALL  ASCBINTRANS          ;OMZETTING ASCII NAAR BINAIR
    1803    1312   01AC3 22                             RET                         ;EINDE OMZETTING
    1804    1313   01AC4                  
    1805    1314   01AC4                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1806    1315   01AC4                  ;
    1807    1316   01AC4                  ; ASCII2 ZET TWEE ASCII KARAKTERS @R0 EN @(R0+1) OM NAAR EEN HEX KARAKTER
    1808    1317   01AC4                  ; IN DE ACCU. R0 WORDT MET EEN VERHOOGD. R1 WORDT AANGEPAST. ALS OP HET EINDE
    1809    1318   01AC4                  ; VAN DE ROUTINE DE CARRY GESET IS, DAN IS DE OMZETTING NIET MOGELIJK.
    1810    1319   01AC4                  ;
    1811    1320   01AC4                  ; De routine gebruikt de accu, r0, r1 en de psw.
    1812    1321   01AC4                  ;
    1813    1322   01AC4                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1814    1323   01AC4                  
    1815    1324   01AC4 121ABF           ASCII2:       LCALL  ASCII1               ;OMZETTEN
    1816    1325   01AC7 4009                           JC     ASCII21              ;CARRY 1 DAN OMZETTING NIET MOGELIJK
    1817    1326   01AC9 C4                             SWAP   A                    ;NIBBLE VAN PLAATS VERANDEREN
    1818    1327   01ACA F9                             MOV    R1,A                 ;TIJDELIJK WEG STOPPEN
    1819    1328   01ACB 08                             INC    R0                   ;NAAR VOLGENDE KARAKTER WIJZEN
    1820    1329   01ACC 121ABF                         LCALL  ASCII1               ;KARAKTER OMZETTEN
    1821    1330   01ACF 4001                           JC     ASCII21               ;WEG ALS C=1
    1822    1331   01AD1 49                             ORL    A,R1                 ;GETALLEN BIJ ELKAAR VOEGEN
    1823    1332   01AD2 22               ASCII21:      RET
    1824    1333   01AD3                  
    1825    1334   01AD3                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1826    1335   01AD3                  ;
    1827    1336   01AD3                  ; ASCII4 ZET DE 4 ASCII KARAKTERS @R0 TOT @[R0+3] OM IN EEN HEX GETAL IN DE
    1828    1337   01AD3                  ; DATAPOINTER. ALS DE OMZETTING NIET MOGELIJK IS WORDT DE CARRY GEZET.
    1829    1338   01AD3                  ; R0 WORDT MET DRIE VERHOOGD, EN DE ACCU WORDT AANGEPAST,ALSOOK R1. ALS OP HET
    1830    1339   01AD3                  ; EINDE VAN DE ROUTINE DE CARRY GESET IS, DAN WAS EEN OMZETTING NIET MOGELIJK.
    1831    1340   01AD3                  ;
    1832    1341   01AD3                  ; De routine gebruikt de accu, r0, r1 en de psw.
    1833    1342   01AD3                  ;
    1834    1343   01AD3                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1835    1344   01AD3                  
    1836    1345   01AD3 121AC4           ASCII4:       LCALL  ASCII2               ;OMZETTEN EERSTE TWEE ASCII BYTES
    1837    1346   01AD6 400A                           JC     ASCII41              ;IN GEVAL VAN ERROR DAN WEG
    1838    1347   01AD8 F583                           MOV    DPH,A                ;HEX GETAL IN DE DPTRH
    1839    1348   01ADA 08                             INC    R0                   ;WIIJST NU NAAR VOLGENDE GROEP VAN 2
    1840    1349   01ADB 121AC4                         LCALL  ASCII2               ;OMZETTEN VOLGENDE TWEE BYTES
    1841    1350   01ADE 4002                           JC     ASCII41              ;BIJ FOUT DAN WEG
    1842    1351   01AE0 F582                           MOV    DPL,A                ;IN DPTR LADEN
    1843    1352   01AE2 22               ASCII41:      RET
    1844    1353   01AE3                  
    1845    1354   01AE3                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1846    1355   01AE3                  ;
    1847    1356   01AE3                  ; initadc            is een subroutine die de adc klaar zet voor minimalistisch
    1848    1357   01AE3                  ; gebruik De routine zorgt er voor dat de potmeter en de lm335 als analoge inputs
    1849    1358   01AE3                  ; geschakeld worden.
    1850    1359   01AE3                  ;
    1851    1360   01AE3                  ; Gebruikt geen registers
    1852    1361   01AE3                  ;
    1853    1362   01AE3                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1854    1363   01AE3                  
    1855    1364   01AE3 C08F             initadc:      push   syscon0                     ;map saven
    1856    1365   01AE5 758F04                         mov    syscon0,#004h               ;basis pagina selecteren
    1857    1366   01AE8 75D100                         mov    adc_page,#000h              ;pagina 0 selecteren
    1858    1367   01AEB 75CAB0                         mov    adc_globctr,#10110000b      ;adc inschakelen                   MUST!!
    1859    1368   01AEE                                                                   ;klok delen door 32 (750kHz)
    1860    1369   01AEE                                                                   ;10 bit uitkomst
    1861    1370   01AEE 75CE0A                         mov    adc_inpcr0,#00ah            ;sample time verlengen met x klokpulsen
    1862    1371   01AF1                  ; Dit is niet echt nodig, maar hiermee vangen we de hoge impedantie van de potmeter op
    1863    1372   01AF1 75CC80                         mov    adc_prar,#080h              ;arbitration slot parallelle arbiratie activeren MUST!!
    1864    1373   01AF4 75D106                         mov    adc_page,#006h              ;adc page 6 selecteren             MUST!!
    1865    1374   01AF7 75CC01                         mov    adc_crmr1,#001h             ;willen onmiddellijke actie        MUST!!
    1866    1375   01AFA D08F                           pop    syscon0                     ;herstellen syscon
    1867    1376   01AFC 22                             ret
    1868    1377   01AFD                  
    1869    1378   01AFD                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1870    1379   01AFD                  ;
    1871    1380   01AFD                  ; adclm335           is een subroutine die de spanning meet die van de lm335 sensor
    1872    1381   01AFD                  ; komt. De waarde wordt doorgegeven in a en b registers (kanaal 5).
    1873    1382   01AFD                  ;
    1874    1383   01AFD                  ; Gebruikt:
    1875    1384   01AFD                  ;      -accu als 8 msb meting
    1876    1385   01AFD                  ;      -b als 2 lsb meting (links afgelijnd) (b veat verder data van adc_resrxl)
    1877    1386   01AFD                  ;
    1878    1387   01AFD                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1879    1388   01AFD                  
    1880    1389   01AFD C08F             adclm335:     push   syscon0
    1881    1390   01AFF 758F04                         mov    syscon0,#004h               ;map kiezen en vorige bewaren
    1882    1391   01B02 75D106                         mov    adc_page,#006h              ;adc pagina 6 kiezen
    1883    1392   01B05 75CB20                         mov    adc_crpr1,#00100000b        ;kanaal 5 starten
    1884    1393   01B08 75D100                         mov    adc_page,#000h              ;naar pagina 0 schakelen
    1885    1394   01B0B 00               		nop
    1886    1395   01B0C 00               		nop					;anders loopt het mis met het testen van de ready bit
    1887    1396   01B0D E5CB             adclm3351:    mov    a,adc_globstr               ;kijken omvorming klaar
    1888    1397   01B0F 20E0FB                         jb     acc.0,adclm3351
    1889    1398   01B12 75D102                         mov    adc_page,#002h              ;pagina 2 selecteren
    1890    1399   01B15 E5CB                           mov    a,adc_resr0h                ;uitkomst in accu
    1891    1400   01B17 85CAF0                         mov    b,adc_resr0l                ;uitkomst in b
    1892    1401   01B1A D08F                           pop    syscon0
    1893    1402   01B1C 22                             ret
    1894    1403   01B1D                  
    1895    1404   01B1D                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1896    1405   01B1D                  ;
    1897    1406   01B1D                  ; adcpotmeter        is een subroutine die de spanning meet die van de potmeter
    1898    1407   01B1D                  ; komt. De waarde wordt doorgegeven in a en b registers (kanaal 4)
    1899    1408   01B1D                  ;
    1900    1409   01B1D                  ; Gebruikt:
    1901    1410   01B1D                  ;      -accu als 8 msb meting
    1902    1411   01B1D                  ;      -b als 2 lsb meting (links afgelijnd)
    1903    1412   01B1D                  ;
    1904    1413   01B1D                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1905    1414   01B1D                  
    1906    1415   01B1D C08F             adcpotmeter:  push   syscon0
    1907    1416   01B1F 758F04                         mov    syscon0,#004h               ;map kiezen en vorige bewaren
    1908    1417   01B22 75D106                         mov    adc_page,#006h              ;adc pagina 6 kiezen
    1909    1418   01B25 75CB10                         mov    adc_crpr1,#00010000b        ;kanaal 4 starten
    1910    1419   01B28 75D100                         mov    adc_page,#000h              ;naar pagina 0 schakelen
    1911    1420   01B2B 00               		nop
    1912    1421   01B2C 00               		nop					;anders loopt het mis met het testen van de ready bit
    1913    1422   01B2D E5CB             adcpotmeter1: mov    a,adc_globstr               ;kijken omvorming klaar
    1914    1423   01B2F 20E0FB                         jb     acc.0,adcpotmeter1
    1915    1424   01B32 75D102                         mov    adc_page,#002h              ;pagina 2 selecteren
    1916    1425   01B35 E5CB                           mov    a,adc_resr0h                ;uitkomst in accu
    1917    1426   01B37 85CAF0                         mov    b,adc_resr0l                ;uitkomst in b
    1918    1427   01B3A D08F                           pop    syscon0
    1919    1428   01B3C                  
    1920    1429   01B3C                  
    1921    1430   01B3C 22                             ret
    1922    1431   01B3D                  
    1923    1432   01B3D                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1924    1433   01B3D                  ;
    1925    1434   01B3D                  ; Dit is het driver gedeelte met de subroutines voor wiskundige berekeningen.
    1926    1435   01B3D                  ; Het is niet de bedoeling om de meest compacte code te bekomen. De driver zal
    1927    1436   01B3D                  ; ook niet alle gewenste routines bevatten. Hij is geschreven met pedagogische
    1928    1437   01B3D                  ; doelstellingen in het achterhoofd.
    1929    1438   01B3D                  ;
    1930    1439   01B3D                  ; De driver bevat routines voor 8 bit bcd naar hex en hex naar bcd omvorming
    1931    1440   01B3D                  ; LET OP!!!! de getallen moeten in waarde kleiner dan 100d zijn (zowel hex als
    1932    1441   01B3D                  ; bcd)
    1933    1442   01B3D                  ;      8bit hex naar bcd
    1934    1443   01B3D                  ;      8bit bcd naar hex
    1935    1444   01B3D                  ;
    1936    1445   01B3D                  ; De driver bevat routines voor de 4 hoofdbewerkingen op 16 bit getallen:
    1937    1446   01B3D                  ;      16/16 bit met 16 bit uitkomst en 16 bit rest
    1938    1447   01B3D                  ;      16*16 bit met 32 bit uitkomst
    1939    1448   01B3D                  ;      16+16 bit met 24 bit uitkomst
    1940    1449   01B3D                  ;      16-16 bit met 24 bit uitkomst
    1941    1450   01B3D                  ;      16bit hex naar bcd
    1942    1451   01B3D                  ;      16bit bcd naar hex
    1943    1452   01B3D                  ;
    1944    1453   01B3D                  ; De driver bevat routines voor de 4 hoofdbewerkingen op 32 bit getallen:
    1945    1454   01B3D                  ;      32/32 bit met 32 bit uitkomst en 32 bit rest
    1946    1455   01B3D                  ;      32*32 bit met 64 bit uitkomst
    1947    1456   01B3D                  ;      32+32 bit met 40 bit uitkomst
    1948    1457   01B3D                  ;      32-32 bit met 40 bit uitkomst
    1949    1458   01B3D                  ;
    1950    1459   01B3D                  ; de gebruiker moet zorgen dat de berekeningen mogelijk zijn!!!!!!!!!!!!!!!!!!
    1951    1460   01B3D                  ;
    1952    1461   01B3D                  ; De routines gebruiken als input en output de huidige registerbank.
    1953    1462   01B3D                  ;
    1954    1463   01B3D                  ;
    1955    1464   01B3D                  ; WAARSCHUWING!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
    1956    1465   01B3D                  ; DEZE ROUTINES GEBRUIKEN 15 BYTES STACK. ZE WERKEN ENKEL ALS DE STACK NIET DE
    1957    1466   01B3D                  ; ADRESSEN 70-7c GEBRUIKT. ER WORDEN HIER IMMERS DIRECT ADRESSEERBARE REGISTERS
    1958    1467   01B3D                  ; VRIJ GEMAAKT OM IN TE REKENEN.
    1959    1468   01B3D                  ; !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
    1960    1469   01B3D                  ;
    1961    1470   01B3D                  ; geschreven door Roggemans Marc (MGM) op 11/2004 uitvoering 51math0.inc
    1962    1471   01B3D                  ; Aangepast door Roggmans Marc (MGM) op 07/2010 voor xcez
    1963    1472   01B3D                  ;      -routines gebruiken geen MDU!
    1964    1473   01B3D                  ;
    1965    1474   01B3D                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1966    1475   01B3D                  
    1967    1476   01B3D                  ; Hier worden gpr's verbonden met een naam. Ze worden gebruikt door sommige
    1968    1477   01B3D                  ; routines. Omdat ze informatie kunnen bevatten worden ze op de stack gezet.
    1969    1478   01B3D                  
    1970    1479   01B3D                  h0            equ    070h
    1971    1480   01B3D                  h1            equ    071h
    1972    1481   01B3D                  h2            equ    072h
    1973    1482   01B3D                  h3            equ    073h
    1974    1483   01B3D                  h4            equ    074h
    1975    1484   01B3D                  h5            equ    075h
    1976    1485   01B3D                  h6            equ    076h
    1977    1486   01B3D                  h7            equ    077h
    1978    1487   01B3D                  h8            equ    078h
    1979    1488   01B3D                  h9            equ    079h
    1980    1489   01B3D                  h10           equ    07ah
    1981    1490   01B3D                  h11           equ    07bh
    1982    1491   01B3D                  h12           equ    07ch
    1983    1492   01B3D                  
    1984    1493   01B3D                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1985    1494   01B3D                  ;
    1986    1495   01B3D                  ; mul32       is de routine die twee 32 bit getallen zal vermenigvuldigen.
    1987    1496   01B3D                  ; input:      r3,r2,r1,r0 = eerste getal (r3=msb)
    1988    1497   01B3D                  ;             r7,r6,r5,r4 = tweede getal (r7=msb)
    1989    1498   01B3D                  ; output:     r7,r6,r5,r4,r3,r2,r1,r0 met r7=msb
    1990    1499   01B3D                  ;
    1991    1500   01B3D                  ; De routine gebruikt alleen de registers van de huidig geselecteerde bank
    1992    1501   01B3D                  ;
    1993    1502   01B3D                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1994    1503   01B3D                  
    1995    1504   01B3D C0E0             mul32:        push   acc                  ;registers op de stack zetten
    1996    1505   01B3F C0D0                           push   psw
    1997    1506   01B41 C070                           push   h0
    1998    1507   01B43 C071                           push   h1
    1999    1508   01B45 C072                           push   h2
    2000    1509   01B47 C073                           push   h3
    2001    1510   01B49 C074                           push   h4
    2002    1511   01B4B C075                           push   h5
    2003    1512   01B4D C076                           push   h6
    2004    1513   01B4F C077                           push   h7
    2005    1514   01B51 C078                           push   h8
    2006    1515   01B53 C079                           push   h9
    2007    1516   01B55 C07A                           push   h10
    2008    1517   01B57 C07B                           push   h11
    2009    1518   01B59 C07C                           push   h12
    2010    1519   01B5B                  
    2011    1520   01B5B                  ; eerst moeten de hulpregisters klaar gezet worden
    2012    1521   01B5B                  
    2013    1522   01B5B 757000                         mov    h0,#000h
    2014    1523   01B5E 757100                         mov    h1,#000h
    2015    1524   01B61 757200                         mov    h2,#000h
    2016    1525   01B64 757300                         mov    h3,#000h
    2017    1526   01B67 757400                         mov    h4,#000h
    2018    1527   01B6A 757500                         mov    h5,#000h
    2019    1528   01B6D 757600                         mov    h6,#000h
    2020    1529   01B70 757700                         mov    h7,#000h
    2021    1530   01B73 757800                         mov    h8,#000h
    2022    1531   01B76 757900                         mov    h9,#000h
    2023    1532   01B79 757A00                         mov    h10,#000h
    2024    1533   01B7C 757B00                         mov    h11,#000h
    2025    1534   01B7F 757C20                         mov    h12,#32              ;loopcounter
    2026    1535   01B82                  
    2027    1536   01B82                  ; volgende lus moet 32 keer doorlopen worden om de berekening te maken
    2028    1537   01B82                  
    2029    1538   01B82                  ; nu wordt de vermenigvuldiger naar rechts in de carry geshift
    2030    1539   01B82                  
    2031    1540   01B82 EB               mul321:       mov    a,r3
    2032    1541   01B83 13                             rrc    a
    2033    1542   01B84 FB                             mov    r3,a
    2034    1543   01B85 EA                             mov    a,r2
    2035    1544   01B86 13                             rrc    a
    2036    1545   01B87 FA                             mov    r2,a
    2037    1546   01B88 E9                             mov    a,r1
    2038    1547   01B89 13                             rrc    a
    2039    1548   01B8A F9                             mov    r1,a
    2040    1549   01B8B E8                             mov    a,r0
    2041    1550   01B8C 13                             rrc    a
    2042    1551   01B8D F8                             mov    r0,a                 ;32 bit shift klaar
    2043    1552   01B8E                  
    2044    1553   01B8E                  ;als de carry 1 is moet het 64 bit getal h3-r4 opgeteld worden bij h11-h4
    2045    1554   01B8E                  
    2046    1555   01B8E 502C                           jnc    mul322               ;optelling niet nodig
    2047    1556   01B90                  
    2048    1557   01B90                  ; hier staat en 64 bit optelling
    2049    1558   01B90                  
    2050    1559   01B90 EC                             mov    a,r4
    2051    1560   01B91 2574                           add    a,h4
    2052    1561   01B93 F574                           mov    h4,a
    2053    1562   01B95 ED                             mov    a,r5
    2054    1563   01B96 3575                           addc   a,h5
    2055    1564   01B98 F575                           mov    h5,a
    2056    1565   01B9A EE                             mov    a,r6
    2057    1566   01B9B 3576                           addc   a,h6
    2058    1567   01B9D F576                           mov    h6,a
    2059    1568   01B9F EF                             mov    a,r7
    2060    1569   01BA0 3577                           addc   a,h7
    2061    1570   01BA2 F577                           mov    h7,a
    2062    1571   01BA4 E570                           mov    a,h0
    2063    1572   01BA6 3578                           addc   a,h8
    2064    1573   01BA8 F578                           mov    h8,a
    2065    1574   01BAA E571                           mov    a,h1
    2066    1575   01BAC 3579                           addc   a,h9
    2067    1576   01BAE F579                           mov    h9,a
    2068    1577   01BB0 E572                           mov    a,h2
    2069    1578   01BB2 357A                           addc   a,h10
    2070    1579   01BB4 F57A                           mov    h10,a
    2071    1580   01BB6 E573                           mov    a,h3
    2072    1581   01BB8 357B                           addc   a,h11
    2073    1582   01BBA F57B                           mov    h11,a                ;optelling klaar
    2074    1583   01BBC                  
    2075    1584   01BBC                  ; het getal h3-r4 moet met twee vermenigvuldigd worden
    2076    1585   01BBC                  
    2077    1586   01BBC C3               mul322:       clr    c                    ;moet op 0 staan
    2078    1587   01BBD EC                             mov    a,r4
    2079    1588   01BBE 33                             rlc    a
    2080    1589   01BBF FC                             mov    r4,a
    2081    1590   01BC0 ED                             mov    a,r5
    2082    1591   01BC1 33                             rlc    a
    2083    1592   01BC2 FD                             mov    r5,a
    2084    1593   01BC3 EE                             mov    a,r6
    2085    1594   01BC4 33                             rlc    a
    2086    1595   01BC5 FE                             mov    r6,a
    2087    1596   01BC6 EF                             mov    a,r7
    2088    1597   01BC7 33                             rlc    a
    2089    1598   01BC8 FF                             mov    r7,a
    2090    1599   01BC9 E570                           mov    a,h0
    2091    1600   01BCB 33                             rlc    a
    2092    1601   01BCC F570                           mov    h0,a
    2093    1602   01BCE E571                           mov    a,h1
    2094    1603   01BD0 33                             rlc    a
    2095    1604   01BD1 F571                           mov    h1,a
    2096    1605   01BD3 E572                           mov    a,h2
    2097    1606   01BD5 33                             rlc    a
    2098    1607   01BD6 F572                           mov    h2,a
    2099    1608   01BD8 E573                           mov    a,h3
    2100    1609   01BDA 33                             rlc    a
    2101    1610   01BDB F573                           mov    h3,a
    2102    1611   01BDD                  
    2103    1612   01BDD D57CA2                         djnz   h12,mul321           ;herhaal 32 keer
    2104    1613   01BE0                  
    2105    1614   01BE0                  ; de uitkomst moet in de juiste registers komen
    2106    1615   01BE0                  
    2107    1616   01BE0 A874                           mov    r0,h4
    2108    1617   01BE2 A975                           mov    r1,h5
    2109    1618   01BE4 AA76                           mov    r2,h6
    2110    1619   01BE6 AB77                           mov    r3,h7
    2111    1620   01BE8 AC78                           mov    r4,h8
    2112    1621   01BEA AD79                           mov    r5,h9
    2113    1622   01BEC AE7A                           mov    r6,h10
    2114    1623   01BEE AF7B                           mov    r7,h11               ;klaar
    2115    1624   01BF0                  
    2116    1625   01BF0 D07C                           pop    h12                  ;registers herstellen
    2117    1626   01BF2 D07B                           pop    h11
    2118    1627   01BF4 D07A                           pop    h10
    2119    1628   01BF6 D079                           pop    h9
    2120    1629   01BF8 D078                           pop    h8
    2121    1630   01BFA D077                           pop    h7
    2122    1631   01BFC D076                           pop    h6
    2123    1632   01BFE D075                           pop    h5
    2124    1633   01C00 D074                           pop    h4
    2125    1634   01C02 D073                           pop    h3
    2126    1635   01C04 D072                           pop    h2
    2127    1636   01C06 D071                           pop    h1
    2128    1637   01C08 D070                           pop    h0
    2129    1638   01C0A D0D0                           pop    psw
    2130    1639   01C0C D0E0                           pop    acc
    2131    1640   01C0E 22                             ret
    2132    1641   01C0F                  
    2133    1642   01C0F                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2134    1643   01C0F                  ;
    2135    1644   01C0F                  ; mul16       is de routine die twee 16 bit getallen zal vermenigvuldigen.
    2136    1645   01C0F                  ; input:      r1,r0 = eerste getal (r1=msb)
    2137    1646   01C0F                  ;             r3,r2 = tweede getal (r3=msb)
    2138    1647   01C0F                  ; output:     r3,r2,r1,r0 met r3=msb
    2139    1648   01C0F                  ;
    2140    1649   01C0F                  ; De routine gebruikt alleen de registers r3, r2, r1, r0 van de huidige bank
    2141    1650   01C0F                  ;
    2142    1651   01C0F                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2143    1652   01C0F                  
    2144    1653   01C0F C0E0             mul16:        push   acc                  ;registers op de stack zetten
    2145    1654   01C11 C0D0                           push   psw
    2146    1655   01C13 C070                           push   h0
    2147    1656   01C15 C071                           push   h1
    2148    1657   01C17 C072                           push   h2
    2149    1658   01C19 C073                           push   h3
    2150    1659   01C1B C074                           push   h4
    2151    1660   01C1D C075                           push   h5
    2152    1661   01C1F C076                           push   h6
    2153    1662   01C21                  
    2154    1663   01C21                  ; eerst registers laden met startwaarden. h0 en h1 zijn het verlengstuk
    2155    1664   01C21                  ; van r3 en r2. h2, h3, h4, h5 worden gebruikt voor sommatie.
    2156    1665   01C21                  ; h6 is de loopcounter.
    2157    1666   01C21                  
    2158    1667   01C21 757000                         mov    h0,#000h
    2159    1668   01C24 757100                         mov    h1,#000h
    2160    1669   01C27 757200                         mov    h2,#000h
    2161    1670   01C2A 757300                         mov    h3,#000h
    2162    1671   01C2D 757400                         mov    h4,#000h
    2163    1672   01C30 757500                         mov    h5,#000h
    2164    1673   01C33 757610                         mov    h6,#16               ;loopcounter
    2165    1674   01C36                  
    2166    1675   01C36                  ; hier staat de lus die 16 keer doorlopen wordt voor het uitvoeren van de
    2167    1676   01C36                  ; berekening
    2168    1677   01C36                  
    2169    1678   01C36 E9               mul161:       mov    a,r1                 ;getal 1 1*rechts in carry
    2170    1679   01C37 13                             rrc    a
    2171    1680   01C38 F9                             mov    r1,a
    2172    1681   01C39 E8                             mov    a,r0
    2173    1682   01C3A 13                             rrc    a
    2174    1683   01C3B F8                             mov    r0,a                 ;ok
    2175    1684   01C3C                  
    2176    1685   01C3C                  ; als carry 1 dan h1, h0, r3, r2 optellen bij h5, h4, h3, h2
    2177    1686   01C3C                  
    2178    1687   01C3C 5016                           jnc    mul162
    2179    1688   01C3E                  
    2180    1689   01C3E EA                             mov    a,r2
    2181    1690   01C3F 2572                           add    a,h2
    2182    1691   01C41 F572                           mov    h2,a                 ;32 bit som uitvoeren
    2183    1692   01C43 EB                             mov    a,r3
    2184    1693   01C44 3573                           addc   a,h3
    2185    1694   01C46 F573                           mov    h3,a
    2186    1695   01C48 E570                           mov    a,h0
    2187    1696   01C4A 3574                           addc   a,h4
    2188    1697   01C4C F574                           mov    h4,a
    2189    1698   01C4E E571                           mov    a,h1
    2190    1699   01C50 3575                           addc   a,h5
    2191    1700   01C52 F575                           mov    h5,a                 ;klaar
    2192    1701   01C54                  
    2193    1702   01C54                  ; het te vermenigvuldige getal maal 2 (1*links shiften)
    2194    1703   01C54                  
    2195    1704   01C54 C3               mul162:       clr    c
    2196    1705   01C55 EA                             mov    a,r2
    2197    1706   01C56 33                             rlc    a
    2198    1707   01C57 FA                             mov    r2,a                 ;ook 32 bit getal
    2199    1708   01C58 EB                             mov    a,r3
    2200    1709   01C59 33                             rlc    a
    2201    1710   01C5A FB                             mov    r3,a
    2202    1711   01C5B E570                           mov    a,h0
    2203    1712   01C5D 33                             rlc    a
    2204    1713   01C5E F570                           mov    h0,a
    2205    1714   01C60 E571                           mov    a,h1
    2206    1715   01C62 33                             rlc    a
    2207    1716   01C63 F571                           mov    h1,a                 ;klaar
    2208    1717   01C65                  
    2209    1718   01C65 D576CE                         djnz   h6,mul161            ;herhaal 16 keer
    2210    1719   01C68                  
    2211    1720   01C68                  ; de vermenigvuldiging is klaar. Nu uitkomstregisters laden
    2212    1721   01C68                  
    2213    1722   01C68 A872                           mov    r0,h2
    2214    1723   01C6A A973                           mov    r1,h3
    2215    1724   01C6C AA74                           mov    r2,h4
    2216    1725   01C6E AB75                           mov    r3,h5                ;klaar
    2217    1726   01C70                  
    2218    1727   01C70                  
    2219    1728   01C70 D076                           pop    h6                   ;registers herstellen
    2220    1729   01C72 D075                           pop    h5
    2221    1730   01C74 D074                           pop    h4
    2222    1731   01C76 D073                           pop    h3
    2223    1732   01C78 D072                           pop    h2
    2224    1733   01C7A D071                           pop    h1
    2225    1734   01C7C D070                           pop    h0
    2226    1735   01C7E D0D0                           pop    psw
    2227    1736   01C80 D0E0                           pop    acc
    2228    1737   01C82 22                             ret
    2229    1738   01C83                  
    2230    1739   01C83                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2231    1740   01C83                  ;
    2232    1741   01C83                  ; div32       is de routine die twee 32 bit getallen zal delen (eerste/tweede).
    2233    1742   01C83                  ; input:      r3,r2,r1,r0 = eerste getal (r3=msb)
    2234    1743   01C83                  ;             r7,r6,r5,r4 = tweede getal (r7=msb)
    2235    1744   01C83                  ; output:     r7,r6,r5,r4 = quotient (r7=msb)
    2236    1745   01C83                  ;             r3,r2,r1,r0 = rest (r3=msb)
    2237    1746   01C83                  ;             carry=1 bij delen door 0
    2238    1747   01C83                  ;
    2239    1748   01C83                  ; De routine gebruikt alleen de registers van de huidig geselecteerde bank
    2240    1749   01C83                  ;
    2241    1750   01C83                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2242    1751   01C83                  
    2243    1752   01C83 C0E0             div32:        push   acc                  ;registers op de stack zetten
    2244    1753   01C85 C0D0                           push   psw
    2245    1754   01C87 C070                           push   h0
    2246    1755   01C89 C071                           push   h1
    2247    1756   01C8B C072                           push   h2
    2248    1757   01C8D C073                           push   h3
    2249    1758   01C8F C074                           push   h4
    2250    1759   01C91 C075                           push   h5
    2251    1760   01C93 C076                           push   h6
    2252    1761   01C95 C077                           push   h7
    2253    1762   01C97 C078                           push   h8
    2254    1763   01C99 C079                           push   h9
    2255    1764   01C9B C07A                           push   h10
    2256    1765   01C9D C07B                           push   h11
    2257    1766   01C9F C07C                           push   h12
    2258    1767   01CA1                  
    2259    1768   01CA1                  ; eerst alles voorladen
    2260    1769   01CA1                  
    2261    1770   01CA1 757000                         mov    h0,#000h
    2262    1771   01CA4 757100                         mov    h1,#000h
    2263    1772   01CA7 757200                         mov    h2,#000h
    2264    1773   01CAA 757300                         mov    h3,#000h
    2265    1774   01CAD 757400                         mov    h4,#000h
    2266    1775   01CB0 757500                         mov    h5,#000h
    2267    1776   01CB3 757600                         mov    h6,#000h
    2268    1777   01CB6 757700                         mov    h7,#000h
    2269    1778   01CB9 757800                         mov    h8,#000h
    2270    1779   01CBC 757900                         mov    h9,#000h
    2271    1780   01CBF 757A00                         mov    h10,#000h
    2272    1781   01CC2 757B00                         mov    h11,#000h
    2273    1782   01CC5 757C20                         mov    h12,#32              ;loopcounter
    2274    1783   01CC8                  
    2275    1784   01CC8                  ; we gaan het te delen getal in de passende hulpregisters shiften
    2276    1785   01CC8                  
    2277    1786   01CC8                  ; deze lus moet 32 keer heraald worden
    2278    1787   01CC8                  
    2279    1788   01CC8 E8               div321:       mov    a,r0                 ;h3-r0 is te delen getal
    2280    1789   01CC9 33                             rlc    a
    2281    1790   01CCA F8                             mov    r0,a
    2282    1791   01CCB E9                             mov    a,r1
    2283    1792   01CCC 33                             rlc    a
    2284    1793   01CCD F9                             mov    r1,a
    2285    1794   01CCE EA                             mov    a,r2
    2286    1795   01CCF 33                             rlc    a
    2287    1796   01CD0 FA                             mov    r2,a
    2288    1797   01CD1 EB                             mov    a,r3
    2289    1798   01CD2 33                             rlc    a
    2290    1799   01CD3 FB                             mov    r3,a
    2291    1800   01CD4 E570                           mov    a,h0
    2292    1801   01CD6 33                             rlc    a
    2293    1802   01CD7 F570                           mov    h0,a
    2294    1803   01CD9 E571                           mov    a,h1
    2295    1804   01CDB 33                             rlc    a
    2296    1805   01CDC F571                           mov    h1,a
    2297    1806   01CDE E572                           mov    a,h2
    2298    1807   01CE0 33                             rlc    a
    2299    1808   01CE1 F572                           mov    h2,a
    2300    1809   01CE3 E573                           mov    a,h3
    2301    1810   01CE5 33                             rlc    a
    2302    1811   01CE6 F573                           mov    h3,a
    2303    1812   01CE8                  
    2304    1813   01CE8                  ; nu testen of het deeltal in h3-h0 past, tussenuitkomst in h7-h4
    2305    1814   01CE8                  
    2306    1815   01CE8 C3                             clr    c                    ;zit in de weg
    2307    1816   01CE9 E570                           mov    a,h0
    2308    1817   01CEB 9C                             subb   a,r4
    2309    1818   01CEC F574                           mov    h4,a
    2310    1819   01CEE E571                           mov    a,h1
    2311    1820   01CF0 9D                             subb   a,r5
    2312    1821   01CF1 F575                           mov    h5,a
    2313    1822   01CF3 E572                           mov    a,h2
    2314    1823   01CF5 9E                             subb   a,r6
    2315    1824   01CF6 F576                           mov    h6,a
    2316    1825   01CF8 E573                           mov    a,h3
    2317    1826   01CFA 9F                             subb   a,r7
    2318    1827   01CFB F577                           mov    h7,a
    2319    1828   01CFD                  
    2320    1829   01CFD                  ; als er geen carry is, dan is het verschil succesvol, en moeten h3-h0
    2321    1830   01CFD                  ; vervangen worden door h7-h4
    2322    1831   01CFD                  
    2323    1832   01CFD 400C                           jc     div322               ;niet vervangen
    2324    1833   01CFF                  
    2325    1834   01CFF 857470                         mov    h0,h4
    2326    1835   01D02 857571                         mov    h1,h5
    2327    1836   01D05 857672                         mov    h2,h6
    2328    1837   01D08 857773                         mov    h3,h7                ;vervanging klaar
    2329    1838   01D0B                  
    2330    1839   01D0B B3               div322:       cpl    c                    ;dit moet in h11-h8 (uitkomst)
    2331    1840   01D0C E578                           mov    a,h8
    2332    1841   01D0E 33                             rlc    a
    2333    1842   01D0F F578                           mov    h8,a
    2334    1843   01D11 E579                           mov    a,h9
    2335    1844   01D13 33                             rlc    a
    2336    1845   01D14 F579                           mov    h9,a
    2337    1846   01D16 E57A                           mov    a,h10
    2338    1847   01D18 33                             rlc    a
    2339    1848   01D19 F57A                           mov    h10,a
    2340    1849   01D1B E57B                           mov    a,h11
    2341    1850   01D1D 33                             rlc    a
    2342    1851   01D1E F57B                           mov    h11,a                ;qoutient aangepast
    2343    1852   01D20                  
    2344    1853   01D20 D57CA5                         djnz   h12,div321           ;32 keer herhalen
    2345    1854   01D23                  
    2346    1855   01D23                  ; de berekening is klaar. uitkomstregisters nog laden
    2347    1856   01D23                  
    2348    1857   01D23 AC78                           mov    r4,h8
    2349    1858   01D25 AD79                           mov    r5,h9
    2350    1859   01D27 AE7A                           mov    r6,h10
    2351    1860   01D29 AF7B                           mov    r7,h11               ;uitkomst geladen
    2352    1861   01D2B                  
    2353    1862   01D2B A870                           mov    r0,h0                ;rest laden
    2354    1863   01D2D A971                           mov    r1,h1
    2355    1864   01D2F AA72                           mov    r2,h2
    2356    1865   01D31 AB73                           mov    r3,h3
    2357    1866   01D33                  
    2358    1867   01D33 D07C                           pop    h12                  ;registers herstellen
    2359    1868   01D35 D07B                           pop    h11
    2360    1869   01D37 D07A                           pop    h10
    2361    1870   01D39 D079                           pop    h9
    2362    1871   01D3B D078                           pop    h8
    2363    1872   01D3D D077                           pop    h7
    2364    1873   01D3F D076                           pop    h6
    2365    1874   01D41 D075                           pop    h5
    2366    1875   01D43 D074                           pop    h4
    2367    1876   01D45 D073                           pop    h3
    2368    1877   01D47 D072                           pop    h2
    2369    1878   01D49 D071                           pop    h1
    2370    1879   01D4B D070                           pop    h0
    2371    1880   01D4D D0D0                           pop    psw
    2372    1881   01D4F D0E0                           pop    acc
    2373    1882   01D51 22                             ret
    2374    1883   01D52                  
    2375    1884   01D52                  
    2376    1885   01D52                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2377    1886   01D52                  ;
    2378    1887   01D52                  ; div16       is de routine die twee 16 bit getallen zal delen (eerste/tweede).
    2379    1888   01D52                  ; input:      r1,r0 = eerste getal (r1=msb)
    2380    1889   01D52                  ;             r3,r2 = tweede getal (r3=msb)
    2381    1890   01D52                  ; output:     r3,r2 = quotient (r3=msb)
    2382    1891   01D52                  ;             r1,r0 = rest (r1=msb)
    2383    1892   01D52                  ;             carry=1 bij deling door 0
    2384    1893   01D52                  ;
    2385    1894   01D52                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2386    1895   01D52                  
    2387    1896   01D52 C0E0             div16:        push   acc                  ;registers op de stack zetten
    2388    1897   01D54 C0D0                           push   psw
    2389    1898   01D56 C070                           push   h0
    2390    1899   01D58 C071                           push   h1
    2391    1900   01D5A C072                           push   h2
    2392    1901   01D5C C073                           push   h3
    2393    1902   01D5E C074                           push   h4
    2394    1903   01D60 C075                           push   h5
    2395    1904   01D62 C076                           push   h6
    2396    1905   01D64                  
    2397    1906   01D64                  ; registers voorladen
    2398    1907   01D64                  
    2399    1908   01D64 757000                         mov    h0,#000h
    2400    1909   01D67 757100                         mov    h1,#000h
    2401    1910   01D6A 757200                         mov    h2,#000h
    2402    1911   01D6D 757300                         mov    h3,#000h
    2403    1912   01D70 757400                         mov    h4,#000h
    2404    1913   01D73 757500                         mov    h5,#000h
    2405    1914   01D76 757610                         mov    h6,#16               ;loopcounter
    2406    1915   01D79                  
    2407    1916   01D79                  ; eerst te delen getal 1*links shiften in hulpregisters
    2408    1917   01D79                  
    2409    1918   01D79                  ; deze lus moet 16 keer herhaald worden
    2410    1919   01D79                  
    2411    1920   01D79 E8               div161:       mov    a,r0                 ;32 bit shift in h1-r0
    2412    1921   01D7A 33                             rlc    a
    2413    1922   01D7B F8                             mov    r0,a
    2414    1923   01D7C E9                             mov    a,r1
    2415    1924   01D7D 33                             rlc    a
    2416    1925   01D7E F9                             mov    r1,a
    2417    1926   01D7F E570                           mov    a,h0
    2418    1927   01D81 33                             rlc    a
    2419    1928   01D82 F570                           mov    h0,a
    2420    1929   01D84 E571                           mov    a,h1
    2421    1930   01D86 33                             rlc    a
    2422    1931   01D87 F571                           mov    h1,a
    2423    1932   01D89                  
    2424    1933   01D89                  ; nagaan of in h1-h0 de deler past r3-r2. h3-h2 wordt gebruikt voor
    2425    1934   01D89                  ; het tussenresultaat.
    2426    1935   01D89                  
    2427    1936   01D89 C3                             clr    c
    2428    1937   01D8A E570                           mov    a,h0
    2429    1938   01D8C 9A                             subb   a,r2
    2430    1939   01D8D F572                           mov    h2,a
    2431    1940   01D8F E571                           mov    a,h1
    2432    1941   01D91 9B                             subb   a,r3
    2433    1942   01D92 F573                           mov    h3,a
    2434    1943   01D94                  
    2435    1944   01D94 4006                           jc     div162               ;als carry dan h1-h0 niet vervangen
    2436    1945   01D96                                                            ;door h3,h2
    2437    1946   01D96 857270                         mov    h0,h2
    2438    1947   01D99 857371                         mov    h1,h3                ;vervanging klaar
    2439    1948   01D9C                  
    2440    1949   01D9C                  ; uitkomst moet aangepast worden
    2441    1950   01D9C                  
    2442    1951   01D9C B3               div162:       cpl    c                    ;truuk
    2443    1952   01D9D E574                           mov    a,h4
    2444    1953   01D9F 33                             rlc    a
    2445    1954   01DA0 F574                           mov    h4,a
    2446    1955   01DA2 E575                           mov    a,h5
    2447    1956   01DA4 33                             rlc    a
    2448    1957   01DA5 F575                           mov    h5,a
    2449    1958   01DA7 D576CF                         djnz   h6,div161            ;16 keer herhalen
    2450    1959   01DAA                  
    2451    1960   01DAA                  ; de berekening is klaar. uitkomsten in passende registers
    2452    1961   01DAA                  
    2453    1962   01DAA AA74                           mov    r2,h4                ;quotient
    2454    1963   01DAC AB75                           mov    r3,h5
    2455    1964   01DAE                  
    2456    1965   01DAE A870                           mov    r0,h0                ;rest
    2457    1966   01DB0 A971                           mov    r1,h1
    2458    1967   01DB2                  
    2459    1968   01DB2 D076                           pop    h6                   ;registers herstellen
    2460    1969   01DB4 D075                           pop    h5
    2461    1970   01DB6 D074                           pop    h4
    2462    1971   01DB8 D073                           pop    h3
    2463    1972   01DBA D072                           pop    h2
    2464    1973   01DBC D071                           pop    h1
    2465    1974   01DBE D070                           pop    h0
    2466    1975   01DC0 D0D0                           pop    psw
    2467    1976   01DC2 D0E0                           pop    acc
    2468    1977   01DC4 22                             ret
    2469    1978   01DC5                  
    2470    1979   01DC5                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2471    1980   01DC5                  ;
    2472    1981   01DC5                  ; add32       zal twee 32 bit getallen optellen en een 40 bit uitkomst.
    2473    1982   01DC5                  ;
    2474    1983   01DC5                  ; input:      r3,r2,r1,r0 = eerste getal (r3=msb)
    2475    1984   01DC5                  ;             r7,r6,r5,r4 = tweede getal (r7=msb)
    2476    1985   01DC5                  ; output:     r4,r3,r2,r1,r0 (r4=msb)
    2477    1986   01DC5                  ;
    2478    1987   01DC5                  ; r4,r3,r2,r1,r0 worden aangepast
    2479    1988   01DC5                  ;
    2480    1989   01DC5                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2481    1990   01DC5                  
    2482    1991   01DC5 C0E0             add32:        push   acc                  ;registers op de stack zetten
    2483    1992   01DC7 C0D0                           push   psw
    2484    1993   01DC9 E8                             mov    a,r0                 ;eerste 8 bit
    2485    1994   01DCA 2C                             add    a,r4
    2486    1995   01DCB F8                             mov    r0,a                 ;klaar
    2487    1996   01DCC E9                             mov    a,r1                 ;volgende 8 bit
    2488    1997   01DCD 3D                             addc   a,r5
    2489    1998   01DCE F9                             mov    r1,a                 ;klaar
    2490    1999   01DCF EA                             mov    a,r2                 ;volgende 8 bit
    2491    2000   01DD0 3E                             addc   a,r6
    2492    2001   01DD1 FA                             mov    r2,a                 ;klaar
    2493    2002   01DD2 EB                             mov    a,r3                 ;laatste 8 bit
    2494    2003   01DD3 3F                             addc   a,r7
    2495    2004   01DD4 FB                             mov    r3,a                 ;32 bit klaar
    2496    2005   01DD5 7400                           mov    a,#000h
    2497    2006   01DD7 3400                           addc   a,#000h              ;carry verrekenen
    2498    2007   01DD9 FC                             mov    r4,a
    2499    2008   01DDA D0D0                           pop    psw                  ;registers herstellen
    2500    2009   01DDC D0E0                           pop    acc
    2501    2010   01DDE 22                             ret
    2502    2011   01DDF                  
    2503    2012   01DDF                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2504    2013   01DDF                  ;
    2505    2014   01DDF                  ; add16       zal twee 16 bit getallen optellen en een 24 bit uitkomst.
    2506    2015   01DDF                  ;
    2507    2016   01DDF                  ; input:      r1,r0 = eerste getal (r1=msb)
    2508    2017   01DDF                  ;             r3,r2 = tweede getal (r3=msb)
    2509    2018   01DDF                  ; output:     r2,r1,r0 (r2=msb)
    2510    2019   01DDF                  ;
    2511    2020   01DDF                  ; r3,r2,r1,r0 worden aangepast
    2512    2021   01DDF                  ;
    2513    2022   01DDF                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2514    2023   01DDF                  
    2515    2024   01DDF C0E0             add16:        push   acc                  ;geen registers gebruiken behalve rx
    2516    2025   01DE1 C0D0                           push   psw
    2517    2026   01DE3 E8                             mov    a,r0                 ;starten met de optelling
    2518    2027   01DE4 2A                             add    a,r2                 ;8 bit klaar
    2519    2028   01DE5 F8                             mov    r0,a                 ;uitkomst wegschrijven
    2520    2029   01DE6 E9                             mov    a,r1                 ;volgende 8 bit
    2521    2030   01DE7 3B                             addc   a,r3                 ;16 bit klaar
    2522    2031   01DE8 F9                             mov    r1,a                 ;uitkomst weggeschreven
    2523    2032   01DE9 7400                           mov    a,#000h              ;carry verrekenen
    2524    2033   01DEB 3400                           addc   a,#000h
    2525    2034   01DED FA                             mov    r2,a                 ;24 bit klaar
    2526    2035   01DEE D0D0                           pop    psw                  ;registers herstellen
    2527    2036   01DF0 D0E0                           pop    acc
    2528    2037   01DF2 22                             ret
    2529    2038   01DF3                  
    2530    2039   01DF3                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2531    2040   01DF3                  ;
    2532    2041   01DF3                  ; sub32       zal het verschil berekenen van 2 32 bit getallen. De uitkomst is
    2533    2042   01DF3                  ;             40 bit groot. (eerste -tweede)
    2534    2043   01DF3                  ; input:      r3,r2,r1,r0 = eerste getal (r3=msb)
    2535    2044   01DF3                  ;             r7,r6,r5,r4 = tweede getal (r7=msb)
    2536    2045   01DF3                  ; output:     r4,r3,r2,r1,r0 (r4=msb)
    2537    2046   01DF3                  ;
    2538    2047   01DF3                  ; r4,r3,r2,r1,r0 worden aangepast
    2539    2048   01DF3                  ;
    2540    2049   01DF3                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2541    2050   01DF3                  
    2542    2051   01DF3 C0E0             sub32:        push   acc                  ;registers bewaren
    2543    2052   01DF5 C0D0                           push   psw                  ;ook de vlaggen
    2544    2053   01DF7 C3                             clr    c                    ;zit nog effe in de weg
    2545    2054   01DF8 E8                             mov    a,r0                 ;eerste 8 bit
    2546    2055   01DF9 9C                             subb   a,r4
    2547    2056   01DFA F8                             mov    r0,a
    2548    2057   01DFB E9                             mov    a,r1                 ;tweede 8 bit
    2549    2058   01DFC 9D                             subb   a,r5
    2550    2059   01DFD F9                             mov    r1,a
    2551    2060   01DFE EA                             mov    a,r2                 ;volgende 8 bit
    2552    2061   01DFF 9E                             subb   a,r6
    2553    2062   01E00 FA                             mov    r2,a
    2554    2063   01E01 EB                             mov    a,r3                 ;laatste 8 bit
    2555    2064   01E02 9F                             subb   a,r7
    2556    2065   01E03 FB                             mov    r3,a
    2557    2066   01E04 7400                           mov    a,#000h              ;nu nog de carry
    2558    2067   01E06 9400                           subb   a,#000h
    2559    2068   01E08 FC                             mov    r4,a                 ;40 bit klaar
    2560    2069   01E09 D0D0                           pop    psw                  ;registers herstellen
    2561    2070   01E0B D0E0                           pop    acc
    2562    2071   01E0D 22                             ret
    2563    2072   01E0E                  
    2564    2073   01E0E                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2565    2074   01E0E                  ;
    2566    2075   01E0E                  ; sub16       zal het verschil berekenen van 2 16 bit getallen. De uitkomst is
    2567    2076   01E0E                  ;             24 bit groot. (eerste - tweede)
    2568    2077   01E0E                  ; input:      r1,r0 = eerste getal (r1=msb)
    2569    2078   01E0E                  ;             r3,r2 = tweede getal (r3=msb)
    2570    2079   01E0E                  ; output:     r2,r1,r0 (r2=msb)
    2571    2080   01E0E                  ;
    2572    2081   01E0E                  ; r3,r2,r1,r0 worden aangepast
    2573    2082   01E0E                  ;
    2574    2083   01E0E                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2575    2084   01E0E                  
    2576    2085   01E0E C0E0             sub16:        push   acc                  ;registers bewaren
    2577    2086   01E10 C0D0                           push   psw
    2578    2087   01E12 C3                             clr    c                    ;mag nog niet meespelen
    2579    2088   01E13 E8                             mov    a,r0                 ;eerste 8 bit verschil
    2580    2089   01E14 9A                             subb   a,r2
    2581    2090   01E15 F8                             mov    r0,a                 ;klaar
    2582    2091   01E16 E9                             mov    a,r1
    2583    2092   01E17 9B                             subb   a,r3                 ;16 bit klaar
    2584    2093   01E18 F9                             mov    r1,a
    2585    2094   01E19 7400                           mov    a,#000h
    2586    2095   01E1B 9400                           subb   a,#000h              ;eventuele carry verrekenen
    2587    2096   01E1D FA                             mov    r2,a                 ;24 bit klaar
    2588    2097   01E1E D0D0                           pop    psw                  ;registers herstellen
    2589    2098   01E20 D0E0                           pop    acc
    2590    2099   01E22 22                             ret
    2591    2100   01E23                  
    2592    2101   01E23                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2593    2102   01E23                  ;
    2594    2103   01E23                  ; hexbcd16    zet een 16 bit hex getal om in een 24 bit bcd getal
    2595    2104   01E23                  ; input       r1,r0 = 16 bit hex getal (r1=msb)
    2596    2105   01E23                  ; output      r2,r1,r0 =24 bit bcd getal (r2=msb)
    2597    2106   01E23                  ;
    2598    2107   01E23                  ; de routine gebruikt alleen de registers r3,r2,r1,r0 van de huidige bank
    2599    2108   01E23                  ;
    2600    2109   01E23                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2601    2110   01E23                  
    2602    2111   01E23 C0E0             hexbcd16:     push   acc                  ;registers effe bewaren op de stack
    2603    2112   01E25 C0D0                           push   psw
    2604    2113   01E27                  
    2605    2114   01E27 C077                           push   h7                   ;nodig
    2606    2115   01E29 C078                           push   h8
    2607    2116   01E2B                  
    2608    2117   01E2B C079                           push   h9                   ;ook
    2609    2118   01E2D                  
    2610    2119   01E2D 757905                         mov    h9,#005h             ;loopcounter
    2611    2120   01E30                  
    2612    2121   01E30 7B00             hexbcd161:    mov    r3,#000h
    2613    2122   01E32 7A0A                           mov    r2,#00ah             ;hierdoor delen we
    2614    2123   01E34 121D52                         lcall  div16                ;deling uitvoeren
    2615    2124   01E37 E8                             mov    a,r0                 ;rest
    2616    2125   01E38 C0E0                           push   acc                  ;op stack zetten
    2617    2126   01E3A EA                             mov    a,r2
    2618    2127   01E3B F8                             mov    r0,a
    2619    2128   01E3C EB                             mov    a,r3
    2620    2129   01E3D F9                             mov    r1,a                 ;uitkomst terug delen
    2621    2130   01E3E D579EF                         djnz   h9,hexbcd161
    2622    2131   01E41                  
    2623    2132   01E41 D0E0                           pop    acc                  ;hoogste bits van de stack
    2624    2133   01E43 FA                             mov    r2,a                 ;klaar
    2625    2134   01E44 D0E0                           pop    acc
    2626    2135   01E46 C4                             swap   a
    2627    2136   01E47 F579                           mov    h9,a
    2628    2137   01E49 D0E0                           pop    acc
    2629    2138   01E4B 2579                           add    a,h9
    2630    2139   01E4D F9                             mov    r1,a                 ;volgende 8 klaar
    2631    2140   01E4E D0E0                           pop    acc
    2632    2141   01E50 C4                             swap   a
    2633    2142   01E51 F579                           mov    h9,a
    2634    2143   01E53 D0E0                           pop    acc
    2635    2144   01E55 2579                           add    a,h9
    2636    2145   01E57 F8                             mov    r0,a                 ;klaar
    2637    2146   01E58                  
    2638    2147   01E58 D079                           pop    h9                   ;was naar de knoppen
    2639    2148   01E5A                  
    2640    2149   01E5A D078                           pop    h8                   ;gebruikt
    2641    2150   01E5C D077                           pop    h7
    2642    2151   01E5E                  
    2643    2152   01E5E D0D0                           pop    psw                  ;registers herstellen
    2644    2153   01E60 D0E0                           pop    acc
    2645    2154   01E62 22                             ret
    2646    2155   01E63                  
    2647    2156   01E63                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2648    2157   01E63                  ;
    2649    2158   01E63                  ; hexbcd8     zet een 8 bit hex getal om in een 8 bit bcd getal
    2650    2159   01E63                  ; input       a (maximale waarde = 63h)
    2651    2160   01E63                  ; output      a
    2652    2161   01E63                  ;
    2653    2162   01E63                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2654    2163   01E63                  
    2655    2164   01E63 C0D0             hexbcd8:      push   psw                  ;registers op stack zetten
    2656    2165   01E65 C0F0                           push   b
    2657    2166   01E67 75F00A                         mov    b,#00ah              ;hierdoor delen
    2658    2167   01E6A 84                             div    ab                   ;in accu qoutient in b rest
    2659    2168   01E6B C4                             swap   a
    2660    2169   01E6C 25F0                           add    a,b                  ;bcd getal klaar
    2661    2170   01E6E D0F0                           pop    b
    2662    2171   01E70 D0D0                           pop    psw
    2663    2172   01E72 22                             ret
    2664    2173   01E73                  
    2665    2174   01E73                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2666    2175   01E73                  ;
    2667    2176   01E73                  ; bcdhex16    zal een 16 bit bcd getal omzetten naar een hex getal.
    2668    2177   01E73                  ; input:       r1,r0 = 16 bit bcd getal (r1=msb)
    2669    2178   01E73                  ; output:      r1,r0 = 16 bit hex getal (r1=msb)
    2670    2179   01E73                  ;
    2671    2180   01E73                  ; de routine gebruikt r1,r0 van de huidige bank
    2672    2181   01E73                  ;
    2673    2182   01E73                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2674    2183   01E73                  
    2675    2184   01E73 C0F0             bcdhex16:     push   b                    ;hebben we nodig
    2676    2185   01E75 C0E0                           push   acc
    2677    2186   01E77 C0D0                           push   psw
    2678    2187   01E79                  
    2679    2188   01E79 E8                             mov    a,r0
    2680    2189   01E7A 540F                           anl    a,#00fh              ;eenheden
    2681    2190   01E7C C0E0                           push   acc                  ;effe bewaren
    2682    2191   01E7E                  
    2683    2192   01E7E E8                             mov    a,r0
    2684    2193   01E7F C4                             swap   a
    2685    2194   01E80 540F                           anl    a,#00fh              ;tientallen
    2686    2195   01E82 75F00A                         mov    b,#00ah              ;waarde berekenen
    2687    2196   01E85 A4                             mul    ab                   ;klaar
    2688    2197   01E86 D0F0                           pop    b                    ;truukje
    2689    2198   01E88 25F0                           add    a,b                  ;a is lage deel hex getal
    2690    2199   01E8A C0E0                           push   acc                  ;straks nodig
    2691    2200   01E8C                  
    2692    2201   01E8C E9                             mov    a,r1                 ;hoge deel
    2693    2202   01E8D 54F0                           anl    a,#0f0h
    2694    2203   01E8F C4                             swap   a
    2695    2204   01E90 C0E0                           push   acc                  ;straks nodig
    2696    2205   01E92                  
    2697    2206   01E92 E9                             mov    a,r1
    2698    2207   01E93 540F                           anl    a,#00fh              ;gaan we verder bewerken
    2699    2208   01E95 75F064                         mov    b,#100               ;waarde uitrekenen
    2700    2209   01E98 A4                             mul    ab
    2701    2210   01E99 A9F0                           mov    r1,b
    2702    2211   01E9B F8                             mov    r0,a
    2703    2212   01E9C                  
    2704    2213   01E9C D0E0                           pop    acc
    2705    2214   01E9E 75F00A                         mov    b,#10
    2706    2215   01EA1 A4                             mul    ab                   ;kan nog in a
    2707    2216   01EA2 75F064                         mov    b,#100               ;*10*100=*1000
    2708    2217   01EA5 A4                             mul    ab
    2709    2218   01EA6 28                             add    a,r0
    2710    2219   01EA7 F8                             mov    r0,a
    2711    2220   01EA8 E9                             mov    a,r1
    2712    2221   01EA9 35F0                           addc   a,b
    2713    2222   01EAB F9                             mov    r1,a
    2714    2223   01EAC                  
    2715    2224   01EAC D0E0                           pop    acc
    2716    2225   01EAE 28                             add    a,r0
    2717    2226   01EAF F8                             mov    r0,a
    2718    2227   01EB0 7400                           mov    a,#000h
    2719    2228   01EB2 39                             addc   a,r1
    2720    2229   01EB3 F9                             mov    r1,a                 ;klaar
    2721    2230   01EB4                  
    2722    2231   01EB4 D0D0                           pop    psw
    2723    2232   01EB6 D0E0                           pop    acc
    2724    2233   01EB8 D0F0                           pop    b
    2725    2234   01EBA 22                             ret
    2726    2235   01EBB                  
    2727    2236   01EBB                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2728    2237   01EBB                  ;
    2729    2238   01EBB                  ; bcdhex8     zal een 8 bit bcd getal omzetten naar een hex getal.
    2730    2239   01EBB                  ; input:      a (maximale waarde 99h)
    2731    2240   01EBB                  ; output:     a
    2732    2241   01EBB                  ;
    2733    2242   01EBB                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2734    2243   01EBB                  
    2735    2244   01EBB C0D0             bcdhex8:      push   psw                  ;registers op de stack zetten
    2736    2245   01EBD C0F0                           push   b
    2737    2246   01EBF C070                           push   h0
    2738    2247   01EC1 F570                           mov    h0,a                 ;effe bewaren
    2739    2248   01EC3 53700F                         anl    h0,#00fh             ;alleen 4 laagste bits
    2740    2249   01EC6 54F0                           anl    a,#0f0h              ;hier alleen 4 hoogste bits
    2741    2250   01EC8 C4                             swap   a
    2742    2251   01EC9 75F00A                         mov    b,#00ah              ;berekenen waarde 4 hoogste bits
    2743    2252   01ECC A4                             mul    ab
    2744    2253   01ECD 2570                           add    a,h0                 ;eenheden bijtellen
    2745    2254   01ECF D070                           pop    h0
    2746    2255   01ED1 D0F0                           pop    b
    2747    2256   01ED3 D0D0                           pop    psw
    2748    2257   01ED5 22                             ret
    2749    2258   01ED6                  
    2750    2259   01ED6                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2751    2260   01ED6                  ;
    2752    2261   01ED6                  ; xcsw2xtal          schakeld overvan de inwendige oscillator naar een extern kristal.
    2753    2262   01ED6                  ;
    2754    2263   01ED6                  ; Gebruikt geen registers
    2755    2264   01ED6                  ;
    2756    2265   01ED6                  ; Originele auteur: Danny Pawels (dp)
    2757    2266   01ED6                  ;
    2758    2267   01ED6                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2759    2268   01ED6                  
    2760    2269   01ED6                  
    2761    2270   01ED6 C083             XCsw2xtal:  push  dph
    2762    2271   01ED8 C082                         push  dpl
    2763    2272   01EDA C0D0                         push  psw
    2764    2273   01EDC C08F                         push  syscon0
    2765    2274   01EDE C0B2                         push  port_page
    2766    2275   01EE0 C0BF                         push  scu_page
    2767    2276   01EE2                  
    2768    2277   01EE2 758F04                       mov   syscon0,#04h            ;selecteer RMAP0
    2769    2278   01EE5 75BF01                       mov   scu_page,#1             ;page 1 van SCU selecteren
    2770    2279   01EE8                  
    2771    2280   01EE8 43B708                       orl   pll_con,#00001000b      ;VCOBYP=1  bypass de PLL
    2772    2281   01EEB                                                            ;freq= VCO-free running =5MHz...20MHz?
    2773    2282   01EEB 43B704                       orl   pll_con,#00000100b      ;OSCDISC=1 disconnect osc. en PLL
    2774    2283   01EEE 53B6F7                       anl   osc_con,#11110111b      ;XPD=0  externe osc. power-up
    2775    2284   01EF1 43B604                       orl   osc_con,#00000100b      ;OSCSS=1 externe oscillator selecteren
    2776    2285   01EF4                  
    2777    2286   01EF4 90F000                       mov   dptr,#0f000h            ;wacht tot externe osc stabiel is...
    2778    2287   01EF7 A3               XCsw2xtal0: inc   dptr
    2779    2288   01EF8 E582                         mov   a,dpl
    2780    2289   01EFA 4583                         orl   a,dph
    2781    2290   01EFC 70F9                         jnz   XCsw2xtal0
    2782    2291   01EFE                  
    2783    2292   01EFE 43B602           XCsw2xtal1: orl   osc_con,#00000010b      ;ORDRES=1 osc run detectie starten
    2784    2293   01F01                  
    2785    2294   01F01                  ;wacht,...dit kan lang duren... tot >2048 VCO cycli...
    2786    2295   01F01 E5B6             XCsw2xtal2: mov   a,osc_con               ;check OSCR en ORDRES bits (2 LSB's osc_con)
    2787    2296   01F03 20E1FB                       jb    acc.1,XCsw2xtal2        ;Osc.RunDETect klaar? ='0'
    2788    2297   01F06                  ;Oscillator run detectie is klaar...
    2789    2298   01F06 30E0F5                       jnb    acc.0,XCsw2xtal1       ;OSCR=1? ja, dan oscillator running...
    2790    2299   01F09                  
    2791    2300   01F09                  
    2792    2301   01F09 E5B7                         mov   a,pll_con               ;lees pll_con
    2793    2302   01F0B 540F                         anl   a,#0fh                  ;maskeer onderste bits
    2794    2303   01F0D 44A0                         orl   a,#10100000b            ;stel NDIV in op 1010=waarde 24
    2795    2304   01F0F                  ;OPGELET: het password moet worden gegeven, dan kan er gedurende 32cclk cycli naar
    2796    2305   01F0F                  ;beveiligde locaties worden geschreven zoals NDIV en KDIV van de PLL, de watchdog
    2797    2306   01F0F                  ;enable bit WDTEN en de power-down en slow down enable bits PD en SD !!!!
    2798    2307   01F0F 75BB98                       mov   passwd,#98h             ;het is nodig het password in te stellen!!!
    2799    2308   01F12                                                            ;bij aanpassing van de NDIV van de PLL
    2800    2309   01F12 F5B7                         mov   pll_con,a               ;N=24 is nodig bij een 8MHz xtal
    2801    2310   01F14 53B7FB                       anl   pll_con,#11111011b      ;OSCDISC=0 connect osc en PLL
    2802    2311   01F17 43B702                       orl   pll_con,#00000010b      ;RESLD=1 restart PLL lock detection
    2803    2312   01F1A                  
    2804    2313   01F1A E5B7             XCsw2xtal3: mov   a,pll_con               ;check de LOCK bit (lsb van dit register)
    2805    2314   01F1C 20E0FB                       jb    acc.0,XCsw2xtal3        ;ga pas verder als PLL gelocked is op osc.
    2806    2315   01F1F                  
    2807    2316   01F1F 53B7F7                       anl   pll_con,#11110111b      ;VCOBYP=0 fsys is PLL gelockte frequentie.
    2808    2317   01F22 43B610                       orl   osc_con,#00010000b      ;OSCPD=1 interne osc. power-down
    2809    2318   01F25                  
    2810    2319   01F25 D0BF                         pop   scu_page                ;herstel controller status
    2811    2320   01F27 D0B2                         pop   port_page
    2812    2321   01F29 D08F                         pop   syscon0
    2813    2322   01F2B D0D0                         pop   psw
    2814    2323   01F2D D082                         pop   dpl
    2815    2324   01F2F D083                         pop   dph
    2816    2325   01F31 22                           ret
    2817    2326   01F32                  
    2818    2327   01F32                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2819    2328   01F32                  ;
    2820    2329   01F32                  ; mapregs	selecteer de SFR's in de mapped area
    2821    2330   01F32                  ;
    2822    2331   01F32                  ;
    2823    2332   01F32                  ; Past syscon SFR aan
    2824    2333   01F32                  ;
    2825    2334   01F32                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2826    2335   01F32                  
    2827    2336   01F32 438F01           mapregs:	orl   syscon0,#00000001b	;set bit rmap
    2828    2337   01F35 22               		ret
    2829    2338   01F36                  
    2830    2339   01F36                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2831    2340   01F36                  ;
    2832    2341   01F36                  ; nomapregs	selecteer de SFR's in de non-mapped area
    2833    2342   01F36                  ;
    2834    2343   01F36                  ; Past syscon SFR aan
    2835    2344   01F36                  ;
    2836    2345   01F36                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2837    2346   01F36                  
    2838    2347   01F36 538FFE           nomapregs:  anl    syscon0,#11111110b	;clear bit rmap
    2839    2348   01F39 22               		ret
    2840    2349   01F3A                  
    2841    2350   01F3A                  ;*******************************************************************************
    2842    2351   01F3A                  ;
    2843    2352   01F3A                  ; These are the register declarations for the XC888 microcontroller from
    2844    2353   01F3A                  ; Infineon.
    2845    2354   01F3A                  ;
    2846    2355   01F3A                  ;*******************************************************************************
    2847    2356   01F3A                  
    2848    2357   01F3A                  ;*******************************************************************************
    2849    2358   01F3A                  ;
    2850    2359   01F3A                  ; CPU registers are accessible independend of paging and mapping
    2851    2360   01F3A                  ; (always accessible)
    2852    2361   01F3A                  ;
    2853    2362   01F3A                  ;*******************************************************************************
    2854    2363   01F3A                  
    2855    2364   01F3A                  sp            data   081h          ;stack pointer                     reset=007h
    2856    2365   01F3A                  dpl           data   082h          ;datapointer low register          reset=000h
    2857    2366   01F3A                  dph           data   083h          ;datapointer high register         reset=000h
    2858    2367   01F3A                  pcon          data   087h          ;power control                     reset=000h
    2859    2368   01F3A                  tcon          data   088h          ;timer 0-1 control                 reset=000h
    2860    2369   01F3A                  ;tcon is bit addressable
    2861    2370   01F3A                         tf1    bit    08fh
    2862    2371   01F3A                         tr1    bit    08eh
    2863    2372   01F3A                         tf0    bit    08dh
    2864    2373   01F3A                         tr0    bit    08ch
    2865    2374   01F3A                         ie1    bit    08bh
    2866    2375   01F3A                         it1    bit    08ah
    2867    2376   01F3A                         ie0    bit    089h
    2868    2377   01F3A                         it0    bit    088h
    2869    2378   01F3A                  
    2870    2379   01F3A                  tmod          data   089h          ;timer 0-1 mode                    reset=000h
    2871    2380   01F3A                  tl0           data   08ah          ;timer 0 low                       reset=000h
    2872    2381   01F3A                  tl1           data   08bh          ;timer 1 low                       reset=000h
    2873    2382   01F3A                  th0           data   08ch          ;timer 0 high                      reset=000h
    2874    2383   01F3A                  th1           data   08dh          ;timer 1 high                      reset=000h
    2875    2384   01F3A                  
    2876    2385   01F3A                  syscon0       data   08fh          ;system control register 0         reset=004h
    2877    2386   01F3A                  scon          data   098h          ;serial channel 0 control          reset=000h
    2878    2387   01F3A                  ;scon is bit addressable
    2879    2388   01F3A                         sm0    bit    09fh
    2880    2389   01F3A                         sm1    bit    09eh
    2881    2390   01F3A                         sm2    bit    09dh
    2882    2391   01F3A                         ren    bit    09ch
    2883    2392   01F3A                         tb8    bit    09bh
    2884    2393   01F3A                         rb8    bit    09ah
    2885    2394   01F3A                         ti     bit    099h
    2886    2395   01F3A                         ri     bit    098h
    2887    2396   01F3A                  
    2888    2397   01F3A                  sbuf          data   099h          ;serial data buffer channel 0
    2889    2398   01F3A                  eo            data   0a2h          ;extended operation                reset=000h
    2890    2399   01F3A                  ien0          data   0a8h          ;interrupt enable 0                reset=000h
    2891    2400   01F3A                  ;ien0 is bit addressable
    2892    2401   01F3A                         ea     bit    0afh
    2893    2402   01F3A                                                     ;bit not implemented
    2894    2403   01F3A                         et2    bit    0adh
    2895    2404   01F3A                         es     bit    0ach
    2896    2405   01F3A                         et1    bit    0abh
    2897    2406   01F3A                         ex1    bit    0aah
    2898    2407   01F3A                         et0    bit    0a9h
    2899    2408   01F3A                         ex0    bit    0a8h
    2900    2409   01F3A                  
    2901    2410   01F3A                  ip            data   0b8h          ;interrupt priotity                reset=000h
    2902    2411   01F3A                  ;ip is bit addressable
    2903    2412   01F3A                                                     ;bit not implemented
    2904    2413   01F3A                                                     ;bit not implemented
    2905    2414   01F3A                         pt2    bit    0bdh
    2906    2415   01F3A                         ps     bit    0bch
    2907    2416   01F3A                         pt1    bit    0bbh
    2908    2417   01F3A                         px1    bit    0bah
    2909    2418   01F3A                         pt0    bit    0b9h
    2910    2419   01F3A                         px0    bit    0b8h
    2911    2420   01F3A                  
    2912    2421   01F3A                  iph           data   0b9h          ;interrupt priority high           reset=000h
    2913    2422   01F3A                  psw           data   0d0h          ;program status word               reset=000h
    2914    2423   01F3A                  ;psw is bit addressable
    2915    2424   01F3A                         cy     bit    0d7h
    2916    2425   01F3A                         ac     bit    0d6h
    2917    2426   01F3A                         f0     bit    0d5h
    2918    2427   01F3A                         rs1    bit    0d4h
    2919    2428   01F3A                         rs0    bit    0d3h
    2920    2429   01F3A                         ov     bit    0d2h
    2921    2430   01F3A                         f1     bit    0d1h
    2922    2431   01F3A                         p      bit    0d0h
    2923    2432   01F3A                  
    2924    2433   01F3A                  acc           data   0e0h          ;accumulator                       reset=000h
    2925    2434   01F3A                  ;acc is bit addressable
    2926    2435   01F3A                  
    2927    2436   01F3A                  ien1          data   0e8h          ;interrupt enable 1                reset=000h
    2928    2437   01F3A                  ;ien1 is bit addressable
    2929    2438   01F3A                         eccip3 bit    0efh
    2930    2439   01F3A                         eccip2 bit    0eeh
    2931    2440   01F3A                         eccip1 bit    0edh
    2932    2441   01F3A                         eccip0 bit    0ech
    2933    2442   01F3A                         exm    bit    0ebh
    2934    2443   01F3A                         ex2    bit    0eah
    2935    2444   01F3A                         essc   bit    0e9h
    2936    2445   01F3A                         eadc   bit    0e8h
    2937    2446   01F3A                  
    2938    2447   01F3A                  b             data   0f0h          ;b register                        reset=000h
    2939    2448   01F3A                  ;b is bit addressable
    2940    2449   01F3A                  
    2941    2450   01F3A                  ip1           data   0f8h          ;interrupt priority 1              reset=000h
    2942    2451   01F3A                  ;ip1 is bit addressable
    2943    2452   01F3A                         pccip3 bit    0ffh
    2944    2453   01F3A                         pccip2 bit    0feh
    2945    2454   01F3A                         pccip1 bit    0fdh
    2946    2455   01F3A                         pccip0 bit    0fch
    2947    2456   01F3A                         pxm    bit    0fbh
    2948    2457   01F3A                         px2    bit    0fah
    2949    2458   01F3A                         pssc   bit    0f9h
    2950    2459   01F3A                         padc   bit    0f8h
    2951    2460   01F3A                  
    2952    2461   01F3A                  iph1          data   0f9h          ;interrupt priority 1 high         reset=000h
    2953    2462   01F3A                  
    2954    2463   01F3A                  
    2955    2464   01F3A                  ;*******************************************************************************
    2956    2465   01F3A                  ;
    2957    2466   01F3A                  ; system control registers registers that can only be accessed in the non
    2958    2467   01F3A                  ; mapped memory area (rmap=0) page independent
    2959    2468   01F3A                  ;
    2960    2469   01F3A                  ;*******************************************************************************
    2961    2470   01F3A                  
    2962    2471   01F3A                  scu_page      data   0bfh          ;page register scu                 reset=000h
    2963    2472   01F3A                  
    2964    2473   01F3A                  ;*******************************************************************************
    2965    2474   01F3A                  ;
    2966    2475   01F3A                  ; system control registers registers that can only be accessed in the non
    2967    2476   01F3A                  ; mapped memory area (rmap=0) and page 0
    2968    2477   01F3A                  ;
    2969    2478   01F3A                  ;*******************************************************************************
    2970    2479   01F3A                  
    2971    2480   01F3A                  modpisel      data   0b3h          ;peripheral input select           reset=000h
    2972    2481   01F3A                  ircon0        data   0b4h          ;interrupt request register        reset=000h
    2973    2482   01F3A                  ircon1        data   0b5h          ;interrupt request register        reset=000h
    2974    2483   01F3A                  ircon2        data   0b6h          ;interrupt request register        reset=000h
    2975    2484   01F3A                  exicon0       data   0b7h          ;external interrupt control        reset=0f0h
    2976    2485   01F3A                  exicon1       data   0bah          ;external interrupt control        reset=03fh
    2977    2486   01F3A                  nmicon        data   0bbh          ;nimi control                      reset=000h
    2978    2487   01F3A                  nmisr         data   0bch          ;nmi status                        reset=000h
    2979    2488   01F3A                  bcon          data   0bdh          ;baud rate control                 reset=000h
    2980    2489   01F3A                  bg            data   0beh          ;baud rate timer reload            reset=000h
    2981    2490   01F3A                  fdcon         data   0e9h          ;fractional devider control        reset=000h
    2982    2491   01F3A                  fdstep        data   0eah          ;fractional devider reload         reset=000h
    2983    2492   01F3A                  fdres         data   0ebh          ;fractional divider result         reset=000h
    2984    2493   01F3A                  
    2985    2494   01F3A                  ;*******************************************************************************
    2986    2495   01F3A                  ;
    2987    2496   01F3A                  ; system control registers registers that can only be accessed in the non
    2988    2497   01F3A                  ; mapped memory area (rmap=0) and page 1
    2989    2498   01F3A                  ;
    2990    2499   01F3A                  ;*******************************************************************************
    2991    2500   01F3A                  
    2992    2501   01F3A                  id            data   0b3h          ;identity register     reset=device dependent
    2993    2502   01F3A                  pmcon0        data   0b4h          ;power mode control                reset=000h
    2994    2503   01F3A                  pmcon1        data   0b5h          ;power mode control                reset=000h
    2995    2504   01F3A                  osc_con       data   0b6h          ;osc control                       reset=008h
    2996    2505   01F3A                  pll_con       data   0b7h          ;pll control                       reset=090h
    2997    2506   01F3A                  cmcon         data   0bah          ;clock control                     reset=010h
    2998    2507   01F3A                  passwd        data   0bbh          ;password register                 reset=007h
    2999    2508   01F3A                  feal          data   0bch          ;flash error register              reset=000h
    3000    2509   01F3A                  feah          data   0bdh          ;flash error address high          reset=000h
    3001    2510   01F3A                  cocon         data   0beh          ;clock output control              reset=000h
    3002    2511   01F3A                  misc_con      data   0e9h          ;miscellaneous control             reset=000h
    3003    2512   01F3A                  
    3004    2513   01F3A                  ;*******************************************************************************
    3005    2514   01F3A                  ;
    3006    2515   01F3A                  ; system control registers registers that can only be accessed in the non
    3007    2516   01F3A                  ; mapped memory area (rmap=0) and page 3
    3008    2517   01F3A                  ;
    3009    2518   01F3A                  ;*******************************************************************************
    3010    2519   01F3A                  
    3011    2520   01F3A                  xaddrh        data   0b3h          ;on chip xram address high         reset=0f0h
    3012    2521   01F3A                  ircon3        data   0b4h          ;interrupt request register        reset=000h
    3013    2522   01F3A                  ircon4        data   0b5h          ;interrupt request register        reset=000h
    3014    2523   01F3A                  modpisel1     data   0b7h          ;peripheral input select 1         reset=000h
    3015    2524   01F3A                  modpisel2     data   0bah          ;peripheral input select 2         reset=000h
    3016    2525   01F3A                  pmcon2        data   0bbh          ;power mode control 2              reset=000h
    3017    2526   01F3A                  modsusp       data   0bdh          ;mudule suspend control            reset=001h
    3018    2527   01F3A                  
    3019    2528   01F3A                  ;*******************************************************************************
    3020    2529   01F3A                  ;
    3021    2530   01F3A                  ; port registers accessed in non mapped memory area (rmap=0) page independent
    3022    2531   01F3A                  ;
    3023    2532   01F3A                  ;*******************************************************************************
    3024    2533   01F3A                  
    3025    2534   01F3A                  port_page     data   0b2h          ;port page register                reset=000h
    3026    2535   01F3A                  
    3027    2536   01F3A                  ;*******************************************************************************
    3028    2537   01F3A                  ;
    3029    2538   01F3A                  ; port registers accessed in non mapped memory area (rmap=0) page 0
    3030    2539   01F3A                  ;
    3031    2540   01F3A                  ;*******************************************************************************
    3032    2541   01F3A                  
    3033    2542   01F3A                  p0_data       data   080h          ;port 0 data register              reset=000h
    3034    2543   01F3A                  ;p0_data is bit addressable
    3035    2544   01F3A                  p0_dir        data   086h          ;port 0 direction register         reset=000h
    3036    2545   01F3A                  p1_data       data   090h          ;port 1 data register              reset=000h
    3037    2546   01F3A                  ;p1_data is bit addressable
    3038    2547   01F3A                  p1_dir        data   091h          ;port 1 direction register         reset=000h
    3039    2548   01F3A                  p2_data       data   0a0h          ;port 2 data register              reset=000h
    3040    2549   01F3A                  ;p2_data is bit addressable
    3041    2550   01F3A                  p2_dir        data   0a1h          ;port 2 direction register         reset=000h
    3042    2551   01F3A                  p3_data       data   0b0h          ;port 3 data register              reset=000h
    3043    2552   01F3A                  ;p3_data is bit addressable
    3044    2553   01F3A                  p3_dir        data   0b1h          ;port 3 direction register         reset=000h
    3045    2554   01F3A                  p4_data       data   0c8h          ;port 4 data register              reset=000h
    3046    2555   01F3A                  ;p4_data is bit addressable
    3047    2556   01F3A                  p4_dir        data   0c9h          ;port 4 direction register         reset=000h
    3048    2557   01F3A                  p5_data       data   092h          ;port 5 data register              reset=000h
    3049    2558   01F3A                  p5_dir        data   093h          ;port 5 direction register         reset=000h
    3050    2559   01F3A                  
    3051    2560   01F3A                  ;*******************************************************************************
    3052    2561   01F3A                  ;
    3053    2562   01F3A                  ; port registers accessed in non mapped memory area (rmap=0) page 1
    3054    2563   01F3A                  ;
    3055    2564   01F3A                  ;*******************************************************************************
    3056    2565   01F3A                  
    3057    2566   01F3A                  p0_pudsel     data   080h          ;port 0 pull-up/down select        reset=0ffh
    3058    2567   01F3A                  ;p0_data is bit addressable
    3059    2568   01F3A                  p0_puden      data   086h          ;port 0 pull-up/down enable        reset=0c4h
    3060    2569   01F3A                  p1_pudsel     data   090h          ;port 1 pull-up/down select        reset=0ffh
    3061    2570   01F3A                  ;p1_data is bit addressable
    3062    2571   01F3A                  p1_puden      data   091h          ;port 1 pull-up/down enable        reset=0ffh
    3063    2572   01F3A                  p2_pudsel     data   0a0h          ;port 2 pull-up/down select        reset=0ffh
    3064    2573   01F3A                  ;p2_data is bit addressable
    3065    2574   01F3A                  p2_puden      data   0a1h          ;port 2 pull-up/down enable        reset=000h
    3066    2575   01F3A                  p3_pudsel     data   0b0h          ;port 3 pull-up/down select        reset=0bfh
    3067    2576   01F3A                  ;p3_data is bit addressable
    3068    2577   01F3A                  p3_puden      data   0b1h          ;port 3 pull-up/down enable        reset=040h
    3069    2578   01F3A                  p4_pudsel     data   0c8h          ;port 4 pull-up/down select        reset=0ffh
    3070    2579   01F3A                  ;p4_data is bit addressable
    3071    2580   01F3A                  p4_puden      data   0c9h          ;port 4 pull-up/down enable        reset=004h
    3072    2581   01F3A                  p5_pudsel     data   092h          ;port 5 pull-up/down select        reset=0ffh
    3073    2582   01F3A                  p5_puden      data   093h          ;port 5 pull-up/down enable        reset=0ffh
    3074    2583   01F3A                  
    3075    2584   01F3A                  ;*******************************************************************************
    3076    2585   01F3A                  ;
    3077    2586   01F3A                  ; port registers accessed in non mapped memory area (rmap=0) page 2
    3078    2587   01F3A                  ;
    3079    2588   01F3A                  ;*******************************************************************************
    3080    2589   01F3A                  
    3081    2590   01F3A                  p0_altsel0    data   080h          ;port 0 alternate select           reset=000h
    3082    2591   01F3A                  ;p0_data is bit addressable
    3083    2592   01F3A                  p0_altsel1    data   086h          ;port 0 alternate select           reset=000h
    3084    2593   01F3A                  p1_altsel0    data   090h          ;port 1 alternate select           reset=000h
    3085    2594   01F3A                  ;p1_data is bit addressable
    3086    2595   01F3A                  p1_altsel1    data   091h          ;port 1 alternate select           reset=000h
    3087    2596   01F3A                  p3_altsel0    data   0b0h          ;port 3 alternate select           reset=000h
    3088    2597   01F3A                  ;p3_data is bit addressable
    3089    2598   01F3A                  p3_altsel1    data   0b1h          ;port 3 alternate select           reset=000h
    3090    2599   01F3A                  p4_altsel0    data   0c8h          ;port 4 alternate select           reset=000h
    3091    2600   01F3A                  ;p4_data is bit addressable
    3092    2601   01F3A                  p4_altsel1    data   0c9h          ;port 4 alternate select           reset=000h
    3093    2602   01F3A                  p5_altsel0    data   092h          ;port 5 alternate select           reset=000h
    3094    2603   01F3A                  p5_altsel1    data   093h          ;port 5 alternate select           reset=000h
    3095    2604   01F3A                  
    3096    2605   01F3A                  ;*******************************************************************************
    3097    2606   01F3A                  ;
    3098    2607   01F3A                  ; port registers accessed in non mapped memory area (rmap=0) page 3
    3099    2608   01F3A                  ;
    3100    2609   01F3A                  ;*******************************************************************************
    3101    2610   01F3A                  
    3102    2611   01F3A                  p0_od         data   080h          ;port 0 open drain control         reset=000h
    3103    2612   01F3A                  ;p0_data is bit addressable
    3104    2613   01F3A                  p1_od         data   090h          ;port 0 open drain control         reset=000h
    3105    2614   01F3A                  ;p1_data is bit addressable
    3106    2615   01F3A                  p3_od         data   0b0h          ;port 0 open drain control         reset=000h
    3107    2616   01F3A                  ;p3_data is bit addressable
    3108    2617   01F3A                  p4_od         data   0c8h          ;port 0 open drain control         reset=000h
    3109    2618   01F3A                  ;p4_data is bit addressable
    3110    2619   01F3A                  p5_od         data   092h          ;port 0 open drain control         reset=000h
    3111    2620   01F3A                  
    3112    2621   01F3A                  ;*******************************************************************************
    3113    2622   01F3A                  ;
    3114    2623   01F3A                  ; adc registers accessed in non mapped memory area (rmap=0) page independent
    3115    2624   01F3A                  ;
    3116    2625   01F3A                  ;*******************************************************************************
    3117    2626   01F3A                  
    3118    2627   01F3A                  adc_page      data   0d1h          ;adc page register                 reset=000h
    3119    2628   01F3A                  
    3120    2629   01F3A                  ;*******************************************************************************
    3121    2630   01F3A                  ;
    3122    2631   01F3A                  ; adc registers accessed in non mapped memory area (rmap=0) page 0
    3123    2632   01F3A                  ;
    3124    2633   01F3A                  ;*******************************************************************************
    3125    2634   01F3A                  
    3126    2635   01F3A                  adc_globctr   data   0cah          ;global control register           reset=030h
    3127    2636   01F3A                  adc_globstr   data   0cbh          ;global status register            reset=000h
    3128    2637   01F3A                  adc_prar      data   0cch          ;priority and arbitration          reset=000h
    3129    2638   01F3A                  adc_lcbr      data   0cdh          ;limit check boundary              reset=0b7h
    3130    2639   01F3A                  adc_inpcr0    data   0ceh          ;input class 0 register            reset=000h
    3131    2640   01F3A                  adc_etrcr     data   0cfh          ;external trigger control          reset=000h
    3132    2641   01F3A                  
    3133    2642   01F3A                  ;*******************************************************************************
    3134    2643   01F3A                  ;
    3135    2644   01F3A                  ; adc registers accessed in non mapped memory area (rmap=0) page 1
    3136    2645   01F3A                  ;
    3137    2646   01F3A                  ;*******************************************************************************
    3138    2647   01F3A                  
    3139    2648   01F3A                  adc_chctr0    data   0cah          ;channel control register          reset=000h
    3140    2649   01F3A                  adc_chctr1    data   0cbh          ;channel control register          reset=000h
    3141    2650   01F3A                  adc_chctr2    data   0cch          ;channel control register          reset=000h
    3142    2651   01F3A                  adc_chctr3    data   0cdh          ;channel control register          reset=000h
    3143    2652   01F3A                  adc_chctr4    data   0ceh          ;channel control register          reset=000h
    3144    2653   01F3A                  adc_chctr5    data   0cfh          ;channel control register          reset=000h
    3145    2654   01F3A                  adc_chctr6    data   0d2h          ;channel control register          reset=000h
    3146    2655   01F3A                  adc_chctr7    data   0d3h          ;channel control register          reset=000h
    3147    2656   01F3A                  
    3148    2657   01F3A                  ;*******************************************************************************
    3149    2658   01F3A                  ;
    3150    2659   01F3A                  ; adc registers accessed in non mapped memory area (rmap=0) page 2
    3151    2660   01F3A                  ;
    3152    2661   01F3A                  ;*******************************************************************************
    3153    2662   01F3A                  
    3154    2663   01F3A                  adc_resr0l    data   0cah          ;result register 0 low             reset=000h
    3155    2664   01F3A                  adc_resr0h    data   0cbh          ;result register 0 high            reset=000h
    3156    2665   01F3A                  adc_resr1l    data   0cch          ;result register 1 low             reset=000h
    3157    2666   01F3A                  adc_resr1h    data   0cdh          ;result register 1 high            reset=000h
    3158    2667   01F3A                  adc_resr2l    data   0ceh          ;result register 2 low             reset=000h
    3159    2668   01F3A                  adc_resr2h    data   0cfh          ;result register 2 high            reset=000h
    3160    2669   01F3A                  adc_resr3l    data   0d2h          ;result register 3 low             reset=000h
    3161    2670   01F3A                  adc_resr3h    data   0d3h          ;result register 3 high            reset=000h
    3162    2671   01F3A                  
    3163    2672   01F3A                  ;*******************************************************************************
    3164    2673   01F3A                  ;
    3165    2674   01F3A                  ; adc registers accessed in non mapped memory area (rmap=0) page 3
    3166    2675   01F3A                  ;
    3167    2676   01F3A                  ;*******************************************************************************
    3168    2677   01F3A                  
    3169    2678   01F3A                  adc_resra0l   data   0cah          ;result register 0 l view          reset=000h
    3170    2679   01F3A                  adc_resra0h   data   0cbh          ;result register 0 h view          reset=000h
    3171    2680   01F3A                  adc_resra1l   data   0cch          ;result register 1 l view          reset=000h
    3172    2681   01F3A                  adc_resra1h   data   0cdh          ;result register 1 h view          reset=000h
    3173    2682   01F3A                  adc_resra2l   data   0ceh          ;result register 2 l view          reset=000h
    3174    2683   01F3A                  adc_resra2h   data   0cfh          ;result register 2 h view          reset=000h
    3175    2684   01F3A                  adc_resra3l   data   0d2h          ;result register 3 l view          reset=000h
    3176    2685   01F3A                  adc_resra3h   data   0d3h          ;result register 3 h view          reset=000h
    3177    2686   01F3A                  
    3178    2687   01F3A                  ;*******************************************************************************
    3179    2688   01F3A                  ;
    3180    2689   01F3A                  ; adc registers accessed in non mapped memory area (rmap=0) page 4
    3181    2690   01F3A                  ;
    3182    2691   01F3A                  ;*******************************************************************************
    3183    2692   01F3A                  
    3184    2693   01F3A                  adc_rcr0      data   0cah          ;result control register           reset=000h
    3185    2694   01F3A                  adc_rcr1      data   0cbh          ;result control register           reset=000h
    3186    2695   01F3A                  adc_rcr2      data   0cch          ;result control register           reset=000h
    3187    2696   01F3A                  adc_rcr3      data   0cdh          ;result control register           reset=000h
    3188    2697   01F3A                  adc_vfcr      data   0ceh          ;valid flag clear register         reset=000h
    3189    2698   01F3A                  
    3190    2699   01F3A                  ;*******************************************************************************
    3191    2700   01F3A                  ;
    3192    2701   01F3A                  ; adc registers accessed in non mapped memory area (rmap=0) page 5
    3193    2702   01F3A                  ;
    3194    2703   01F3A                  ;*******************************************************************************
    3195    2704   01F3A                  
    3196    2705   01F3A                  adc_chinfr    data   0cah          ;channel interrupt flag register   reset=000h
    3197    2706   01F3A                  adc_chincr    data   0cbh          ;channel interrupt clear register  reset=000h
    3198    2707   01F3A                  adc_chinsr    data   0cch          ;channel interrupt set register    reset=000h
    3199    2708   01F3A                  adc_chinpr    data   0cdh          ;channel interrupt node pointrer   reset=000h
    3200    2709   01F3A                  adc_evinfr    data   0ceh          ;event interrupt flag register     reset=000h
    3201    2710   01F3A                  adc_evincr    data   0cfh          ;event interrupt clear flag reg.   reset=000h
    3202    2711   01F3A                  adc_evinsr    data   0d2h          ;event interrupt set flag register reset=000h
    3203    2712   01F3A                  adc_evinpr    data   0d3h          ;event interrupt node pointer reg. reset=000h
    3204    2713   01F3A                  
    3205    2714   01F3A                  ;*******************************************************************************
    3206    2715   01F3A                  ;
    3207    2716   01F3A                  ; adc registers accessed in non mapped memory area (rmap=0) page 6
    3208    2717   01F3A                  ;
    3209    2718   01F3A                  ;*******************************************************************************
    3210    2719   01F3A                  
    3211    2720   01F3A                  adc_crcr1     data   0cah          ;conversion request control        reset=000h
    3212    2721   01F3A                  adc_crpr1     data   0cbh          ;conversion request pending        reset=000h
    3213    2722   01F3A                  adc_crmr1     data   0cch          ;conversion request mode           reset=000h
    3214    2723   01F3A                  adc_qmr0      data   0cdh          ;queue mode                        reset=000h
    3215    2724   01F3A                  adc_qsr0      data   0ceh          ;queue status register             reset=020h
    3216    2725   01F3A                  adc_q0r0      data   0cfh          ;queue 0 register 0                reset=000h
    3217    2726   01F3A                  adc_qbur0     data   0d2h          ;queue backup register             reset=000h
    3218    2727   01F3A                  adc_qinr0     data   0d3h          ;queue input register              reset=000h
    3219    2728   01F3A                  
    3220    2729   01F3A                  ;*******************************************************************************
    3221    2730   01F3A                  
    3222    2731   01F3A                  ; timer 2 registers accessed in non mapped memory area (rmap=0)
    3223    2732   01F3A                  ;
    3224    2733   01F3A                  ;*******************************************************************************
    3225    2734   01F3A                  
    3226    2735   01F3A                  t2_t2con      data   0c0h          ;timer 2 control register          reset=000h
    3227    2736   01F3A                  ;t2_t2con is bit addressable
    3228    2737   01F3A                         tf2    bit    0c7h
    3229    2738   01F3A                         exf2   bit    0c6h
    3230    2739   01F3A                                                     ;2 bits are not implemented
    3231    2740   01F3A                         exen2  bit    0c3h
    3232    2741   01F3A                         tr2    bit    0c2h
    3233    2742   01F3A                         ct2    bit    0c1h
    3234    2743   01F3A                         cprl2  bit    0c0h
    3235    2744   01F3A                  
    3236    2745   01F3A                  t2_t2mod      data   0c1h          ;timer 2 mode register             reset=000h
    3237    2746   01F3A                  t2_rc2l       data   0c2h          ;timer 2 reload/capture low        reset=000h
    3238    2747   01F3A                  t2_rc2h       data   0c3h          ;timer 2 rel/cap high              reset=000h
    3239    2748   01F3A                  t2_t2l        data   0c4h          ;timer 2 register low              reset=000h
    3240    2749   01F3A                  t2_t2h        data   0c5h          ;timer 2 register high             reset=000h
    3241    2750   01F3A                  
    3242    2751   01F3A                  ;*******************************************************************************
    3243    2752   01F3A                  ;
    3244    2753   01F3A                  ; ccu6 registers are accessed in non mapped memory (rmap=0) page independent
    3245    2754   01F3A                  ;
    3246    2755   01F3A                  ;*******************************************************************************
    3247    2756   01F3A                  
    3248    2757   01F3A                  ccu6_page     data   0a3h          ;ccu6 page register                reset=000h
    3249    2758   01F3A                  
    3250    2759   01F3A                  ;*******************************************************************************
    3251    2760   01F3A                  ;
    3252    2761   01F3A                  ; ccu6 registers are accessed in non mapped memory (rmap=0) page 0
    3253    2762   01F3A                  ;
    3254    2763   01F3A                  ;*******************************************************************************
    3255    2764   01F3A                  
    3256    2765   01F3A                  ccu6_cc63srl  data   09ah          ;cap/comp shadow channel 63        reset=000h
    3257    2766   01F3A                  ccu6_cc63srh  data   09bh          ;cap/comp shadow channel 63        reset=000h
    3258    2767   01F3A                  ccu6_tctr4l   data   09ch          ;timer control low                 reset=000h
    3259    2768   01F3A                  ccu6_tctr4h   data   09dh          ;timer control high                reset=000h
    3260    2769   01F3A                  ccu6_mcmoutsl data   09eh          ;multichannel mode output shadow   reset=000h
    3261    2770   01F3A                  ccu6_mcmoutsh data   09fh          ;multichannel mode output shadow   reset=000h
    3262    2771   01F3A                  ccu6_isrl     data   0a4h          ;cap/com interrupt status          reset=000h
    3263    2772   01F3A                  ccu6_isrh     data   0a5h          ;cap/com interrupt status          reset=000h
    3264    2773   01F3A                  ccu6_cmpmodifl       data   0a6h   ;compare state modification reg.   reset=000h
    3265    2774   01F3A                  ccu6_cmpmodifh       data   0a7h   ;compare state modification reg.   reset=000h
    3266    2775   01F3A                  ccu6_cc60srl  data   0fah          ;cap/comp shadow channel 60        reset=000h
    3267    2776   01F3A                  ccu6_cc60srh  data   0fbh          ;cap/comp shadow channel 60        reset=000h
    3268    2777   01F3A                  ccu6_cc61srl  data   0fch          ;cap/comp shadow channel 61        reset=000h
    3269    2778   01F3A                  ccu6_cc61srh  data   0fdh          ;cap/comp shadow channel 61        reset=000h
    3270    2779   01F3A                  ccu6_cc62srl  data   0feh          ;cap/comp shadow channel 62        reset=000h
    3271    2780   01F3A                  ccu6_cc62srh  data   0ffh          ;cap/comp shadow channel 62        reset=000h
    3272    2781   01F3A                  
    3273    2782   01F3A                  ;*******************************************************************************
    3274    2783   01F3A                  ;
    3275    2784   01F3A                  ; ccu6 registers are accessed in non mapped memory (rmap=0) page 1
    3276    2785   01F3A                  ;
    3277    2786   01F3A                  ;*******************************************************************************
    3278    2787   01F3A                  
    3279    2788   01F3A                  ccu6_cc63rl   data   09ah          ;cap/comp register channel 63      reset=000h
    3280    2789   01F3A                  ccu6_cc63rh   data   09bh          ;cap/comp register channel 63      reset=000h
    3281    2790   01F3A                  ccu6_t12prl   data   09ch          ;timer 12 period register          reset=000h
    3282    2791   01F3A                  ccu6_t12prh   data   09dh          ;timer 12 period register          reset=000h
    3283    2792   01F3A                  ccu6_t13prl   data   09eh          ;timer 13 period register          reset=000h
    3284    2793   01F3A                  ccu6_t13prh   data   09fh          ;timer 13 period register          reset=000h
    3285    2794   01F3A                  ccu6_t12dtcl  data   0a4h          ;timer 12 dead time control        reset=000h
    3286    2795   01F3A                  ccu6_t12dtch  data   0a5h          ;timer 12 dead time control        reset=000h
    3287    2796   01F3A                  ccu6_tctr0l   data   0a6h          ;timer control                     reset=000h
    3288    2797   01F3A                  ccu6_tctr0h   data   0a7h          ;timer control                     reset=000h
    3289    2798   01F3A                  ccu6_cc60rl   data   0fah          ;cap/comp register channel 60      reset=000h
    3290    2799   01F3A                  ccu6_cc60rh   data   0fbh          ;cap/comp register channel 60      reset=000h
    3291    2800   01F3A                  ccu6_cc61rl   data   0fch          ;cap/comp register channel 61      reset=000h
    3292    2801   01F3A                  ccu6_cc61rh   data   0fdh          ;cap/comp register channel 61      reset=000h
    3293    2802   01F3A                  ccu6_cc62rl   data   0feh          ;cap/comp register channel 62      reset=000h
    3294    2803   01F3A                  ccu6_cc62rh   data   0ffh          ;cap/comp register channel 62      reset=000h
    3295    2804   01F3A                  
    3296    2805   01F3A                  ;*******************************************************************************
    3297    2806   01F3A                  ;
    3298    2807   01F3A                  ; ccu6 registers are accessed in non mapped memory (rmap=0) page 2
    3299    2808   01F3A                  ;
    3300    2809   01F3A                  ;*******************************************************************************
    3301    2810   01F3A                  
    3302    2811   01F3A                  ccu6_t12msell data   09ah          ;t12 cap/comp mode select          reset=000h
    3303    2812   01F3A                  ccu6_t12mselh data   09bh          ;t12 cap/comp mode select          reset=000h
    3304    2813   01F3A                  ccu6_ienl     data   09ch          ;cap/comp interrupt enable         reset=000h
    3305    2814   01F3A                  ccu6_ienh     data   09dh          ;cap/comp interrupt enable         reset=000h
    3306    2815   01F3A                  ccu6_inpl     data   09eh          ;cap/comp interrupt node pointer   reset=040h
    3307    2816   01F3A                  ccu6_inph     data   09fh          ;cap/comp interrupt node pointer   reset=039h
    3308    2817   01F3A                  ccu6_issl     data   0a4h          ;cap/comp interruopt status        reset=000h
    3309    2818   01F3A                  ccu6_issh     data   0a5h          ;cap/comp interruopt status        reset=000h
    3310    2819   01F3A                  ccu6_pslr     data   0a6h          ;passive state level register      reset=000h
    3311    2820   01F3A                  ccu6_mcmctr   data   0a7h          ;multi channel mode control        reset=000h
    3312    2821   01F3A                  ccu6_tctr2l   data   0fah          ;timer control register            reset=000h
    3313    2822   01F3A                  ccu6_tctr2h   data   0fbh          ;timer control register            reset=000h
    3314    2823   01F3A                  ccu6_modctrl  data   0fch          ;modulation control                reset=000h
    3315    2824   01F3A                  ccu6_modctrh  data   0fdh          ;modulation control                reset=000h
    3316    2825   01F3A                  ccu6_trpctrl  data   0feh          ;trap control register             reset=000h
    3317    2826   01F3A                  ccu6_trpctrh  data   0ffh          ;trap control register             reset=000h
    3318    2827   01F3A                  
    3319    2828   01F3A                  ;*******************************************************************************
    3320    2829   01F3A                  ;
    3321    2830   01F3A                  ; ccu6 registers are accessed in non mapped memory (rmap=0) page 3
    3322    2831   01F3A                  ;
    3323    2832   01F3A                  ;*******************************************************************************
    3324    2833   01F3A                  
    3325    2834   01F3A                  ccu6_mcmoutl  data   09ah          ;multi channel mode output         reset=000h
    3326    2835   01F3A                  ccu6_mcmouth  data   09bh          ;multi channel mode output         reset=000h
    3327    2836   01F3A                  ccu6_isl      data   09ch          ;cap/comp interrupt status         reset=000h
    3328    2837   01F3A                  ccu6_ish      data   09dh          ;cap/comp interrupt status         reset=000h
    3329    2838   01F3A                  ccu6_pisel0l  data   09eh          ;port input selection register     reset=000h
    3330    2839   01F3A                  ccu6_pisel0h  data   09fh          ;port input selection register     reset=000h
    3331    2840   01F3A                  ccu6_pisel2   data   0a4h          ;port input selection register     reset=000h
    3332    2841   01F3A                  ccu6_t12l     data   0fah          ;timer 12 register                 reset=000h
    3333    2842   01F3A                  ccu6_t12h     data   0fbh          ;timer 12 register                 reset=000h
    3334    2843   01F3A                  ccu6_t13l     data   0fch          ;timer 13 register                 reset=000h
    3335    2844   01F3A                  ccu6_t13h     data   0fdh          ;timer 13 register                 reset=000h
    3336    2845   01F3A                  ccu6_cmpstatl data   0feh          ;compare state register            reset=000h
    3337    2846   01F3A                  ccu6_cmpstath data   0ffh          ;compare state register            reset=000h
    3338    2847   01F3A                  
    3339    2848   01F3A                  ;*******************************************************************************
    3340    2849   01F3A                  ;
    3341    2850   01F3A                  ; ssc registers can be accessed in the standard memory map (rmap=0)
    3342    2851   01F3A                  ;
    3343    2852   01F3A                  ;*******************************************************************************
    3344    2853   01F3A                  
    3345    2854   01F3A                  ssc_pisel     data   0a9h          ;port input select                 reset=000h
    3346    2855   01F3A                  ssc_conl      data   0aah          ;control register programming mode reset=000h
    3347    2856   01F3A                  ssc_conh      data   0abh          ;control register programming mode reset=000h
    3348    2857   01F3A                  ssc_tbl       data   0ach          ;transmitter buffer                reset=000h
    3349    2858   01F3A                  ssc_rbl       data   0adh          ;receiver buffer                   reset=000h
    3350    2859   01F3A                  ssc_brl       data   0aeh          ;baud rate timer                   reset=000h
    3351    2860   01F3A                  ssc_brh       data   0afh          ;baud rate timer                   reset=000h
    3352    2861   01F3A                  
    3353    2862   01F3A                  ;*******************************************************************************
    3354    2863   01F3A                  ;
    3355    2864   01F3A                  ; can registers can be accessed in the standard memory map (rmap=0)
    3356    2865   01F3A                  ;
    3357    2866   01F3A                  ;*******************************************************************************
    3358    2867   01F3A                  
    3359    2868   01F3A                  adcon         data   0d8h          ;adres/data control                reset=000h
    3360    2869   01F3A                  ; adcon is bit addressable
    3361    2870   01F3A                         v3     bit    0dfh
    3362    2871   01F3A                         v2     bit    0deh
    3363    2872   01F3A                         v1     bit    0ddh
    3364    2873   01F3A                         v0     bit    0dch
    3365    2874   01F3A                         auad1  bit    0dbh
    3366    2875   01F3A                         auad0  bit    0dah
    3367    2876   01F3A                         can_bsy bit   0d9h
    3368    2877   01F3A                         rwen   bit    0d8h
    3369    2878   01F3A                  
    3370    2879   01F3A                  adl           data   0d9h          ;adres register low                reset=000h
    3371    2880   01F3A                  adh           data   0dah          ;adres register low                reset=000h
    3372    2881   01F3A                  data0         data   0dbh          ;can data                          reset=000h
    3373    2882   01F3A                  data1         data   0dch          ;can data                          reset=000h
    3374    2883   01F3A                  data2         data   0ddh          ;can data                          reset=000h
    3375    2884   01F3A                  data3         data   0deh          ;can data                          reset=000h
    3376    2885   01F3A                  
    3377    2886   01F3A                  ;*******************************************************************************
    3378    2887   01F3A                  ;
    3379    2888   01F3A                  ; mdu registers can only be accessed in the mapped memory area (rmap=1)
    3380    2889   01F3A                  ;
    3381    2890   01F3A                  ;*******************************************************************************
    3382    2891   01F3A                  
    3383    2892   01F3A                  mdustat       data   0b0h          ;mdu status register               reset=000h
    3384    2893   01F3A                  ;mdustat is bit addressable
    3385    2894   01F3A                                                     ;5 bits are not implemented
    3386    2895   01F3A                         bsy    bit    0b2h
    3387    2896   01F3A                         ierr   bit    0b1h
    3388    2897   01F3A                         irdy   bit    0b0h
    3389    2898   01F3A                  
    3390    2899   01F3A                  mducon        data   0b1h          ;mdu control                       reset=000h
    3391    2900   01F3A                  md0           data   0b2h          ;mdu operand register              reset=000h
    3392    2901   01F3A                  mr0           data   0b2h          ;mdu result register               reset=000h
    3393    2902   01F3A                  md1           data   0b3h          ;mdu operand register              reset=000h
    3394    2903   01F3A                  mr1           data   0b3h          ;mdu result register               reset=000h
    3395    2904   01F3A                  md2           data   0b4h          ;mdu operand register              reset=000h
    3396    2905   01F3A                  mr2           data   0b4h          ;mdu result register               reset=000h
    3397    2906   01F3A                  md3           data   0b5h          ;mdu operand register              reset=000h
    3398    2907   01F3A                  mr3           data   0b5h          ;mdu result register               reset=000h
    3399    2908   01F3A                  md4           data   0b6h          ;mdu operand register              reset=000h
    3400    2909   01F3A                  mr4           data   0b6h          ;mdu result register               reset=000h
    3401    2910   01F3A                  md5           data   0b7h          ;mdu operand register              reset=000h
    3402    2911   01F3A                  mr5           data   0b7h          ;mdu result register               reset=000h
    3403    2912   01F3A                  
    3404    2913   01F3A                  ;*******************************************************************************
    3405    2914   01F3A                  ;
    3406    2915   01F3A                  ; cordic registers can only be accessed in the mapped memory area (rmap=1)
    3407    2916   01F3A                  ;
    3408    2917   01F3A                  ;*******************************************************************************
    3409    2918   01F3A                  
    3410    2919   01F3A                  cd_cordxl     data   09ah          ;cordic x data low                 reset=000h
    3411    2920   01F3A                  cd_cordxh     data   09bh          ;cordic x data high                reset=000h
    3412    2921   01F3A                  cd_cordyl     data   09ch          ;cordic y data low                 reset=000h
    3413    2922   01F3A                  cd_cordyh     data   09dh          ;cordic y data high                reset=000h
    3414    2923   01F3A                  cd_cordzl     data   09eh          ;cordic z data low                 reset=000h
    3415    2924   01F3A                  cd_cordzh     data   09fh          ;cordic z data high                reset=000h
    3416    2925   01F3A                  cd_statc      data   0a0h          ;cordic status and control         reset=000h
    3417    2926   01F3A                  ;cd_statc is bit addressable
    3418    2927   01F3A                         keepz  bit    0a7h
    3419    2928   01F3A                         keepy  bit    0a6h
    3420    2929   01F3A                         keepx  bit    0a5h
    3421    2930   01F3A                         dmap   bit    0a4h
    3422    2931   01F3A                         int_en bit    0a3h
    3423    2932   01F3A                         eoc    bit    0a2h
    3424    2933   01F3A                         error  bit    0a1h
    3425    2934   01F3A                         cd_bsy bit    0a0h
    3426    2935   01F3A                  
    3427    2936   01F3A                  cd_con        data   0a1h          ;cordic control register           reset=000h
    3428    2937   01F3A                  
    3429    2938   01F3A                  ;*******************************************************************************
    3430    2939   01F3A                  ;
    3431    2940   01F3A                  ; wdt registers can be accessed in the mapped memory area (rmap=1)
    3432    2941   01F3A                  ;
    3433    2942   01F3A                  ;*******************************************************************************
    3434    2943   01F3A                  
    3435    2944   01F3A                  wdtcon        data   0bbh          ;watchdog timer control            reset=000h
    3436    2945   01F3A                  wdtrel        data   0bch          ;watchdog timer reload             reset=000h
    3437    2946   01F3A                  wdtwinb       data   0bdh          ;wdt window boundry count          reset=000h
    3438    2947   01F3A                  wdtl          data   0beh          ;wdt register low                  reset=000h
    3439    2948   01F3A                  wdth          data   0bfh          ;wdt register high                 reset=000h
    3440    2949   01F3A                  
    3441    2950   01F3A                  ;*******************************************************************************
    3442    2951   01F3A                  ;
    3443    2952   01F3A                  ; t21 registers can be accessed in the mapped memory area (rmap=1)
    3444    2953   01F3A                  ;
    3445    2954   01F3A                  ;*******************************************************************************
    3446    2955   01F3A                  
    3447    2956   01F3A                  t21_t2con     data   0c0h          ;timer 21 control register         reset=000h
    3448    2957   01F3A                  ;t2_t2con is bit addressable bits are aalready defined
    3449    2958   01F3A                         ;tf2    bit    0c7h
    3450    2959   01F3A                         ;exf2   bit    0c6h
    3451    2960   01F3A                                                     ;2 bits are not implemented
    3452    2961   01F3A                         ;exen2  bit    0c3h
    3453    2962   01F3A                         ;tr2    bit    0c2h
    3454    2963   01F3A                         ;ct2    bit    0c1h
    3455    2964   01F3A                         ;cprl2  bit    0c0h
    3456    2965   01F3A                  
    3457    2966   01F3A                  t21_t2mod      data   0c1h          ;timer 21 mode register           reset=000h
    3458    2967   01F3A                  t21_rc2l       data   0c2h          ;timer 21 rel/cap low             reset=000h
    3459    2968   01F3A                  t21_rc2h       data   0c3h          ;timer 21 rel/cap high            reset=000h
    3460    2969   01F3A                  t21_t2l        data   0c4h          ;timer 21 register low            reset=000h
    3461    2970   01F3A                  t21_t2h        data   0c5h          ;timer 21 register high           reset=000h
    3462    2971   01F3A                  
    3463    2972   01F3A                  ;*******************************************************************************
    3464    2973   01F3A                  ;
    3465    2974   01F3A                  ; uart1 registers can be accessed in the mapped memory area (rmap=1)
    3466    2975   01F3A                  ;
    3467    2976   01F3A                  ;*******************************************************************************
    3468    2977   01F3A                  
    3469    2978   01F3A                  scon1         data   0c8h          ;sirial channel 1 control          reset=000h
    3470    2979   01F3A                  ;s1con is bit addressable
    3471    2980   01F3A                         sm01   bit    0cfh
    3472    2981   01F3A                         sm11   bit    0ceh
    3473    2982   01F3A                         sm21   bit    0cdh
    3474    2983   01F3A                         ren1   bit    0cch
    3475    2984   01F3A                         tb81   bit    0cbh
    3476    2985   01F3A                         rb81   bit    0cah
    3477    2986   01F3A                         ti1    bit    0c9h
    3478    2987   01F3A                         ri1    bit    0c8h
    3479    2988   01F3A                  
    3480    2989   01F3A                  sbuf1         data   0c9h          ;serial channel 1 data             reset=000h
    3481    2990   01F3A                  bcon1         data   0cah          ;baud rate control register        reset=000h
    3482    2991   01F3A                  bg1           data   0cbh          ;baud rate timer reload            reset=000h
    3483    2992   01F3A                  fdcon1        data   0cch          ;fractional devider control        reset=000h
    3484    2993   01F3A                  fdstep1       data   0cdh          ;fractional devider reload         reset=000h
    3485    2994   01F3A                  fdres1        data   0ceh          ;fractional devider result         reset=000h
    3486    2995   01F3A                  
    3487    2996   01F3A                  ;*******************************************************************************
    3488    2997   01F3A                  ;
    3489    2998   01F3A                  ; ocds registers can be accessed in mapped memory area (rmap=1)
    3490    2999   01F3A                  ;
    3491    3000   01F3A                  ;*******************************************************************************
    3492    3001   01F3A                  
    3493    3002   01F3A                  mmcr2         data   0e9h          ;monitor mode control              reset=01-h
    3494    3003   01F3A                  mmcr          data   0f1h          ;monitor control                   reset=000h
    3495    3004   01F3A                  mmsr          data   0f2h          ;monitor mode status               reset=000h
    3496    3005   01F3A                  mmbpcr        data   0f3h          ;breakpoints control register      reset=000h
    3497    3006   01F3A                  mmicr         data   0f4h          ;monitor mode interrupt control    reset=000h
    3498    3007   01F3A                  mmdr          data   0f5h          ;monitor mode data transfer        reset=000h
    3499    3008   01F3A                  hwbpsr        data   0f6h          ;hardware breakpoints select       reset=000h
    3500    3009   01F3A                  hwbpdr        data   0f7h          ;hardware breakpoints data         reset=000h
    3501    3010   01F3A                  mmwr1         data   0ebh          ;monitor work register 1           reset=000h
    3502    3011   01F3A                  mmwr2         data   0ech          ;monitor work register 2           reset=000h
    3503    3012   01F3A                  
    3504    3013   01F3A                  ;end directive must be used, but has no signification
    3505    3014   01F3A                  
    3506    3015   01F3A                  end
    3507    3016   01F3A                  
    3508    3017   01F3A                  
    3509    3018   01F3A                  
    3510    3019   01F3A                  
    3511    3020   01F3A                  
    3512    3021   01F3A                  
    3513    3022   01F3A                  
    3514    3023   01F3A                  
    3515    3024   01F3A                  
    3516    3025   01F3A                  
    3517    3026   01F3A                  
    3518    3027   01F3A                  
    3519    3028   01F3A                  
    3520    3029   01F3A                  
    3521    3030   01F3A                  
    3522    3031   01F3A                  
