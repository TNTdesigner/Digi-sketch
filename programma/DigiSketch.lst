C:\Users\Nico\Documents\Thomas more\Digi-sketch\programma\DigiSketch.xsf 
       1       1   00000                  org 0000h
       2       2   00000 020003           ljmp   main
       3       3   00003                  
       4       4   00003                  ;------------------------------------------------------------------
       5       5   00003                  ;Hoofd programma
       6       6   00003                  ;------------------------------------------------------------------
       7       7   00003                  main:
       8       8   00003 75817F               mov     sp,#7fh                 ;stackpointer instellen
       9       9   00006 12004D               lcall   inits
      10      10   00009                  
      11      11   00009                      ;Mode set
      12      12   00009 751280               mov     COMANDREG,#10000000b
      13      13   0000C 121551               lcall   comandWrite
      14      14   0000F                      ;Display mode
      15      15   0000F 75129C               mov     COMANDREG,#10011100b
      16      16   00012 121551               lcall   comandWrite
      17      17   00015                  
      18      18   00015                      ;adres data pointer
      19      19   00015 751100               mov     DATAREG,#00h            ;lower address
      20      20   00018 121504               lcall   dataWrite
      21      21   0001B 751100               mov     DATAREG,#00h
      22      22   0001E 121504               lcall   dataWrite
      23      23   00021 751224               mov     COMANDREG,#24h
      24      24   00024 121551               lcall   comandWrite
      25      25   00027                      ;auto write mode
      26      26   00027 7512B0               mov     COMANDREG,#b0h
      27      27   0002A 121551               lcall   comandWrite
      28      28   0002D                  
      29      29   0002D                  lus0:
      30      30   0002D 900A55               mov     dptr,#rogue       ;begin afbeelding in pointer steken
      31      31   00030                  lus:
      32      32   00030 E4                   clr     a
      33      33   00031 93                   movc    a,@a+dptr               ;get byte
      34      34   00032 B4AA03               cjne    a,#10101010b,next
      35      35   00035 020047               ljmp    stop
      36      36   00038                  next:
      37      37   00038 F511                 mov     DATAREG,a
      38      38   0003A 12151B               lcall   dataAutoWrite
      39      39   0003D A3                   inc     dptr
      40      40   0003E 020030               ljmp    lus
      41      41   00041                      ;data auto read af zetten
      42      42   00041 7512B2               mov     COMANDREG,#b2h
      43      43   00044 121551               lcall   comandWrite
      44      44   00047                  stop:
      45      45   00047 1215D5               lcall   readRotary
      46      46   0004A 020047               ljmp    stop
      47      47   0004D                  
      48      48   0004D                  
      49      49   0004D                  ;------------------------------------------------------------------
      50      50   0004D                  ;Initializatie van alle componenten nodig in het hoofd programma
      51      51   0004D                  ;------------------------------------------------------------------
      52      52   0004D                  inits:
      53      53   0004D 75B200               mov     port_page,#000h         ;selecteer poort page 0
      54      54   00050 12147E               lcall   initGLCD                ;initializatie grafisch LCD scherm, MOET EERST GEBEUREN
      55      55   00053                  ;    lcall   clearScreen
      56      56   00053 22               ret
      57      57   00054                  
      58      58   00054                  
      59      59   00054                  ;include filles
      61       1   00054                  startscherm:
      62       2   00054 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
      63       3   0007C 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
      64       4   000A4 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
      65       5   000CC 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
      66       6   000F4 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
      67       7   0011C 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
      68       8   00144 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
      69       9   0016C 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
      70      10   00194 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
      71      11   001BC 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
      72      12   001E4 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
      73      13   0020C 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
      74      14   00234 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
      75      15   0025C 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
      76      16   00284 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
      77      17   002AC 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
      78      18   002D4 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
      79      19   002FC 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
      80      20   00324 0000000000000F3C db 000000b,000000b,000000b,000000b,000000b,000000b,001111b,111100b,000000b,000000b,000000b,000000b,011111b,110000b,000000b,000000b,000000b,000001b,110000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000001b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         000000001F300000
                         0001300000000000
                         0000000000010000
                         0000000000000000
      81      21   0034C 00073F3F00001F3C db 000000b,000111b,111111b,111111b,000000b,000000b,011111b,111100b,000000b,000000b,000000b,000000b,111111b,111000b,000000b,000000b,000000b,011111b,111110b,000000b,011111b,111100b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000111b,000000b,000000b,000000b,000000b,000111b,111111b,100000b,000000b,000000b,000000b
                         000000003F380000
                         001F3E001F3C0000
                         0000000000070000
                         0000073F20000000
      82      22   00374 00073F3938001F3E db 000000b,000111b,111111b,111001b,111000b,000000b,011111b,111110b,000000b,000000b,000000b,000000b,111111b,111000b,000000b,000000b,000001b,111110b,000011b,100000b,011111b,111100b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,011111b,000000b,000000b,000000b,000000b,000011b,111111b,100000b,000000b,000000b,000000b
                         000000003F380000
                         013E03201F3C0000
                         00000000001F0000
                         0000033F20000000
      83      23   0039C 00073F3006000F3C db 000000b,000111b,111111b,110000b,000110b,000000b,001111b,111100b,000000b,000000b,000000b,000000b,111111b,111000b,000000b,000000b,000011b,111110b,000000b,110000b,011111b,111100b,000000b,000000b,000000b,000000b,000000b,000000b,000011b,111111b,000000b,000000b,000000b,000000b,000011b,111111b,100000b,000000b,000000b,000000b
                         000000003F380000
                         033E00301F3C0000
                         00000000033F0000
                         0000033F20000000
      84      24   003C4 00073F3003000730 db 000000b,000111b,111111b,110000b,000011b,000000b,000111b,110000b,000000b,000000b,000000b,110000b,001111b,100000b,000000b,000000b,000111b,111110b,000000b,000000b,011111b,111100b,000000b,000000b,000000b,000000b,000000b,000000b,000111b,111111b,000000b,000000b,000000b,000000b,000011b,111111b,100000b,000000b,000000b,000000b
                         000000300F200000
                         073E00001F3C0000
                         00000000073F0000
                         0000033F20000000
      85      25   003EC 00073F3001200000 db 000000b,000111b,111111b,110000b,000001b,100000b,000000b,000000b,000000b,000000b,000001b,100000b,000000b,000000b,000000b,000000b,001111b,111111b,000000b,000000b,011111b,111100b,000000b,000000b,000000b,000000b,000000b,000000b,000111b,111111b,000000b,000000b,000000b,000000b,000011b,111111b,100000b,000000b,000000b,000000b
                         0000012000000000
                         0F3F00001F3C0000
                         00000000073F0000
                         0000033F20000000
      86      26   00414 00073F3000301F3C db 000000b,000111b,111111b,110000b,000000b,110000b,011111b,111100b,000000b,011111b,111111b,000000b,111111b,111000b,000000b,000000b,001111b,111111b,100000b,000000b,011111b,111100b,000000b,001110b,000000b,000111b,111110b,000000b,111111b,111111b,111100b,000001b,111111b,110000b,000011b,111111b,100001b,111111b,100000b,000000b
                         001F3F003F380000
                         0F3F20001F3C000E
                         00073E003F3F3C01
                         3F30033F213F2000
      87      27   0043C 00073F3000101F3C db 000000b,000111b,111111b,110000b,000000b,010000b,011111b,111100b,000001b,111100b,011111b,000000b,111111b,111000b,000000b,000000b,001111b,111111b,110000b,000000b,011111b,111100b,000000b,111110b,000000b,001111b,000111b,100000b,000111b,111111b,000000b,000011b,111100b,001100b,000011b,111111b,100111b,111111b,110000b,000000b
                         013C1F003F380000
                         0F3F30001F3C003E
                         000F0720073F0003
                         3C0C033F273F3000
      88      28   00464 00073F3000081F3C db 000000b,000111b,111111b,110000b,000000b,001000b,011111b,111100b,000011b,111100b,011111b,100000b,111111b,111000b,000000b,000000b,001111b,111111b,111000b,000000b,011111b,111100b,000001b,100000b,000000b,111110b,000011b,110000b,000111b,111111b,000000b,001111b,111000b,000111b,000011b,111111b,111100b,111111b,111000b,000000b
                         033C1F203F380000
                         0F3F38001F3C0120
                         003E0330073F000F
                         3807033F3C3F3800
      89      29   0048C 00073F3000081F3C db 000000b,000111b,111111b,110000b,000000b,001000b,011111b,111100b,000111b,111100b,011111b,110000b,111111b,111000b,000000b,000000b,001111b,111111b,111100b,000000b,011111b,111100b,000110b,000000b,000001b,111110b,000011b,111000b,000111b,111111b,000000b,001111b,111000b,000011b,000011b,111111b,110000b,111111b,111000b,000000b
                         073C1F303F380000
                         0F3F3C001F3C0600
                         013E0338073F000F
                         3803033F303F3800
      90      30   004B4 00073F3000041F3C db 000000b,000111b,111111b,110000b,000000b,000100b,011111b,111100b,001111b,111100b,011111b,111000b,111111b,111000b,000000b,000000b,001111b,111111b,111100b,000000b,011111b,111100b,001110b,000000b,000001b,111110b,000011b,111100b,000111b,111111b,000000b,011111b,111000b,000001b,000011b,111111b,100000b,111111b,111100b,000000b
                         0F3C1F383F380000
                         0F3F3C001F3C0E00
                         013E033C073F001F
                         3801033F203F3C00
      91      31   004DC 00073F3000041F3C db 000000b,000111b,111111b,110000b,000000b,000100b,011111b,111100b,001111b,111100b,011111b,111000b,111111b,111000b,000000b,000000b,000111b,111111b,111110b,000000b,011111b,111100b,011111b,000000b,000011b,111110b,000011b,111100b,000111b,111111b,000000b,111111b,111000b,000000b,000011b,111111b,100000b,011111b,111100b,000000b
                         0F3C1F383F380000
                         073F3E001F3C1F00
                         033E033C073F003F
                         3800033F201F3C00
      92      32   00504 00073F3000041F3C db 000000b,000111b,111111b,110000b,000000b,000100b,011111b,111100b,001111b,111100b,011111b,111000b,111111b,111000b,000000b,000000b,000111b,111111b,111111b,000000b,011111b,111100b,111111b,000000b,000111b,111110b,000011b,111110b,000111b,111111b,000000b,111111b,111000b,000000b,000011b,111111b,100000b,011111b,111100b,000000b
                         0F3C1F383F380000
                         073F3F001F3C3F00
                         073E033E073F003F
                         3800033F201F3C00
      93      33   0052C 00073F3000041F3C db 000000b,000111b,111111b,110000b,000000b,000100b,011111b,111100b,001111b,111100b,011111b,111000b,111111b,111000b,000000b,000000b,000011b,111111b,111111b,100000b,011111b,111111b,111111b,100000b,000111b,111110b,000011b,111110b,000111b,111111b,000000b,111111b,111000b,000000b,000011b,111111b,100000b,011111b,111100b,000000b
                         0F3C1F383F380000
                         033F3F201F3F3F20
                         073E033E073F003F
                         3800033F201F3C00
      94      34   00554 00073F3000041F3C db 000000b,000111b,111111b,110000b,000000b,000100b,011111b,111100b,001111b,111100b,011111b,111000b,111111b,111000b,000000b,000000b,000001b,111111b,111111b,110000b,011111b,111111b,111111b,100000b,000111b,111110b,000011b,111110b,000111b,111111b,000001b,111111b,111000b,000000b,000011b,111111b,100000b,011111b,111100b,000000b
                         0F3C1F383F380000
                         013F3F301F3F3F20
                         073E033E073F013F
                         3800033F201F3C00
      95      35   0057C 00073F3000041F3C db 000000b,000111b,111111b,110000b,000000b,000100b,011111b,111100b,001111b,111100b,011111b,110000b,111111b,111001b,111111b,111111b,000000b,111111b,111111b,110000b,011111b,111111b,111111b,110000b,000111b,111111b,001111b,111111b,000111b,111111b,000001b,111111b,111000b,000000b,000011b,111111b,100000b,011111b,111100b,000000b
                         0F3C1F303F393F3F
                         003F3F301F3F3F30
                         073F0F3F073F013F
                         3800033F201F3C00
      96      36   005A4 00073F3000041F3C db 000000b,000111b,111111b,110000b,000000b,000100b,011111b,111100b,000111b,111100b,011111b,110000b,111111b,111000b,000000b,000000b,000000b,011111b,111111b,111000b,011111b,111101b,111111b,111000b,000111b,111111b,111111b,111110b,000111b,111111b,000001b,111111b,111000b,000000b,000011b,111111b,100000b,011111b,111100b,000000b
                         073C1F303F380000
                         001F3F381F3D3F38
                         073F3F3E073F013F
                         3800033F201F3C00
      97      37   005CC 00073F30000C1F3C db 000000b,000111b,111111b,110000b,000000b,001100b,011111b,111100b,000011b,111100b,011111b,100000b,111111b,111000b,000000b,000000b,000000b,011111b,111111b,111000b,011111b,111101b,111111b,111000b,000111b,111110b,000000b,000000b,000111b,111111b,000001b,111111b,111000b,000000b,000011b,111111b,100000b,011111b,111100b,000000b
                         033C1F203F380000
                         001F3F381F3D3F38
                         073E0000073F013F
                         3800033F201F3C00
      98      38   005F4 00073F3000081F3C db 000000b,000111b,111111b,110000b,000000b,001000b,011111b,111100b,000011b,111100b,111110b,000000b,111111b,111000b,000000b,000000b,000000b,001111b,111111b,111000b,011111b,111100b,111111b,111100b,000111b,111110b,000000b,000000b,000111b,111111b,000000b,111111b,111000b,000000b,000011b,111111b,100000b,011111b,111100b,000000b
                         033C3E003F380000
                         000F3F381F3C3F3C
                         073E0000073F003F
                         3800033F201F3C00
      99      39   0061C 00073F3000181F3C db 000000b,000111b,111111b,110000b,000000b,011000b,011111b,111100b,000110b,001111b,111000b,000000b,111111b,111000b,000000b,000000b,000000b,000111b,111111b,111100b,011111b,111100b,011111b,111100b,000111b,111110b,000000b,000000b,000111b,111111b,000000b,111111b,111000b,000000b,000011b,111111b,100000b,011111b,111100b,000000b
                         060F38003F380000
                         00073F3C1F3C1F3C
                         073E0000073F003F
                         3800033F201F3C00
     100      40   00644 00073F3000301F3C db 000000b,000111b,111111b,110000b,000000b,110000b,011111b,111100b,001110b,000000b,000000b,000000b,111111b,111000b,000000b,000000b,000000b,000011b,111111b,111000b,011111b,111100b,011111b,111110b,000011b,111110b,000000b,000110b,000111b,111111b,000010b,111111b,111000b,000000b,110011b,111111b,100000b,011111b,111100b,000000b
                         0E0000003F380000
                         00033F381F3C1F3E
                         033E0006073F023F
                         3800333F201F3C00
     101      41   0066C 00073F3000201F3C db 000000b,000111b,111111b,110000b,000000b,100000b,011111b,111100b,001111b,111111b,111111b,000000b,111111b,111000b,000000b,000000b,000000b,000001b,111111b,111000b,011111b,111100b,001111b,111111b,000011b,111110b,000000b,001110b,000111b,111111b,000010b,011111b,111000b,000001b,100011b,111111b,100000b,111111b,111100b,000000b
                         0F3F3F003F380000
                         00013F381F3C0F3F
                         033E000E073F021F
                         3801233F203F3C00
     102      42   00694 00073F3003001F3C db 000000b,000111b,111111b,110000b,000011b,000000b,011111b,111100b,001111b,111111b,111111b,100000b,111111b,111000b,000000b,000000b,001000b,000000b,111111b,111000b,011111b,111100b,001111b,111111b,000001b,111110b,000000b,001100b,000111b,111111b,000110b,001111b,111000b,000011b,000011b,111111b,100000b,111111b,111100b,000000b
                         0F3F3F203F380000
                         08003F381F3C0F3F
                         013E000C073F060F
                         3803033F203F3C00
     103      43   006BC 00073F3006001F3C db 000000b,000111b,111111b,110000b,000110b,000000b,011111b,111100b,001111b,111111b,111111b,100000b,111111b,111000b,000000b,000000b,001110b,000000b,111111b,110000b,011111b,111100b,000111b,111111b,100000b,111110b,000000b,111000b,000011b,111111b,101100b,001111b,111000b,000110b,000111b,111111b,100000b,111111b,111100b,000000b
                         0F3F3F203F380000
                         0E003F301F3C073F
                         203E0038033F2C0F
                         3806073F203F3C00
     104      44   006E4 00073F3038001F3E db 000000b,000111b,111111b,110000b,111000b,000000b,011111b,111110b,000111b,111111b,111111b,100000b,111111b,111000b,000000b,000000b,000011b,100000b,111111b,100000b,011111b,111100b,000111b,111111b,110000b,011111b,000011b,100000b,000001b,111111b,111000b,000011b,111000b,011100b,000111b,111111b,100000b,111111b,111100b,000000b
                         073F3F203F380000
                         03203F201F3C073F
                         301F0320013F3803
                         381C073F203F3C00
     105      45   0070C 00073F3F20001F3E db 000000b,000111b,111111b,111111b,100000b,000000b,011111b,111110b,000011b,111111b,111111b,100000b,111111b,111000b,000000b,000000b,000000b,111111b,111110b,000000b,011111b,111100b,000011b,111111b,111000b,000111b,111110b,000000b,000000b,111111b,100000b,000001b,111111b,110000b,000111b,111111b,100000b,111111b,111100b,000000b
                         033F3F203F380000
                         003F3E001F3C033F
                         38073E00003F2001
                         3F30073F203F3C00
     106      46   00734 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000111b,000000b,000000b,000000b,000000b,000000b,000000b,000111b,100000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000070000000000
                         0007200000000000
                         0000000000000000
                         0000000000000000
     107      47   0075C 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
     108      48   00784 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
     109      49   007AC 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
     110      50   007D4 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
     111      51   007FC 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
     112      52   00824 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
     113      53   0084C 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
     114      54   00874 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
     115      55   0089C 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
     116      56   008C4 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
     117      57   008EC 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
     118      58   00914 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
     119      59   0093C 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
     120      60   00964 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
     121      61   0098C 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
     122      62   009B4 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
     123      63   009DC 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
     124      64   00A04 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
     125      65   00A2C 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,10101010b
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         0000000000000000
                         AA
     126      66   00A55                  
     127      67   00A55                  rogue:
     128      68   00A55 3F3F3F3F3F3F3F3F db 111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
     129      69   00A7D 3F3F3F3F3F3F3F3F db 111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
     130      70   00AA5 3F3F3F3F3F3F3F3F db 111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
     131      71   00ACD 3F3F3F3F3F3F3F3F db 111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
     132      72   00AF5 0F3F3F3F3F3F3F3F db 001111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111100b
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3C
     133      73   00B1D 073F3F3F3F3F3F3F db 000111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,110000b
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F30
     134      74   00B45 00073F3F3F3F3F3F db 000000b,000111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111000b,000000b
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3800
     135      75   00B6D 00033F3F3F3F3F3F db 000000b,000011b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,100000b,000000b
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F2000
     136      76   00B95 000F3F3F3F3F3F3F db 000000b,001111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111100b,000000b
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3C00
     137      77   00BBD 00003F3F3F3F3F3F db 000000b,000000b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111110b,000000b,000000b
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3E0000
     138      78   00BE5 000007201F3F3F3F db 000000b,000000b,000111b,100000b,011111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,100001b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111100b,000011b,111000b,000000b,000000b
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F213F3F3F3F3F
                         3F3F3F3C03380000
     139      79   00C0D 000004000F3F3F3F db 000000b,000000b,000100b,000000b,001111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111000b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111000b,000000b,001000b,000000b,000000b
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F383F3F3F3F3F
                         3F3F3F3800080000
     140      80   00C35 00000000013F3F3F db 000000b,000000b,000000b,000000b,000001b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111100b,011111b,100100b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,000000b,000000b,000000b,000000b,000000b
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3C1F243F3F3F3F3F
                         3F3F3F0000000000
     141      81   00C5D 000000000007233F db 000000b,000000b,000000b,000000b,000000b,000111b,100011b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,000010b,000111b,111111b,111111b,111111b,111111b,111111b,111111b,100001b,110000b,000000b,000000b,000000b,000000b,000000b
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F02073F3F3F3F3F
                         3F21300000000000
     142      82   00C85 380000000000003F db 111000b,000000b,000000b,000000b,000000b,000000b,000000b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,110000b,011111b,111111b,111111b,111111b,111111b,111111b,111111b,000000b,100000b,000000b,000000b,000000b,000000b,001110b
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F301F3F3F3F3F3F
                         3F0020000000000E
     143      83   00CAD 0B20003F30000000 db 001011b,100000b,000000b,111111b,110000b,000000b,000000b,000000b,010111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111110b,001100b,001111b,111111b,111111b,111111b,111111b,110010b,000000b,000000b,000000b,000111b,111110b,000000b,000011b,100101b
                         173F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3E0C0F3F3F3F3F32
                         000000073E000325
     144      84   00CD5 000F251238000007 db 000000b,001111b,100101b,010010b,111000b,000000b,000000b,000111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111100b,011110b,000111b,111111b,111111b,111111b,111111b,111111b,110000b,000000b,000000b,001110b,010101b,001011b,111100b,000010b
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3C1E073F3F3F3F3F
                         3000000E150B3C02
     145      85   00CFD 150A251020000010 db 010101b,001010b,100101b,010000b,100000b,000000b,000000b,010000b,010111b,111111b,000000b,001100b,001111b,111111b,111111b,111111b,111111b,111111b,111111b,100000b,000011b,000000b,001111b,111111b,110011b,110011b,100011b,111111b,111111b,111111b,111111b,110000b,000000b,000000b,000000b,000010b,000101b,001010b,100101b,010010b
                         173F000C0F3F3F3F
                         3F3F3F2003000F3F
                         3333233F3F3F3F30
                         00000002050A2512
     146      86   00D25 0A25120000000430 db 001010b,100101b,010010b,000000b,000000b,000000b,000100b,110000b,010000b,100001b,000000b,000000b,001111b,111111b,111111b,111111b,111111b,111111b,111111b,100000b,000000b,000000b,011111b,111111b,100111b,000111b,111011b,111111b,111111b,111101b,000010b,000000b,000001b,010000b,000000b,000000b,000000b,000101b,001010b,100101b
                         102100000F3F3F3F
                         3F3F3F2000001F3F
                         27073B3F3F3D0200
                         0110000000050A25
     147      87   00D4D 0A3F322C0F301F30 db 001010b,111111b,110010b,101100b,001111b,110000b,011111b,110000b,011111b,111111b,000000b,000000b,001111b,111000b,001111b,111000b,001111b,111111b,111111b,100000b,000000b,000000b,001111b,111100b,000000b,011111b,111111b,111111b,111111b,111111b,111111b,111111b,101111b,111100b,000111b,111000b,001010b,110111b,111110b,100101b
                         1F3F00000F380F38
                         0F3F3F2000000F3C
                         001F3F3F3F3F3F3F
                         2F3C07380A373E25
     148      88   00D75 153F3D123F3F3C00 db 010101b,111111b,111101b,010010b,111111b,111111b,111100b,000000b,011111b,111111b,111101b,111100b,001111b,111000b,001111b,111000b,001111b,111111b,111111b,100000b,111111b,111000b,001111b,111000b,001001b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111110b,010101b,001111b,111111b,010010b
                         1F3F3D3C0F380F38
                         0F3F3F203F380F38
                         093F3F3F3F3F3F3F
                         3F3F3F3E150F3F12
     149      89   00D9D 3F3F3F3F3F3F3C01 db 111111b,111111b,111111b,111111b,111111b,111111b,111100b,000001b,111111b,111111b,000001b,111100b,001111b,111000b,001100b,000000b,000000b,111111b,111111b,100000b,111111b,111000b,001100b,001011b,101100b,011000b,000001b,000001b,100000b,111110b,000111b,000000b,000100b,001111b,111111b,111111b,111111b,111111b,111111b,111111b
                         3F3F013C0F380C00
                         003F3F203F380C0B
                         2C180101203E0700
                         040F3F3F3F3F3F3F
     150      90   00DC5 3F3F3F3F3F3F3C01 db 111111b,111111b,111111b,111111b,111111b,111111b,111100b,000001b,111111b,111111b,000001b,111100b,001111b,111111b,111100b,000000b,000000b,111111b,111111b,100000b,111111b,111000b,001100b,000001b,100000b,011000b,000000b,000001b,100000b,111100b,000111b,000000b,000000b,001111b,111111b,111111b,111111b,111111b,111111b,111111b
                         3F3F013C0F3F3C00
                         003F3F203F380C01
                         20180001203C0700
                         000F3F3F3F3F3F3F
     151      91   00DED 3F3F3F3F3F3F3F30 db 111111b,111111b,111111b,111111b,111111b,111111b,111111b,110000b,011000b,000011b,000000b,000000b,000000b,011000b,001100b,000000b,000000b,111111b,111111b,101100b,000000b,000000b,111100b,000000b,000000b,011000b,000000b,000001b,100000b,111100b,000111b,000000b,000000b,001111b,111111b,111111b,111111b,111111b,111111b,111111b
                         1803000000180C00
                         003F3F2C00003C00
                         00180001203C0700
                         000F3F3F3F3F3F3F
     152      92   00E15 3F3F3F3F3F3F3F30 db 111111b,111111b,111111b,111111b,111111b,111111b,111111b,110000b,011000b,000011b,000000b,000000b,000000b,011000b,001111b,111000b,001111b,111111b,111111b,100100b,000000b,000000b,001100b,000111b,110000b,011110b,001111b,000001b,100000b,111100b,000111b,000011b,111000b,001111b,111111b,111111b,111111b,111111b,111111b,111111b
                         1803000000180F38
                         0F3F3F2400000C07
                         301E0F01203C0703
                         380F3F3F3F3F3F3F
     153      93   00E3D 3F3F3F3F3F3F3F30 db 111111b,111111b,111111b,111111b,111111b,111111b,111111b,110000b,011111b,111111b,000001b,111111b,110000b,011000b,001111b,111000b,001111b,111111b,111111b,100000b,111100b,000011b,111100b,000111b,110000b,011000b,001111b,000001b,100000b,111100b,000111b,100000b,000000b,001111b,111111b,111111b,111111b,111111b,111111b,111111b
                         1F3F013F30180F38
                         0F3F3F203C033C07
                         30180F01203C0720
                         000F3F3F3F3F3F3F
     154      94   00E65 3F3F3F3F3F3F3F30 db 111111b,111111b,111111b,111111b,111111b,111111b,111111b,110000b,011111b,111111b,000001b,111111b,110000b,011000b,011111b,111000b,001111b,111111b,111111b,100000b,111110b,000111b,111100b,000111b,110000b,011000b,001111b,000101b,100000b,111100b,000111b,000000b,000000b,001111b,111111b,111111b,111111b,111111b,111111b,111111b
                         1F3F013F30181F38
                         0F3F3F203E073C07
                         30180F05203C0700
                         000F3F3F3F3F3F3F
     155      95   00E8D 3F3F3C073F3F3F30 db 111111b,111111b,111100b,000111b,111111b,111111b,111111b,110000b,111111b,111111b,100001b,111111b,110000b,011000b,001111b,111000b,001111b,111111b,111111b,100000b,111110b,000111b,111100b,000111b,110000b,011000b,001111b,001111b,100000b,111100b,000111b,000011b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b
                         3F3F213F30180F38
                         0F3F3F203E073C07
                         30180F0F203C0703
                         3F3F3F3F3F3F3F3F
     156      96   00EB5 3F3F38033F3F3F30 db 111111b,111111b,111000b,000011b,111111b,111111b,111111b,110000b,011111b,111111b,100000b,000000b,000000b,111000b,001111b,111000b,000000b,111111b,111111b,100000b,111110b,000000b,001100b,000000b,000000b,011000b,000000b,000001b,100000b,000000b,000111b,000000b,000000b,001111b,111111b,111111b,111111b,111111b,111111b,111111b
                         1F3F200000380F38
                         003F3F203E000C00
                         0018000120000700
                         000F3F3F3F3F3F3F
     157      97   00EDD 3F3F30313F3F3F30 db 111111b,111111b,110000b,110001b,111111b,111111b,111111b,110000b,011111b,111111b,000000b,000000b,000001b,111000b,001111b,111000b,000000b,111111b,111111b,100000b,111110b,100000b,001100b,000000b,000000b,011000b,000000b,000001b,100000b,000001b,010111b,000000b,000000b,001111b,111111b,111111b,000111b,111111b,111111b,111111b
                         1F3F000001380F38
                         003F3F203E200C00
                         0018000120011700
                         000F3F3F073F3F3F
     158      98   00F05 3F3F38333F3F3F30 db 111111b,111111b,111000b,110011b,111111b,111111b,111111b,110000b,011111b,111111b,000000b,011100b,001000b,011000b,001111b,111000b,001000b,111111b,111111b,100000b,111110b,001001b,001100b,000110b,000000b,011000b,000000b,000001b,100000b,000110b,100111b,000000b,110000b,001111b,111111b,111100b,010101b,111111b,111111b,111111b
                         1F3F001C08180F38
                         083F3F203E090C06
                         0018000120062700
                         300F3F3C153F3F3F
     159      99   00F2D 3F203B0B3E0B3F3F db 111111b,100000b,111011b,001011b,111110b,001011b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,000001b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111100b,001110b,111111b,111111b,111111b
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F013F3F3F3F
                         3F3F3F3C0E3F3F3F
     160     100   00F55 3F2F393B3E1F3F3F db 111111b,101111b,111001b,111011b,111110b,011111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111000b,000000b,000001b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,101000b,011111b,110111b,111111b,111111b
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3800013F3F3F3F
                         3F3F3F281F373F3F
     161     101   00F7D 3F2F3F3F3E1F3F3F db 111111b,101111b,111111b,111111b,111110b,011111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111000b,000001b,000001b,111111b,111111b,111111b,111111b,111111b,111111b,111110b,010000b,011101b,111011b,111111b,111111b
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3801013F3F3F3F
                         3F3F3E101D3B3F3F
     162     102   00FA5 3F2F00000E1F3F3F db 111111b,101111b,000000b,000000b,001110b,011111b,111111b,111111b,111100b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111000b,001111b,111111b,111010b,111111b,111111b
                         3C3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F380F3F3A3F3F
     163     103   00FCD 3F3F3F3F3F3F3F3F db 111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,110001b,011111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,110000b,010101b,111011b,111111b,000111b,111111b
                         311F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F30153B3F073F
     164     104   00FF5 3F073F3F3C0F3F3F db 111111b,000111b,111111b,111111b,111100b,001111b,111111b,111111b,101101b,110111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111100b,001110b,001111b,111111b,111111b,111111b,111111b
                         2D373F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3C0E0F3F3F3F3F
     165     105   0101D 3E01300138073F3F db 111110b,000001b,110000b,000001b,111000b,000111b,111111b,111111b,010010b,101111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b
                         122F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
     166     106   01045 3F3F2B0A1F3F3F32 db 111111b,111111b,101011b,001010b,011111b,111111b,111111b,110010b,000011b,101111b,011111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b
                         032F1F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
     167     107   0106D 3E01290A18073F24 db 111110b,000001b,101001b,001010b,011000b,000111b,111111b,100100b,101111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b
                         2F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
     168     108   01095 3E01293A18073E02 db 111110b,000001b,101001b,111010b,011000b,000111b,111110b,000010b,101111b,011111b,111000b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b
                         2F1F383F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
     169     109   010BD 3E01280218073C1D db 111110b,000001b,101000b,000010b,011000b,000111b,111100b,011101b,011110b,101111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,001111b,111111b,111111b,101111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b
                         1E2F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F0F3F3F2F
                         3F3F3F3F3F3F3F3F
     170     110   010E5 322E183326353F3F db 110010b,101110b,011000b,110011b,100110b,110101b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111101b,001011b,111111b,111110b,100101b,111111b,111111b,110100b,111111b,111111b,111111b,111111b,111111b
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3D0B3F3E25
                         3F3F343F3F3F3F3F
     171     111   0110D 3004000004013F3F db 110000b,000100b,000000b,000000b,000100b,000001b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111010b,010101b,111111b,111101b,010010b,111111b,111111b,101010b,011111b,111111b,111111b,111111b,111111b
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3A153F3D12
                         3F3F2A1F3F3F3F3F
     172     112   01135 300720001C013F38 db 110000b,000111b,100000b,000000b,011100b,000001b,111111b,111000b,111111b,000111b,111000b,011111b,100011b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,110111b,111111b,111111b,110011b,111111b,111111b,010111b,101111b,111111b,111111b,000011b,111100b
                         3F07381F233F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3F373F3F33
                         3F3F172F3F3F033C
     173     113   0115D 3800273C10033F20 db 111000b,000000b,100111b,111100b,010000b,000011b,111111b,100000b,011110b,000001b,110000b,001110b,000001b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111101b,001011b,111100b,001110b,101101b,111110b,001111b,000000b,001111b,111111b,111110b,000001b,110000b
                         1E01300E013F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3D0B3C0E2D
                         3E0F000F3F3E0130
     174     114   01185 39142000150B3E20 db 111001b,010100b,100000b,000000b,010101b,001011b,111110b,100000b,010010b,000011b,010000b,001011b,000001b,101111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111100b,110010b,011000b,001110b,010001b,001100b,000111b,000100b,101111b,111111b,111010b,000001b,011000b
                         1203100B012F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3C32180E11
                         0C07042F3F3A0118
     175     115   011AD 38002F3E10033C12 db 111000b,000000b,101111b,111110b,010000b,000011b,111100b,010010b,100001b,010100b,001001b,010000b,101010b,000111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111110b,010010b,001001b,000111b,010001b,001000b,100111b,000000b,001111b,111111b,100001b,001010b,000101b
                         211409102A073F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3E12090711
                         0827000F3F210A05
     176     116   011D5 3F322F3E1C3F380F db 111111b,110010b,101111b,111110b,011100b,111111b,111000b,001111b,000000b,111000b,000111b,100000b,011100b,000011b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111101b,110010b,001001b,000110b,110001b,001000b,100111b,000000b,001010b,010111b,000000b,111100b,000011b
                         003807201C033F3F
                         3F3F3F3F3F3F3F3F
                         3F3F3F3D32090631
                         0827000A17003C03
     177     117   011FD 38002F3E10033807 db 111000b,000000b,101111b,111110b,010000b,000011b,111000b,000111b,000000b,111000b,000111b,100000b,011100b,000011b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,101110b,011111b,111111b,111111b,111111b,111111b,111111b,111111b,001010b,001111b,111111b,000000b,111100b,000011b
                         003807201C033F3F
                         3F3F3F3F3F3F3F3F
                         3F3F2E1F3F3F3F3F
                         3F3F0A0F3F003C03
     178     118   01225 39142F3E150B2002 db 111001b,010100b,101111b,111110b,010101b,001011b,100000b,000010b,000000b,010000b,000001b,000000b,001000b,000001b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,010000b,101111b,110000b,000000b,000111b,110000b,000000b,000111b,100000b,001000b,000110b,000000b,001000b,000001b
                         0010010008013F3F
                         3F3F3F3F3F3F3F3F
                         3F3F102F30000730
                         0007200806000801
     179     119   0124D 30002F3E10013E3F db 110000b,000000b,101111b,111110b,010000b,000001b,111110b,111111b,110011b,111111b,011111b,111011b,111111b,001111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,101100b,011111b,110111b,001101b,100111b,110011b,101110b,110111b,001110b,000010b,010111b,111011b,111111b,011111b
                         333F1F3B3F0F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F2C1F370D2733
                         2E370E02173B3F1F
     180     120   01275 2000280210003E3F db 100000b,000000b,101000b,000010b,010000b,000000b,111110b,111111b,110011b,111111b,011111b,111011b,111111b,001111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,111111b,101100b,011111b,110111b,000000b,000111b,110011b,100000b,000111b,001110b,001000b,000111b,111011b,111111b,011111b
                         333F1F3B3F0F3F3F
                         3F3F3F3F3F3F3F3F
                         3F3F2C1F37000733
                         20070E08073B3F1F
     181     121   0129D 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,001100b,011111b,111111b,000110b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         00000C1F3F060000
                         0000000000000000
                         0000000000000000
     182     122   012C5 0000010000002000 db 000000b,000000b,000001b,000000b,000000b,000000b,100000b,000000b,000000b,010000b,000000b,000000b,001000b,000000b,000000b,001000b,000000b,000000b,000100b,011111b,111111b,000100b,000000b,000000b,000001b,000000b,000000b,000001b,000000b,000000b,000000b,100000b,000000b,000000b,010000b,000000b,000000b,001000b,000000b,000000b
                         0010000008000008
                         0000041F3F040000
                         0100000100000020
                         0000100000080000
     183     123   012ED 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000100b,010000b,000001b,000100b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000041001040000
                         0000000000000000
                         0000000000000000
     184     124   01315 0000000000000000 db 000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000100b,010100b,010111b,000100b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b,000000b
                         0000000000000000
                         0000041417040000
                         0000000000000000
                         0000000000000000
     185     125   0133D 0C1830060C38030E db 001100b,011000b,110000b,000110b,001100b,111000b,000011b,001110b,011000b,000011b,100110b,001100b,000001b,100011b,001110b,000000b,110001b,100111b,000100b,011111b,111111b,000100b,011100b,110001b,100000b,001100b,011000b,110000b,000110b,001100b,111000b,000011b,001110b,011000b,000011b,100110b,001100b,000001b,100011b,000110b
                         1803260C01230E00
                         3127041F3F041C31
                         200C1830060C3803
                         0E1803260C012306
     186     126   01365 1F3F380F3F3C0F3F db 011111b,111111b,111000b,001111b,111111b,111100b,001111b,111111b,111100b,000111b,111111b,111110b,000011b,111111b,111111b,000001b,111111b,111111b,100101b,111111b,111111b,000100b,111111b,111111b,110000b,011111b,111111b,111000b,001111b,111111b,111100b,001111b,111111b,111100b,000111b,111111b,111110b,000011b,111111b,111111b
                         3C073F3E033F3F01
                         3F3F253F3F043F3F
                         301F3F380F3F3C0F
                         3F3C073F3E033F3F
     187     127   0138D 30380F383C073C1E db 110000b,111000b,001111b,111000b,111100b,000111b,111100b,011110b,000111b,111100b,001110b,000011b,111110b,000111b,000001b,111111b,000111b,100000b,111100b,011111b,111111b,001111b,100001b,110000b,011111b,110000b,111000b,001111b,111000b,111100b,000111b,111100b,011110b,000111b,111100b,001110b,000011b,111110b,000111b,000001b
                         073C0E033E07013F
                         07203C1F3F0F2130
                         1F30380F383C073C
                         1E073C0E033E0701
     188     128   013B5 2010033008013008 db 100000b,010000b,000011b,110000b,001000b,000001b,110000b,001000b,000000b,111000b,000100b,000000b,111100b,000010b,000000b,011110b,000001b,000000b,001100b,010001b,001111b,000111b,000000b,100000b,000111b,100000b,010000b,000011b,110000b,001000b,000001b,110000b,001000b,000000b,111000b,000100b,000000b,111100b,000010b,000000b
                         003804003C02001E
                         01000C110F070020
                         0720100330080130
                         08003804003C0200
     189     129   013DD 0000010008002000 db 000000b,000000b,000001b,000000b,001000b,000000b,100000b,000000b,000000b,010000b,000000b,000010b,011000b,000000b,000000b,001000b,000001b,000000b,000100b,010000b,000001b,000110b,000000b,000000b,010011b,000000b,000000b,000011b,000000b,001000b,000000b,100000b,000000b,000000b,010000b,000000b,000000b,011000b,000000b,000000b
                         0010000218000008
                         0100041001060000
                         1300000300080020
                         0000100000180000
     190     130   01405 0000040000020000 db 000000b,000000b,000100b,000000b,000000b,000010b,000000b,000000b,000001b,000000b,000000b,000001b,000000b,000000b,000000b,100000b,000000b,000000b,010100b,011111b,111111b,000100b,000000b,000000b,001000b,000000b,000000b,000100b,000000b,000000b,000010b,000000b,000000b,000001b,000000b,000000b,000001b,000000b,000000b,000000b
                         0100000100000020
                         0000141F3F040000
                         0800000400000200
                         0001000001000000
     191     131   0142D 0000120000190000 db 000000b,000000b,010010b,000000b,000000b,011001b,000000b,000000b,001000b,100000b,000000b,000100b,100000b,000000b,000010b,010000b,000000b,000011b,001100b,011111b,111111b,000100b,000000b,000000b,100100b,000000b,000000b,010010b,000000b,000000b,011001b,000000b,000000b,001000b,100000b,000000b,000100b,100000b,000000b,000010b,10101010b
                         0820000420000210
                         00030C1F3F040000
                         2400001200001900
                         0008200004200002
                         AA
project.inc 
     193       1   01456                  ;------------------------------------------------------------------
     194       2   01456                  ;Lijst van functies:
     195       3   01456                  ;   -statusCheck            Status check van scherm opslaan in STA register
     196       4   01456                  ;   -initGLCD               Initializatie van grafisch LCD scherm
     197       5   01456                  ;   -debug                  debug info op seriele poot zetten
     198       6   01456                  ;   -dataWrite              data naar het scherm sturen
     199       7   01456                  ;   -dataRead               data van het scherm lezen
     200       8   01456                  ;   -comandWrite            comanndo naar scherm sturen
     201       9   01456                  ;------------------------------------------------------------------
     202      10   01456                  ;------------------------------------------------------------------
     203      11   01456                  ;declaratie van pinnen
     204      12   01456                  ;------------------------------------------------------------------
     205      13   01456                      ;scherm
     206      14   01456                      WR          bit     p3_data.0   ;write line van scherm actief laag
     207      15   01456                      RD          bit     p3_data.1   ;read line van scherrm actief laag
     208      16   01456                      CE          bit     p3_data.2   ;chip enble van scherm actief laag
     209      17   01456                      CD          bit     p3_data.3   ;Command write
     210      18   01456                      RESET       bit     p0_data.1   ;reset van scherm actief laag
     211      19   01456                      FS          bit     p0_data.0   ;font groote selecteren FS=1: 6*8, FS=0: 8*8
     212      20   01456                  
     213      21   01456                      ;encoders
     214      22   01456                      SW1         bit     p2_data.2   ;knop in rotary encoder 1
     215      23   01456                      SW2         bit     p2_data.7   ;knop in rotary encoder 2
     216      24   01456                      R1A         bit     p2_data.4   ;rotary encoder 1 pin A
     217      25   01456                      R1B         bit     p2_data.3   ;rotary encoder 1 pin B
     218      26   01456                      R2A         bit     p2_data.5   ;rotary encoder 2 pin A
     219      27   01456                      R2B         bit     p2_data.6   ;rotary encoder 2 pin B
     220      28   01456                  
     221      29   01456                  ;------------------------------------------------------------------
     222      30   01456                  ;declaratie van registers
     223      31   01456                  ;------------------------------------------------------------------
     224      32   01456                      STA         equ     10h         ;geheugenplaats voor de status check
     225      33   01456                      DATAREG     equ     11h         ;geheugenplaats voor het verzenden van data naar het scherm
     226      34   01456                      COMANDREG   equ     12h         ;geheugenplaats voor het verzenden van comandos naar het scherm
     227      35   01456                      ROTARY      equ     13h         ;geheugenplaats voor de momentele waarde van de encoders
     228      36   01456                      ROTARYTEMP  equ     14h         ;geheugenplaats voor de momentele waarde van de encoders te vergelijken
     229      37   01456                      clrL        equ     15h         ;geheugenplaats voor het legen van het het scherm
     230      38   01456                      clrH        equ     16h         ;geheugenplaats voor het legen van het het scherm
     231      39   01456                      POSX        equ     17h         ;geheugenplaats voor X positie op scherm
     232      40   01456                      POSY        equ     18h         ;geheugenplaats voor Y positie op scherm
     233      41   01456                  
     234      42   01456                  ;------------------------------------------------------------------
     235      43   01456                  ;Status check van scherm opslaan in STA register
     236      44   01456                  ;-STA
     237      45   01456                  ;------------------------------------------------------------------
     238      46   01456                  statusCheck:
     239      47   01456 C0E0                 push    acc
     240      48   01458 C0D0                 push    psw
     241      49   0145A C210                 clr     STA                     ;STA register leeg maken
     242      50   0145C 75C900               mov     p4_dir,#000h            ;p4 als input zetten
     243      51   0145F D2B3                 setb    CD
     244      52   01461 D2B0                 setb    WR
     245      53   01463                  stan:
     246      54   01463 C2B1                 clr     RD
     247      55   01465 E5C8                 mov     a,p4_data
     248      56   01467 D2B1                 setb    RD
     249      57   01469 D2B3                 setb    CD
     250      58   0146B                  ;    mov     r0,a
     251      59   0146B                  ;    lcall   debug
     252      60   0146B F510                 mov     STA,a                   ;bijhouden voor eventueel gebruik
     253      61   0146D 5403                 anl     a,#03h                  ;masker voor STA0 en STA1
     254      62   0146F B403F1               cjne    a,#03h,stan
     255      63   01472 F8                   mov     r0,a
     256      64   01473 121567               lcall   debug
     257      65   01476 75C9FF               mov     p4_dir,#0ffh
     258      66   01479 D0D0                 pop     psw
     259      67   0147B D0E0                 pop     acc
     260      68   0147D 22               ret
     261      69   0147E                  
     262      70   0147E                  ;------------------------------------------------------------------
     263      71   0147E                  ;Initializatie van grafisch LCD scherm
     264      72   0147E                  ;------------------------------------------------------------------
     265      73   0147E                  initGLCD:
     266      74   0147E 1219BE               lcall   initsio                 ;voor debug
     267      75   01481 7586FF               mov     p0_dir,#0ffh            ;poort 1 als output
     268      76   01484 75B1FF               mov     p3_dir,#0ffh            ;poort 3 als output
     269      77   01487 C2B2                 clr     CE                      ;standaart laag houden
     270      78   01489 D2B0                 setb    WR                      ;standaart hoog maken
     271      79   0148B D2B1                 setb    RD                      ;standaart hoog maken
     272      80   0148D D280                 setb    FS                      ;font op 6*8 zetten
     273      81   0148F C281                 clr     RESET                   ;reseten van scherm
     274      82   01491 12179E               lcall   delay1ms
     275      83   01494 D281                 setb    RESET                   ;reset terug af zetten
     276      84   01496 121456               lcall   statusCheck             ;initiele status check uitvoeren
     277      85   01499 C217                 clr     POSX                    ;X positie op 0 zetten
     278      86   0149B C218                 clr     POSY                    ;Y positie op 0 zetten
     279      87   0149D                  
     280      88   0149D                      ;Mode set
     281      89   0149D 751280               mov     COMANDREG,#10000000b
     282      90   014A0 121551               lcall   comandWrite
     283      91   014A3                  
     284      92   014A3                      ;Graphics home address
     285      93   014A3 751100               mov     DATAREG,#00h
     286      94   014A6 121504               lcall   dataWrite
     287      95   014A9 751100               mov     DATAREG,#00h
     288      96   014AC 121504               lcall   dataWrite
     289      97   014AF 751242               mov     COMANDREG,#42h
     290      98   014B2 121551               lcall   comandWrite
     291      99   014B5                  
     292     100   014B5                      ;Graphics area set
     293     101   014B5 751128               mov     DATAREG,#28h
     294     102   014B8 121504               lcall   dataWrite
     295     103   014BB 751100               mov     DATAREG,#00h
     296     104   014BE 121504               lcall   dataWrite
     297     105   014C1 751243               mov     COMANDREG,#43h
     298     106   014C4 121551               lcall   comandWrite
     299     107   014C7                  
     300     108   014C7                      ;text home address
     301     109   014C7 751100               mov     DATAREG,#00h
     302     110   014CA 121504               lcall   dataWrite
     303     111   014CD 75110A               mov     DATAREG,#0ah
     304     112   014D0 121504               lcall   dataWrite
     305     113   014D3 751240               mov     COMANDREG,#40h
     306     114   014D6 121551               lcall   comandWrite
     307     115   014D9                  
     308     116   014D9                      ;text area set
     309     117   014D9 751128               mov     DATAREG,#28h
     310     118   014DC 121504               lcall   dataWrite
     311     119   014DF 751100               mov     DATAREG,#00h
     312     120   014E2 121504               lcall   dataWrite
     313     121   014E5 751241               mov     COMANDREG,#41h
     314     122   014E8 121551               lcall   comandWrite
     315     123   014EB                  
     316     124   014EB                      ;adres data pointer
     317     125   014EB 751100               mov     DATAREG,#00h            ;lower address
     318     126   014EE 121504               lcall   dataWrite
     319     127   014F1 751100               mov     DATAREG,#00h
     320     128   014F4 121504               lcall   dataWrite
     321     129   014F7 751224               mov     COMANDREG,#24h
     322     130   014FA 121551               lcall   comandWrite
     323     131   014FD                  
     324     132   014FD                      ;Display mode
     325     133   014FD 751290               mov     COMANDREG,#10010000b
     326     134   01500 121551               lcall   comandWrite
     327     135   01503                  
     328     136   01503 22               ret
     329     137   01504                  
     330     138   01504                  ;------------------------------------------------------------------
     331     139   01504                  ;Data naar het schem sturen
     332     140   01504                  ;-DATAREG
     333     141   01504                  ;------------------------------------------------------------------
     334     142   01504                  DataWrite:
     335     143   01504 C0E0                 push    acc
     336     144   01506 C0D0                 push    psw
     337     145   01508 121456               lcall   statusCheck             ;status checken
     338     146   0150B 8511C8               mov     p4_data,DATAREG         ;zet de data op de bus
     339     147   0150E C2B3                 clr     CD
     340     148   01510 00                   nop
     341     149   01511 C2B0                 clr     WR
     342     150   01513 00                   nop
     343     151   01514 D2B0                 setb    WR
     344     152   01516 D0D0                 pop     psw
     345     153   01518 D0E0                 pop     acc
     346     154   0151A 22               ret
     347     155   0151B                  
     348     156   0151B                  dataAutoWrite:
     349     157   0151B C0E0                 push    acc
     350     158   0151D C0D0                 push    psw
     351     159   0151F                  dataAutoWriteStatus:
     352     160   0151F 121456               lcall   statusCheck             ;status checken
     353     161   01522 E510                 mov     a,STA
     354     162   01524 5404                 anl     a,#04h                  ;sta 2 nakijken
     355     163   01526 B404F6               cjne    a,#04h,dataAutoWriteStatus
     356     164   01529 8511C8               mov     p4_data,DATAREG         ;zet de data op de bus
     357     165   0152C C2B3                 clr     CD
     358     166   0152E 00                   nop
     359     167   0152F C2B0                 clr     WR
     360     168   01531 00                   nop
     361     169   01532 D2B0                 setb    WR
     362     170   01534 D0D0                 pop     psw
     363     171   01536 D0E0                 pop     acc
     364     172   01538 22               ret
     365     173   01539                  
     366     174   01539                  ;------------------------------------------------------------------
     367     175   01539                  ;data van het scherm inlezen
     368     176   01539                  ;-DATAREG
     369     177   01539                  ;------------------------------------------------------------------
     370     178   01539                  DataRead:
     371     179   01539 C0E0                 push    acc
     372     180   0153B C0D0                 push    psw
     373     181   0153D 121456               lcall   statusCheck             ;status checken
     374     182   01540 75C900               mov     p4_dir,#000h            ;p4 als ingang
     375     183   01543 C2B3                 clr     CD
     376     184   01545 C2B1                 clr     RD
     377     185   01547 00                   nop                             ;wachten
     378     186   01548 00                   nop
     379     187   01549 85C811               mov     DATAREG,p4_data         ;data inlezeen van scherm
     380     188   0154C D0D0                 pop     psw
     381     189   0154E D0E0                 pop     acc
     382     190   01550 22               ret
     383     191   01551                  
     384     192   01551                  ;------------------------------------------------------------------
     385     193   01551                  ;comando naar het scherrm sturen
     386     194   01551                  ;-COMANDREG
     387     195   01551                  ;------------------------------------------------------------------
     388     196   01551                  ComandWrite:
     389     197   01551 C0E0                 push    acc
     390     198   01553 C0D0                 push    psw
     391     199   01555 121456               lcall   statusCheck             ;status checken
     392     200   01558 8512C8               mov     p4_data,COMANDREG       ;comando op de bus zetten
     393     201   0155B D2B3                 setb    CD
     394     202   0155D C2B0                 clr     WR
     395     203   0155F 00                   nop
     396     204   01560 D2B0                 setb    WR
     397     205   01562 D0D0                 pop     psw
     398     206   01564 D0E0                 pop     acc
     399     207   01566 22               ret
     400     208   01567                  
     401     209   01567                  ;------------------------------------------------------------------
     402     210   01567                  ;debug info op seriele poort zetten
     403     211   01567                  ;-r0
     404     212   01567                  ;------------------------------------------------------------------
     405     213   01567                  debug:
     406     214   01567 C0E0                 push    acc
     407     215   01569 C0D0                 push    psw
     408     216   0156B 740D                 mov     a,#0dh
     409     217   0156D 1219F6               lcall   siooutchar
     410     218   01570 E8                   mov     a,r0
     411     219   01571 121A12               lcall   siooutbyte
     412     220   01574 740A                 mov     a,#0ah
     413     221   01576 1219F6               lcall   siooutchar
     414     222   01579 D0D0                 pop     psw
     415     223   0157B D0E0                 pop     acc
     416     224   0157D 22               ret
     417     225   0157E                  
     418     226   0157E                  ;------------------------------------------------------------------
     419     227   0157E                  ;Het scherm leeg maken
     420     228   0157E                  ;------------------------------------------------------------------
     421     229   0157E                  clearScreen:
     422     230   0157E C0E0                 push    acc
     423     231   01580 C0D0                 push    psw
     424     232   01582 7515FF               mov     clrL,#ffh               ;255 keer doolopen
     425     233   01585 75160F               mov     clrH,#0fh               ;16 keer doorlopen
     426     234   01588                      ;Mode set
     427     235   01588 751280               mov     COMANDREG,#10000000b    ;OR mode
     428     236   0158B 121551               lcall   comandWrite
     429     237   0158E                      ;Display mode
     430     238   0158E 75129C               mov     COMANDREG,#10011100b    ;gafisch en tekst aan zetten
     431     239   01591 121551               lcall   comandWrite
     432     240   01594                      ;auto write mode
     433     241   01594 7512B0               mov     COMANDREG,#b0h
     434     242   01597 121551               lcall   comandWrite
     435     243   0159A                  lus2400:
     436     244   0159A 751100               mov     DATAREG,#000h
     437     245   0159D 12151B               lcall   dataAutoWrite
     438     246   015A0 D515F7               djnz    clrL,lus2400
     439     247   015A3 7515FF               mov     clrL,#ffh
     440     248   015A6 D516F1               djnz    clrH,lus2400
     441     249   015A9                      ;data auto read af zetten
     442     250   015A9 7512B2               mov     COMANDREG,#b2h
     443     251   015AC 121551               lcall   comandWrite
     444     252   015AF                  
     445     253   015AF                      ;adres data pointer resetten
     446     254   015AF 751100               mov     DATAREG,#00h            ;lower address
     447     255   015B2 121504               lcall   dataWrite
     448     256   015B5 751100               mov     DATAREG,#00h
     449     257   015B8 121504               lcall   dataWrite
     450     258   015BB 751224               mov     COMANDREG,#24h
     451     259   015BE 121551               lcall   comandWrite
     452     260   015C1 D0E0                 pop     acc
     453     261   015C3 D0D0                 pop     psw
     454     262   015C5 22               ret
     455     263   015C6                  
     456     264   015C6                  ;------------------------------------------------------------------
     457     265   015C6                  ;encoders initializeren
     458     266   015C6                  ;------------------------------------------------------------------
     459     267   015C6                  initRotary:
     460     268   015C6 C0E0                 push    acc
     461     269   015C8 C0D0                 push    psw
     462     270   015CA 75A100               mov     p2_dir,#000h            ;poort 2 als input zetten
     463     271   015CD 85A013               mov     ROTARY,p2_data          ;de waarde van de encoders bewaren
     464     272   015D0 D0D0                 pop     psw
     465     273   015D2 D0D0                 pop     psw
     466     274   015D4 22               ret
     467     275   015D5                  
     468     276   015D5                  ;------------------------------------------------------------------
     469     277   015D5                  ;lees de encoders in
     470     278   015D5                  ;------------------------------------------------------------------
     471     279   015D5                  
     472     280   015D5                  
     473     281   015D5                  readRotary:
     474     282   015D5 C0E0                 push    acc
     475     283   015D7 C0D0                 push    psw
     476     284   015D9 20A205               jb      SW1,RotaryNext1         ;drukknop van encoder 1 lezen
     477     285   015DC 7801                 mov     r0,#01h
     478     286   015DE 121567               lcall   debug
     479     287   015E1                  RotaryNext1:
     480     288   015E1 20A705               jb     SW2,RotaryNext2          ;drukknop van encoder 2 lezen
     481     289   015E4 7802                 mov     r0,#02h
     482     290   015E6 121567               lcall   debug
     483     291   015E9                  RotaryNext2:
     484     292   015E9 30A410               jnb     R1A,RotaryNext3
     485     293   015EC 30A308               jnb     R1B,CCW
     486     294   015EF 7804                 mov     R0,#04h
     487     295   015F1 121567               lcall   debug
     488     296   015F4 1215FC               lcall   RotaryNext3
     489     297   015F7                  CCW:
     490     298   015F7 7805                 mov     R0,#05h
     491     299   015F9 121567               lcall   debug
     492     300   015FC                  RotaryNext3:
     493     301   015FC D0D0                 pop     psw
     494     302   015FE D0E0                 pop     acc
     495     303   01600 22               ret
     496     304   01601                  
     497     305   01601                  ;------------------------------------------------------------------
     498     306   01601                  ;laat start menu zien
     499     307   01601                  ;------------------------------------------------------------------
     500     308   01601                  StartMenu:
     501     309   01601 C0E0                 push    acc
     502     310   01603 C0D0                 push    psw
     503     311   01605                  
     504     312   01605 D0D0                 pop     psw
     505     313   01607 D0E0                 pop     acc
     506     314   01609 22               ret
     507     315   0160A                  
     508     316   0160A                  
     509     317   0160A                  
     510     318   0160A                  
     511     319   0160A                  
     512     320   0160A                  
xcez1.inc 
     514       1   0160A                  ;*******************************************************************************
     515       2   0160A                  ;
     516       3   0160A                  ; xcez1.inc is the registerfile/driver package for the XC888 micrcontroller from Infineon.
     517       4   0160A                  ;
     518       5   0160A                  ; The file contains drivers for various hardware and math applications.
     519       6   0160A                  ; In addition all register declarations are added.
     520       7   0160A                  ;
     521       8   0160A                  ; WARNING:!!!!!!!
     522       9   0160A                  ; INCLUDE THIS FILE AT THE END OF THE USER PROGRAM
     523      10   0160A                  ;
     524      11   0160A                  ; Written by Roggemans M. (MGM) 07/2011 v0.0
     525      12   0160A                  ;
     526      13   0160A                  ;*******************************************************************************
     527      14   0160A                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     528      15   0160A                  ;
     529      16   0160A                  ; xcez is een board package driver voor het XC888 SBC bord van MGM/dp.
     530      17   0160A                  ;
     531      18   0160A                  ; De driver bevat subroutines die toelaten de hardware van het SBC bord op een
     532      19   0160A                  ; eenvoudige manier te gebruiken:
     533      20   0160A                  ;
     534      21   0160A                  ; standaard I/O:
     535      22   0160A                  ;      initdipswitch        klaar zetten poort 4 voor gebruik met de dipswitch
     536      23   0160A                  ;      initftoetsen         klaar zetten 4 functieschakelaars onderaan scherm
     537      24   0160A                  ;      initleds             klaar zetten LED's als outputs
     538      25   0160A                  ;
     539      26   0160A                  ; I2C interface (minimale interface op 100kbit/s) enkel master mode!!
     540      27   0160A                  ;      initiic              klaar zetten iic interface
     541      28   0160A                  ;      iicstart             genereren van een startconditie op iic poort
     542      29   0160A                  ;      iicstop              genereren stop conditie op iic poort
     543      30   0160A                  ;      iicinbyteack         lezen van 1 byte met ack (accu=output)
     544      31   0160A                  ;      iicinbytenack        lezen van 1 byte met nack (accu=output)
     545      32   0160A                  ;      iicoutbyte           schrijven van 1 byte (accu=input, c=waarde ack bit slave)
     546      33   0160A                  ;
     547      34   0160A                  ; LCD interace
     548      35   0160A                  ;      initlcd              klaar zetten LCD voor gebruik (incl i2c init)
     549      36   0160A                  ;      lcdoutchar           schrijven van ascii code (accu=input)
     550      37   0160A                  ;      lcdoutbyte           schrijven hex waarde accu naar LCD
     551      38   0160A                  ;      lcdoutnib            afdrukken 4 laagste bits accu op LCD
     552      39   0160A                  ;      lcdoutmsga           afdrukken ascii string @dptr, tot 000h code
     553      40   0160A                  ;      lcdlighton           backlight aan
     554      41   0160A                  ;      lcdlightoff          backlight uit
     555      42   0160A                  ;      lcdbuzon             buzzer aan
     556      43   0160A                  ;      lcdbuzof             buzzer uit
     557      44   0160A                  ;
     558      45   0160A                  ; Serile interface (via USB stekker!!)
     559      46   0160A                  ;      initsio              klaar zetten serile poort 9600 baud
     560      47   0160A                  ;      siooutchar           afdrukken ascii code (accu=input)
     561      48   0160A                  ;      siooutbyte           afdrkken getal in accu
     562      49   0160A                  ;      siooutnib            afdrukken 4 laagste bits accu
     563      50   0160A                  ;      siooutmsga           afdrukken ascii string @dptr tot 000h code
     564      51   0160A                  ;      sioinchar            inlezen van 1 ascii code in de accu
     565      52   0160A                  ;      sioinbufa            inlezen van ascii buffer vanaf adres strtbuf, max 20h karakters!
     566      53   0160A                  ;
     567      54   0160A                  ; ADC
     568      55   0160A                  ;      initadc              klaar zetten ADC voor minimaal gebruik
     569      56   0160A                  ;      adclm335             uitlezen lm35 (a-b) bevat resultaat
     570      57   0160A                  ;      adcpotmeter          uitlezen van de potmeter (a-b) bevat resultaat
     571      58   0160A                  ;
     572      59   0160A                  ; Arithmetic:
     573      60   0160A                  ;      mul16                vermenigvuldigen 2 16 bit getallen
     574      61   0160A                  ;      mul32                vermenigvuldigen 2 32 bit getallen
     575      62   0160A                  ;      div16                delen 2 16 bit getallen
     576      63   0160A                  ;      div32                delen 2 32 bit getallen
     577      64   0160A                  ;      add16                optellen 2 16 bit getallen
     578      65   0160A                  ;      add32                optellen 2 32 bit getallen
     579      66   0160A                  ;      sub16                verschil 2 16 bit getallen
     580      67   0160A                  ;      sub32                verschil 2 32 bit getallen
     581      68   0160A                  ;      hexbcd8              omvormen 8 bit hex naar bcd
     582      69   0160A                  ;      hexbcd16             omvormen 16 bit hex naar bcd
     583      70   0160A                  ;      bcdhex8              omvormen 8 bit bcd naar hex
     584      71   0160A                  ;      bcdhex16             omvormen 16 bit bcd naar hex
     585      72   0160A                  ;
     586      73   0160A                  ; Diverse
     587      74   0160A                  ;      delaya0k05s          tijdsvertraging (waarde in accu)*0,05s
     588      75   0160A                  ;      delay1ms             tijdsverraging 1 milliseconde
     589      76   0160A                  ;      delay10us            tijdsvertraging 10 microseconde
     590      77   0160A                  ;      XCsw2xtal            overschakelen rc naar kristal (Pauwels Danny)
     591      78   0160A                  ;	mapregs 		selecteer de SFR's in de mapped area
     592      79   0160A                  ;	nomapregs            selecteer de SFR's in de non-mapped area
     593      80   0160A                  ;
     594      81   0160A                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     595      82   0160A                  ; LET OP!!!!
     596      83   0160A                  ; Voor je de routines gebruikt ga in de betreffende header na wat het registergebruik is,
     597      84   0160A                  ; hoe parameters doorgegeven worden, en wat de beperkingen zijn!!
     598      85   0160A                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     599      86   0160A                  ;
     600      87   0160A                  ; Geschreven door Roggemans M. (MGM) xcbpd0.inc   07/2010
     601      88   0160A                  ;
     602      89   0160A                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     603      90   0160A                  
     604      91   0160A                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     605      92   0160A                  ;
     606      93   0160A                  ; initdipswitch      is een subroutine die de pinnen van poort 4 insteld als input met
     607      94   0160A                  ; pull-up weerstanden ingeschakeld. Hierdoor kunnen schakelaars gebruikt worden naar
     608      95   0160A                  ; massa zonder extra weerstanden.
     609      96   0160A                  ;
     610      97   0160A                  ; Gebruikt geen registers
     611      98   0160A                  ;
     612      99   0160A                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     613     100   0160A                  
     614     101   0160A C08F             initdipswitch:push   syscon0              ;juiste map selecteren
     615     102   0160C 758F04                         mov    syscon0,#004h
     616     103   0160F C0B2                           push   port_page            ;tijdelijk bewaren zodat we dat kunnen herstellen
     617     104   01611 75B201                         mov    port_page,#001h      ;selecteer poort page 1
     618     105   01614 75C8FF                         mov    p4_pudsel,#0ffh      ;selecteer pull_up device
     619     106   01617 75C9FF                         mov    p4_puden,#0ffh       ;selectie inschakelen
     620     107   0161A 75B200                         mov    port_page,#000h      ;pagina 0 selecteren
     621     108   0161D 75C900                         mov    p4_dir,#000h         ;poort 4 als input schakelen
     622     109   01620 D0B2                           pop    port_page            ;herstellen in oorspronkelijke staat
     623     110   01622 D08F                           pop    syscon0              ;pagina terug herstellen
     624     111   01624 22                             ret
     625     112   01625                  
     626     113   01625                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     627     114   01625                  ;
     628     115   01625                  ; initftoetsen       is een routine die de 4 functieschakelaars onder het LCD display
     629     116   01625                  ; klaar zet voor gebruik met een schakelaar naar massa. De overige 4 pinnen van poort
     630     117   01625                  ; 2 behouden hun originele instelling.
     631     118   01625                  ;
     632     119   01625                  ; Gebruikt geen registers
     633     120   01625                  ;
     634     121   01625                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     635     122   01625                  
     636     123   01625 C08F             initftoetsen: push   syscon0              ;juiste map selecteren
     637     124   01627 758F04                         mov    syscon0,#004h
     638     125   0162A C0B2                           push   port_page            ;tijdelijk bewaren zodat we dat kunnen herstellen
     639     126   0162C 75B201                         mov    port_page,#001h      ;selecteer poort page 1
     640     127   0162F 43A00F                         orl    p2_pudsel,#00fh      ;selecteer pull_up device (onderste 4 pinnen)
     641     128   01632 43A10F                         orl    p2_puden,#00fh       ;selectie inschakelen (onderste 4 pinnen)
     642     129   01635 75B200                         mov    port_page,#000h      ;pagina 0 selecteren
     643     130   01638 53A1F0                         anl    p2_dir,#0f0h         ;input drivers activeren (onderste 4 pinnen)
     644     131   0163B D0B2                           pop    port_page            ;herstellen in oorspronkelijke staat
     645     132   0163D D08F                           pop    syscon0              ;pagina terug herstellen
     646     133   0163F 22                             ret
     647     134   01640                  
     648     135   01640                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     649     136   01640                  ;
     650     137   01640                  ; initleds           is een routine die de poort 3 als output schakeld. De LED's
     651     138   01640                  ; worden gedoofd (actief laag om ze te laden branden).
     652     139   01640                  ;
     653     140   01640                  ; Gebruikt geen registers
     654     141   01640                  ;
     655     142   01640                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     656     143   01640                  
     657     144   01640                  
     658     145   01640 C08F             initleds:     push   syscon0              ;juiste map selecteren
     659     146   01642 758F04                         mov    syscon0,#004h
     660     147   01645 C0B2                           push   port_page            ;tijdelijk bewaren zodat we dat kunnen herstellen
     661     148   01647 75B200                         mov    port_page,#000h      ;selecteer poort page 0
     662     149   0164A 75B1FF                         mov    p3_dir,#0ffh         ;poort 3 als output schakelen
     663     150   0164D D0B2                           pop    port_page            ;herstellen in oorspronkelijke staat
     664     151   0164F D08F                           pop    syscon0              ;pagina terug herstellen
     665     152   01651 22                             ret
     666     153   01652                  
     667     154   01652                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     668     155   01652                  ;
     669     156   01652                  ; initiic            is een subroutine die de pinnen p0.7 (sda) en p0.3 (scl) klaar zet
     670     157   01652                  ; voor gebruik als IIC bus. De andere poortpinnen worden niet aangepast
     671     158   01652                  ; scl wordt als oc output geschakeld met data waarde 1 (bus in rust)
     672     159   01652                  ; sda wordt als input geschakeld
     673     160   01652                  ;
     674     161   01652                  ; LET OP!!
     675     162   01652                  ; Dit is een IIC bus met beperkte mogelijkheden:
     676     163   01652                  ; -vaste communicatiesnleheid van 100kbit/s
     677     164   01652                  ; -enkel master mode
     678     165   01652                  ; -enkel 7 bit adressering
     679     166   01652                  ; -geen klok stretching
     680     167   01652                  ;
     681     168   01652                  ; Gebruikt geen registers
     682     169   01652                  ;
     683     170   01652                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     684     171   01652                  
     685     172   01652                  sda           bit    p0_data.7            ;pin gebruikt als sda
     686     173   01652                  scl           bit    p0_data.3            ;pin gebruikt als scl
     687     174   01652                  sdaout        equ    10000000b            ;masker om sda als output te schakelen
     688     175   01652                  sdain         equ    01111111b            ;masker om sda als input te schakelen
     689     176   01652                  
     690     177   01652 C08F             initiic:      push   syscon0              ;juiste map selecteren
     691     178   01654 758F04                         mov    syscon0,#004h
     692     179   01657 C0B2                           push   port_page
     693     180   01659 75B200                         mov    port_page,#000h      ;pagina 0 selecteren
     694     181   0165C D287                           setb   sda                  ;data op 1 zetten (ruststand iic)
     695     182   0165E D283                           setb   scl                  ;klok op 1 zetten (ruststand iic)
     696     183   01660 75B203                         mov    port_page,#003h      ;p0_od toegankelijk maken
     697     184   01663 D283                           setb   scl                  ;klok werkt als od
     698     185   01665 D287                           setb   sda                  ;sda werkt als od
     699     186   01667 75B200                         mov    port_page,#000h      ;terug pagina 0 selecteren
     700     187   0166A 438608                         orl    p0_dir,#00001000b    ;scl als output selecteren
     701     188   0166D 53867F                         anl    p0_dir,#01111111b    ;sda als input selecteren
     702     189   01670 D0B2                           pop    port_page            ;pagina herstellen
     703     190   01672 D08F                           pop    syscon0              ;map herstellen
     704     191   01674 22                             ret
     705     192   01675                  
     706     193   01675                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     707     194   01675                  ;
     708     195   01675                  ; iicstart           is een subroutine die op de iic bus een start conditie opwekt.
     709     196   01675                  ; Bij de start conditie wordt eerst de scl laag gemaakt, dan de sda. Om de bittijd
     710     197   01675                  ; te garanderen volgt er een delay van 10us
     711     198   01675                  ;
     712     199   01675                  ; Gebruikt geen registers
     713     200   01675                  ;
     714     201   01675                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     715     202   01675                  
     716     203   01675 C08F             iicstart:     push   syscon0              ;map bewaren
     717     204   01677 758F04                         mov    syscon0,#004h        ;hoofdmap selecteren
     718     205   0167A C0B2                           push   port_page            ;pagina bewaren
     719     206   0167C 75B200                         mov    port_page,#000h      ;hier zit alles wat we nodig hebben
     720     207   0167F D283                           setb   scl                  ;zeker zijn dat we vanuit ruststand vertrekken
     721     208   01681 D287                           setb   sda                  ;idem
     722     209   01683 438680                         orl    p0_dir,#sdaout       ;pin als output schakelen
     723     210   01686 121776                         lcall  delay10us            ;
     724     211   01689 C287                           clr    sda                  ;data laag
     725     212   0168B 121776                         lcall  delay10us
     726     213   0168E C283                           clr    scl                  ;dan klok laag
     727     214   01690 121776                         lcall  delay10us            ;bit lang genoeg maken
     728     215   01693 D0B2                           pop    port_page            ;registers herstellen
     729     216   01695 D08F                           pop    syscon0
     730     217   01697 22                             ret
     731     218   01698                  
     732     219   01698                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     733     220   01698                  ;
     734     221   01698                  ; iicstop            is een subroutine die een stop conditie op de IIC bus plaatst.
     735     222   01698                  ;
     736     223   01698                  ; Gebruikt geen registers
     737     224   01698                  ;
     738     225   01698                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     739     226   01698                  
     740     227   01698 C08F             iicstop:      push   syscon0              ;map bewaren
     741     228   0169A 758F04                         mov    syscon0,#004h        ;hoofd map selecteren
     742     229   0169D C0B2                           push   port_page            ;pagina bewaren
     743     230   0169F 75B200                         mov    port_page,#000h      ;hier zit alles wat we nodig hebben
     744     231   016A2 438680                         orl    p0_dir,#sdaout       ;pin als output schakelen
     745     232   016A5 C287                           clr    sda                  ;data naar omlaag
     746     233   016A7 121776                         lcall  delay10us
     747     234   016AA D283                           setb   scl                  ;klok naar 1
     748     235   016AC 121776                         lcall  delay10us            ;wachten
     749     236   016AF D287                           setb   sda                  ;idem data
     750     237   016B1 121776                         lcall  delay10us            ;
     751     238   016B4 53867F                         anl    p0_dir,#sdain        ;pin terug als input schakelen
     752     239   016B7 D0B2                           pop    port_page            ;registers herstellen
     753     240   016B9 D08F                           pop    syscon0
     754     241   016BB 22                             ret
     755     242   016BC                  
     756     243   016BC                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     757     244   016BC                  ;
     758     245   016BC                  ; iicoutbyte         is een subroutine die de data uit de accu naar buiten stuurt op
     759     246   016BC                  ; de iic bus. In totaal worden er 8 bits verzonden. Daarna wordt een negende klokpuls
     760     247   016BC                  ; gegenereerd om de ack bit in te lezen. Die wordt doorgegeven via de c vlag
     761     248   016BC                  ;
     762     249   016BC                  ; Gebruikt:
     763     250   016BC                  ;      a=inbut te verzenden byte (accu wordt niet vernietigd)
     764     251   016BC                  ;      cy=ack bit vanuit de slave
     765     252   016BC                  ;
     766     253   016BC                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     767     254   016BC                  
     768     255   016BC C0E0             iicoutbyte:   push   acc                  ;straks alles herstellen
     769     256   016BE C0F0                           push   b                    ;gebruikt als loopcounter
     770     257   016C0 C08F                           push   syscon0              ;map juist zetten
     771     258   016C2 758F04                         mov    syscon0,#004h        ;hofdmap selecteren
     772     259   016C5 C0B2                           push   port_page            ;poort pagina bewaren
     773     260   016C7 75B200                         mov    port_page,#000h      ;basispagina selecteren
     774     261   016CA 75F008                         mov    b,#008h              ;wordt gebruikt als loopcounter
     775     262   016CD 438680                         orl    p0_dir,#sdaout       ;poortpin als output zetten
     776     263   016D0 33               iicoutbyte1:  rlc    a                    ;hier gaan we dan (bit per bit naar buiten)
     777     264   016D1 9287                           mov    sda,c                ;op pin
     778     265   016D3 121776                         lcall  delay10us            ;wachten
     779     266   016D6 D283                           setb   scl                  ;puls genereren
     780     267   016D8 121776                         lcall  delay10us            ;ook hier wat tijd laten
     781     268   016DB C283                           clr    scl                  ;klok terug laag maken
     782     269   016DD D5F0F0                         djnz   b,iicoutbyte1        ;herhaal 8 keer
     783     270   016E0                  
     784     271   016E0                  ; de 8 bits zijn weg, nu de ack binnen nemen.
     785     272   016E0                  
     786     273   016E0 53867F                         anl    p0_dir,#sdain        ;pin als input schakelen
     787     274   016E3 121776                         lcall  delay10us            ;wachten tot data zeker beschikbaar
     788     275   016E6 D283                           setb   scl                  ;puls terug hoog
     789     276   016E8 A287                           mov    c,sda                ;inlezen en naar carry
     790     277   016EA 121776                         lcall  delay10us
     791     278   016ED C283                           clr    scl                  ;klok blijft laag achter
     792     279   016EF D0B2                           pop    port_page
     793     280   016F1 D08F                           pop    syscon0
     794     281   016F3 D0F0                           pop    b
     795     282   016F5 D0E0                           pop    acc
     796     283   016F7 22                             ret
     797     284   016F8                  
     798     285   016F8                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     799     286   016F8                  ;
     800     287   016F8                  ; iicinbyteack       is een subroutine die 1 byte inleest en als negendebit een ack
     801     288   016F8                  ; naar de slave zal zenden. De accu wordt gebruikt om de ingelezen data door te geven.
     802     289   016F8                  ;
     803     290   016F8                  ; Gebruikt:
     804     291   016F8                  ;      -de accu als output
     805     292   016F8                  ;
     806     293   016F8                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     807     294   016F8                  
     808     295   016F8 C08F             iicinbyteack: push   syscon0              ;huidige map bewaren
     809     296   016FA 758F04                         mov    syscon0,#004h        ;basispagina kiezen
     810     297   016FD C0B2                           push   port_page            ;pagina bewaren
     811     298   016FF 75B200                         mov    port_page,#000h      ;deze hebben we nodig
     812     299   01702 C0F0                           push   b                    ;wordt gebruikt als loopcounter
     813     300   01704 C0D0                           push   psw                  ;vlaggen bewaren
     814     301   01706 75F008                         mov    b,#008h              ;loopcounter laden
     815     302   01709 53867F                         anl    p0_dir,#sdain        ;pin als input schakelen
     816     303   0170C 121776           iicinbyteack1:lcall  delay10us
     817     304   0170F D283                           setb   scl                  ;klok hoog
     818     305   01711 A287                           mov    c,sda                ;pin inlezen
     819     306   01713 33                             rlc    a                    ;in accu shiften
     820     307   01714 121776                         lcall  delay10us
     821     308   01717 C283                           clr    scl                  ;klok terug laag
     822     309   01719 D5F0F0                         djnz   b,iicinbyteack1
     823     310   0171C 438680                         orl    p0_dir,#sdaout       ;pin als output schakelen
     824     311   0171F C287                           clr    sda                  ;ack genereren
     825     312   01721 121776                         lcall  delay10us
     826     313   01724 D283                           setb   scl
     827     314   01726 121776                         lcall  delay10us
     828     315   01729 C283                           clr    scl
     829     316   0172B 53867F                         anl    p0_dir,#sdain        ;pin terug als input schakelen
     830     317   0172E D0D0                           pop    psw                  ;registers herstellen
     831     318   01730 D0F0                           pop    b
     832     319   01732 D0B2                           pop    port_page
     833     320   01734 D08F                           pop    syscon0
     834     321   01736 22                             ret
     835     322   01737                  
     836     323   01737                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     837     324   01737                  ;
     838     325   01737                  ; iicinbytenack      is een subroutine die 1 byte inleest en als negendebit een nack
     839     326   01737                  ; naar de slave zal zenden. De accu wordt gebruikt om de ingelezen data door te geven.
     840     327   01737                  ;
     841     328   01737                  ; Gebruikt:
     842     329   01737                  ;      -de accu als output
     843     330   01737                  ;
     844     331   01737                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     845     332   01737                  
     846     333   01737 C08F             iicinbytenack:push   syscon0              ;huidige map bewaren
     847     334   01739 758F04                         mov    syscon0,#004h        ;basispagina kiezen
     848     335   0173C C0B2                           push   port_page            ;pagina bewaren
     849     336   0173E 75B200                         mov    port_page,#000h      ;deze hebben we nodig
     850     337   01741 C0F0                           push   b                    ;wordt gebruikt als loopcounter
     851     338   01743 C0D0                           push   psw                  ;vlaggen bewaren
     852     339   01745 75F008                         mov    b,#008h              ;loopcounter laden
     853     340   01748 53867F                         anl    p0_dir,#sdain        ;pin als input schakelen
     854     341   0174B 121776           iicinbytenack1:lcall  delay10us
     855     342   0174E D283                           setb   scl                  ;klok hoog
     856     343   01750 A287                           mov    c,sda                ;pin inlezen
     857     344   01752 33                             rlc    a                    ;in accu shiften
     858     345   01753 121776                         lcall  delay10us
     859     346   01756 C283                           clr    scl                  ;klok terug laag
     860     347   01758 D5F0F0                         djnz   b,iicinbytenack1     ;8 keer herhalen
     861     348   0175B 438680                         orl    p0_dir,#sdaout       ;pin als output schakelen
     862     349   0175E D287                           setb   sda                  ;nack genereren
     863     350   01760 121776                         lcall  delay10us
     864     351   01763 D283                           setb   scl
     865     352   01765 121776                         lcall  delay10us
     866     353   01768 C283                           clr    scl
     867     354   0176A 53867F                         anl    p0_dir,#sdain        ;pin terug als input schakelen
     868     355   0176D D0D0                           pop    psw                  ;registers herstellen
     869     356   0176F D0F0                           pop    b
     870     357   01771 D0B2                           pop    port_page
     871     358   01773 D08F                           pop    syscon0
     872     359   01775 22                             ret
     873     360   01776                  
     874     361   01776                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     875     362   01776                  ;
     876     363   01776                  ; delay10us          is een tijdsvertraging van 10us. Wordt gebruikt om de IIC bus
     877     364   01776                  ; te vertragen tot een maximale snelheid van 100kbit/s In realiteit zal de bussnelheid
     878     365   01776                  ; lager liggen. We houden immers geen rekening met de uitvoeringstijd van de routines,
     879     366   01776                  ; en de gebruikte delay is dubbel zo lang als stikt nodig (5us volstaat).
     880     367   01776                  ;
     881     368   01776                  ; Gebruikt geen registers
     882     369   01776                  ;
     883     370   01776                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     884     371   01776                  
     885     372   01776 C0E0             delay10us:    push   acc                  ;8*42ns=330ns
     886     373   01778 C0D0                           push   psw                  ;8*42ns=330ns
     887     374   0177A 75E01A                         mov    acc,#01ah            ;420ns
     888     375   0177D D5E0FD                         djnz   acc,$                ;420ns*aantal keer doorlopen
     889     376   01780 D0D0                           pop    psw                  ;8*42ns=330ns
     890     377   01782 D0E0                           pop    acc                  ;8*42ns=330ns
     891     378   01784 22                             ret                         ;165ns
     892     379   01785                  
     893     380   01785                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     894     381   01785                  ;
     895     382   01785                  ; delaya0k05s        is een tijdsvertraging van 0,05s maal het getal in de accu
     896     383   01785                  ;
     897     384   01785                  ; Gebruikt geen registers
     898     385   01785                  ;
     899     386   01785                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     900     387   01785                  
     901     388   01785 C0E0             delaya0k05s:  push   acc                  ;registers bewaren
     902     389   01787 C0D0                           push   psw
     903     390   01789 C0F0                           push   b
     904     391   0178B 75F032           delaya0k05s2: mov    b,#050               ;loopcounter
     905     392   0178E 12179E           delaya0k05s1: lcall  delay1ms
     906     393   01791 D5F0FA                         djnz   b,delaya0k05s1
     907     394   01794 D5E0F4                         djnz   acc,delaya0k05s2
     908     395   01797 D0F0                           pop    b                    ;registers herstellen
     909     396   01799 D0D0                           pop    psw
     910     397   0179B D0E0                           pop    acc
     911     398   0179D 22                             ret
     912     399   0179E                  
     913     400   0179E                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     914     401   0179E                  ;
     915     402   0179E                  ; Delay1ms           is een tijdsvertraging van 1 ms.
     916     403   0179E                  ;
     917     404   0179E                  ; Gebruikt geen registers
     918     405   0179E                  ;
     919     406   0179E                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     920     407   0179E                  
     921     408   0179E C0E0             delay1ms:     push   acc                  ;8*42ns=330ns
     922     409   017A0 C0D0                           push   psw                  ;8*42ns=330ns
     923     410   017A2 75E064                         mov    acc,#100             ;420ns
     924     411   017A5 121776           delay1ms1:    lcall  delay10us            ;10us
     925     412   017A8 D5E0FA                         djnz   acc,delay1ms1        ;420ns*aantal keer doorlopen
     926     413   017AB D0D0                           pop    psw                  ;8*42ns=330ns
     927     414   017AD D0E0                           pop    acc                  ;8*42ns=330ns
     928     415   017AF 22                             ret                         ;165ns
     929     416   017B0                  
     930     417   017B0                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     931     418   017B0                  ;
     932     419   017B0                  ; Dit is het LCD driver gedeelte. Het is gebaseerd op de LCD driver van MGM van 1994.
     933     420   017B0                  ; De driver is aangepast voor het XC888 SBC en kan gebruikt worden met standaard
     934     421   017B0                  ; alfanumerische display's. Het bord wordt gebruikt met een 2*20 of een 4*20 karakter
     935     422   017B0                  ; display. De basisroutines zijn bruikbaar voor alle types schermen (de
     936     423   017B0                  ; gebruiker moet dan wel zelf wakker liggen over cursorrouting).
     937     424   017B0                  ; De hogere routines gaan er van uit dat we een 4*20 karakter display gebruiken.
     938     425   017B0                  ; Parameters worden doorgegeven via de accu, b register, dptr of r0.
     939     426   017B0                  ; De routines gebruiken geen registers. Alle timing is voorzien voor een XC888 op
     940     427   017B0                  ; maximale snelheid. Loopt de controller trager, dan zullen de tijdsvertragingen te
     941     428   017B0                  ; lang zijn. De driver zal automatisch de IIC interface initialiseren omdat die gebruikt
     942     429   017B0                  ; wordt om de LCD te bereiken. Deze routines zijn NIET bruikbaar op andere hadware
     943     430   017B0                  ; systemen!!!!
     944     431   017B0                  ;
     945     432   017B0                  ; GESCHREVEN OP 02/1994 DOOR MARC ROGGEMANS (MGM) als lcd.drv
     946     433   017B0                  ;      -aangepast door Roggemans Marc (MGM) op 11/2004 voor ADuC800 kaart als
     947     434   017B0                  ;       aduclcd0.inc
     948     435   017B0                  ;      -aangepast door Roggemans Marc (MGM) op 11/11/2004
     949     436   017B0                  ;       aduclcd1.inc
     950     437   017B0                  ;      -aangepast door Roggemans Marc (MGM) op 07/2010 voor XC888 SBC met IIC bus
     951     438   017B0                  ;
     952     439   017B0                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     953     440   017B0                  
     954     441   017B0                  e             bit    b.1                  ;enable
     955     442   017B0                  rs            bit    b.0                  ;register select
     956     443   017B0                  backlight     bit    b.6                  ;bit waar backlight op zit
     957     444   017B0                  buzzer        bit    b.7                  ;bit waar buzzer op zit
     958     445   017B0                  
     959     446   017B0                  lcdport       EQU    b                    ;b regsiter wordt gebruikt als dummy poort
     960     447   017B0                  
     961     448   017B0                  cleardisp     EQU    001H                 ;LEEG MAKEN VAN HET SCHERM
     962     449   017B0                  cursathom     EQU    002H                 ;CURSOR OP DE EERSTE PLAATS ZETTEN
     963     450   017B0                  
     964     451   017B0                  entrymode     EQU    00000110B            ;CURSOR NAAR RECHTS, SCHERM VAST
     965     452   017B0                  displayon     EQU    00000001B            ;HOMEN EN CLEAR CURSOR
     966     453   017B0                  displayof     EQU    00001000B            ;DISPLAY OFF, CURSOR OFF
     967     454   017B0                  cursoroff     EQU    00001100B            ;DISPLAY ON ZONDER CURSOR
     968     455   017B0                  cursoronb     EQU    00001111B            ;CURSOR ON AND BLINK
     969     456   017B0                  cursoronn     EQU    00001110B            ;CURSOR ON NO BLINK
     970     457   017B0                  functions     EQU    00101000B            ;INTERFACE LENGTE EN KARAKTER FONT
     971     458   017B0                  cgram         EQU    01000000B            ;SELECTIE KARAKTER GENERATOR RAM
     972     459   017B0                  ddram         EQU    10000000B            ;SELECTIE DATA DISPLAY RAM
     973     460   017B0                  
     974     461   017B0                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     975     462   017B0                  ;
     976     463   017B0                  ; initlcd     zal het scherm resetten en initialiseren voor gebruik via een 4
     977     464   017B0                  ; bit bus. De routine zet het scherm klaar voor normaal gebruik: ingave van
     978     465   017B0                  ; links naar rechts zonder display shift, normale karakterfont. De kursor staat
     979     466   017B0                  ; aan als een knipperend lijntje onderaan de regel. Het scherm is leeg.
     980     467   017B0                  ;
     981     468   017B0                  ; registergebruik: geen
     982     469   017B0                  ;
     983     470   017B0                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     984     471   017B0                  
     985     472   017B0 C0E0             initlcd:      push   acc                  ;registers op stack plaatsen
     986     473   017B2 C0D0                           push   psw
     987     474   017B4 C0F0                           push   b                    ;wordt gebruikt als dummy lcd poort
     988     475   017B6 121652                         lcall  initiic              ;vermits de LCD gebruikt wordt via een IIC bus
     989     476   017B9 75F0FD                         mov    lcdport,#11111101b   ;poort in uitgangstoestand zetten
     990     477   017BC                                                            ;buzzer en baklight worden nu op 1 gezet
     991     478   017BC 121954                         lcall  porttolcd            ;routine die de data uit b naar het scherm stuurt
     992     479   017BF 7410                           mov    a,#010h       ;bij opstarten meer dan 30ms wachten
     993     480   017C1 12194D           initlcd1:     lcall  delay2ms
     994     481   017C4 D5E0FA                         djnz   acc,initlcd1
     995     482   017C7 7430                           mov    a,#00110000b  ;volgende drie schrijfbeurten zijn
     996     483   017C9 12190C                         lcall  outhnibc      ;een truuk om het display altijd opgestart
     997     484   017CC 12194D                         lcall  delay2ms      ;te krijgen.
     998     485   017CF 7430                           mov    a,#00110000b
     999     486   017D1 12190C                         lcall  outhnibc
    1000     487   017D4 12194D                         lcall  delay2ms
    1001     488   017D7 7430                           mov    a,#00110000b
    1002     489   017D9 12190C                         lcall  outhnibc
    1003     490   017DC 12194D                         lcall  delay2ms
    1004     491   017DF 7420                           mov    a,#00100000b  ;instellen 4 bit interface gebruiken
    1005     492   017E1 12190C                         lcall  outhnibc      ;hoge nibble naar het controleregister
    1006     493   017E4 12194D                         lcall  delay2ms      ;niet nodig volgens datasheet
    1007     494   017E7 7428                           mov    a,#functions  ;4 bit interface, twee lijnen 5*8 dots
    1008     495   017E9 1218F6                         lcall  outc          ;naar display
    1009     496   017EC 12194D                         lcall  delay2ms      ;is iets te lang volgens datasheet
    1010     497   017EF 740F                           mov    a,#cursoronb  ;display on cursor on and blink
    1011     498   017F1 1218F6                         lcall  outc
    1012     499   017F4 12194D                         lcall  delay2ms      ;ook deze delay is iets te lang
    1013     500   017F7 7401                           mov    a,#displayon  ;clear display and home cursor
    1014     501   017F9 1218F6                         lcall  outc
    1015     502   017FC 12194D                         lcall  delay2ms      ;deze wachttijd is bijna juist
    1016     503   017FF 7406                           mov    a,#entrymode  ;display klaar zetten normaal gebruik
    1017     504   01801 1218F6                         lcall  outc
    1018     505   01804 12194D                         lcall  delay2ms      ;wachten weer veel te lang
    1019     506   01807 D0F0                           pop    b             ;registers terug in orde zetten
    1020     507   01809 D0D0                           pop    psw
    1021     508   0180B D0E0                           pop    acc
    1022     509   0180D 22                             ret                  ;einde van de initialisatie
    1023     510   0180E                  
    1024     511   0180E                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1025     512   0180E                  ;
    1026     513   0180E                  ; lcdoutchar  zal de ascii code in de accu naar het lcd scherm sturen. De codes
    1027     514   0180E                  ; lager dan 020h worden als controlekarakters bekeken met volgende acties:
    1028     515   0180E                  ;      00dh   =cursor in de home positie
    1029     516   0180E                  ;      00ch   =form feed    =scherm leeg maken en cursor op lacatie 000h
    1030     517   0180E                  ;      00ah   =cursor op tweede lijn plaatsen
    1031     518   0180E                  ;      001h   =cursor on blink
    1032     519   0180E                  ;      002h   =cursor on, no blink
    1033     520   0180E                  ;      003h   =cursor off
    1034     521   0180E                  ;      080h-0ffh     =cursor plaatsen op dit adres -80h
    1035     522   0180E                  ;
    1036     523   0180E                  ; de routine gebruikt geen registers
    1037     524   0180E                  ;
    1038     525   0180E                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1039     526   0180E                  
    1040     527   0180E                  ; we gaan eerst na of het een ascii code betreft van een symbool. Als dat zo is,
    1041     528   0180E                  ; dan mag de data direct naar het dataregister van het scherm.
    1042     529   0180E                  ; Betreft een controle karakter, dan is een andere aanpak nodig (zie verder).
    1043     530   0180E                  
    1044     531   0180E                  lcdoutchar:
    1045     532   0180E C0E0             outcharlcd:   push   acc           ;registers op stack
    1046     533   01810 C0D0                           push   psw
    1047     534   01812 B48000                         cjne   a,#080h,outcharlcd1  ;hogere codes zijn adressen
    1048     535   01815 5046             outcharlcd1:  jnc    outcharlcd9   ;als geen carry dan is de code een address
    1049     536   01817 B42000                         cjne   a,#020h,outcharlcd2  ;hogere codes zijn ascii van symbolen
    1050     537   0181A 503C             outcharlcd2:  jnc    outcharlcd8   ;als geen carry dan ascii code naar display
    1051     538   0181C                  
    1052     539   0181C                  ; de code in de accu is geen adres of geen geldige ascii code van een symbool.
    1053     540   0181C                  ; Het is dus een opdracht die we moeten uitvoeren.
    1054     541   0181C                  
    1055     542   0181C B40C07                         cjne   a,#00ch,outcharlcd3  ;geen form feed, dan jump
    1056     543   0181F 7401                           mov    a,#cleardisp         ;scherm leegmaken
    1057     544   01821 1218F6                         lcall  outc                 ;naar controleregister
    1058     545   01824 803A                           sjmp   outcharlcde          ;afsluiten
    1059     546   01826                  
    1060     547   01826 B40107           outcharlcd3:  cjne   a,#001h,outcharlcd4  ;geen cursor on blink
    1061     548   01829 740F                           mov    a,#cursoronb         ;cursoron met blink
    1062     549   0182B 1218F6                         lcall  outc
    1063     550   0182E 8030                           sjmp   outcharlcde
    1064     551   01830                  
    1065     552   01830 B40207           outcharlcd4:  cjne   a,#002h,outcharlcd5  ;geen cursor on no blink
    1066     553   01833 740E                           mov    a,#cursoronn         ;cursoron no blink
    1067     554   01835 1218F6                         lcall  outc
    1068     555   01838 8026                           sjmp   outcharlcde
    1069     556   0183A                  
    1070     557   0183A B40307           outcharlcd5:  cjne   a,#003h,outcharlcd6  ;geen cursor off, dus afsluiten routine
    1071     558   0183D 740C                           mov    a,#cursoroff         ;cursor uitschakelen
    1072     559   0183F 1218F6                         lcall  outc
    1073     560   01842 801C                           sjmp   outcharlcde
    1074     561   01844                  
    1075     562   01844 B40D07           outcharlcd6:  cjne   a,#00dh,outcharlcd7  ;geen cursor home zonder clear scherm
    1076     563   01847 7402                           mov    a,#cursathom         ;cursor in home positie
    1077     564   01849 1218F6                         lcall  outc
    1078     565   0184C 8012                           sjmp   outcharlcde
    1079     566   0184E                  
    1080     567   0184E B40A0F           outcharlcd7:  cjne   a,#00ah,outcharlcde  ;line feed gevraagd (zet cursor op
    1081     568   01851                                                            ;tweede lijn
    1082     569   01851 74C0                           mov    a,#0c0h
    1083     570   01853 1218F6                         lcall  outc
    1084     571   01856 8008                           sjmp   outcharlcde
    1085     572   01858                  
    1086     573   01858                  ; dit label wordt uitgevoerd als de code in de accumulator een geldige ascii code
    1087     574   01858                  ; is. dit mag naar het data register.
    1088     575   01858                  
    1089     576   01858 1218BC           outcharlcd8:  lcall  outd          ;klaar
    1090     577   0185B 8003                           sjmp   outcharlcde   ;einde routine
    1091     578   0185D                  
    1092     579   0185D                  ; dit label wordt uitgevoerd als de code in de accu een adres is. Dit adres is
    1093     580   0185D                  ; eigenlijk 80 te groot. Dat komt echter goed uit als commando om een adrers te
    1094     581   0185D                  ; te schrijven.
    1095     582   0185D                  
    1096     583   0185D 1218F6           outcharlcd9:  lcall  outc          ;klaar
    1097     584   01860 D0D0             outcharlcde:  pop    psw           ;registers herstellen
    1098     585   01862 D0E0                           pop    acc
    1099     586   01864 22                             ret
    1100     587   01865                  
    1101     588   01865                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1102     589   01865                  ;
    1103     590   01865                  ; outniblcd     zal de lage nibble omzetten in een ascii code en die afdrukken
    1104     591   01865                  ; op het lcd scherm.
    1105     592   01865                  ;
    1106     593   01865                  ; de routine gebruikt geen registers
    1107     594   01865                  ;
    1108     595   01865                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1109     596   01865                  
    1110     597   01865                  lcdoutnib:
    1111     598   01865 C0E0             outniblcd:    push   acc           ;registers op stack zetten
    1112     599   01867 C0D0                           push   psw
    1113     600   01869 540F                           anl    a,#00fh       ;laagste 4 bits overhouden
    1114     601   0186B 2430                           add    a,#030h       ;omvormen naar ascii codes 0-9
    1115     602   0186D B43A00                         cjne   a,#03ah,outniblcd1   ;als groter dan dit nog 7 bijtellen
    1116     603   01870 4002             outniblcd1:   jc     outniblcde    ;als carry dan omzetting klaar
    1117     604   01872 2407                           add    a,#007h       ;omvormen naar hoofdletter
    1118     605   01874 1218BC           outniblcde:   lcall  outd          ;naar het scherm
    1119     606   01877 D0D0                           pop    psw
    1120     607   01879 D0E0                           pop    acc
    1121     608   0187B 22                             ret
    1122     609   0187C                  
    1123     610   0187C                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1124     611   0187C                  ;
    1125     612   0187C                  ; lcdoutbyte    zal de inhoud van de accu afdrukken op het lcd scherm.
    1126     613   0187C                  ;
    1127     614   0187C                  ; de routine gebruikt geen registers
    1128     615   0187C                  ;
    1129     616   0187C                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1130     617   0187C                  
    1131     618   0187C                  lcdoutbyte:
    1132     619   0187C C0E0             outbytelcd:   push   acc           ;registers op de stack zetten
    1133     620   0187E C0D0                           push   psw
    1134     621   01880 C4                             swap   a             ;bitjes omruilen
    1135     622   01881 121865                         lcall  outniblcd
    1136     623   01884 C4                             swap   a             ;nog eens
    1137     624   01885 121865                         lcall  outniblcd
    1138     625   01888 D0D0                           pop    psw
    1139     626   0188A D0E0                           pop    acc
    1140     627   0188C 22                             ret
    1141     628   0188D                  
    1142     629   0188D                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1143     630   0188D                  ;
    1144     631   0188D                  ; lcddispdptr   zal de inhoud van de dptr afdrukken op het lcd scherm
    1145     632   0188D                  ;
    1146     633   0188D                  ; de routine gebruikt geen registers
    1147     634   0188D                  ;
    1148     635   0188D                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1149     636   0188D                  
    1150     637   0188D                  lcddispdptr:
    1151     638   0188D C0E0             dispdptrlcd:  push   acc           ;registers bewaren op stack
    1152     639   0188F C0D0                           push   psw
    1153     640   01891 E583                           mov    a,dph         ;hoge deel eerst naar het scherm
    1154     641   01893 12187C                         lcall  outbytelcd
    1155     642   01896 E582                           mov    a,dpl         ;dan het lage deel
    1156     643   01898 12187C                         lcall  outbytelcd
    1157     644   0189B D0D0                           pop    psw
    1158     645   0189D D0E0                           pop    acc
    1159     646   0189F 22                             ret
    1160     647   018A0                  
    1161     648   018A0                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1162     649   018A0                  ;
    1163     650   018A0                  ; lcdoutmsga  zal een string ascii codes op het scherm plaatsen. Het startadres
    1164     651   018A0                  ; van de string staat in de dptr. De string wordt afgesloten met een 000h.
    1165     652   018A0                  ; De routine gebruikt outcharlcd voor het sturen van karakters naar het LCD
    1166     653   018A0                  ; scherm. Positionnering van de cursor en cursorcontrole kan in de ascii string
    1167     654   018A0                  ; opgenomen worden met de pseudo ascii codes (zie outcharlcd).
    1168     655   018A0                  ;
    1169     656   018A0                  ; de routine gebruikt geen registers
    1170     657   018A0                  ;
    1171     658   018A0                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1172     659   018A0                  
    1173     660   018A0                  lcdoutmsga:
    1174     661   018A0 C0E0             outmsgalcd:   push   acc           ;registers op de stack
    1175     662   018A2 C0D0                           push   psw
    1176     663   018A4 C083                           push   dph           ;ook de data pointer
    1177     664   018A6 C082                           push   dpl
    1178     665   018A8                  
    1179     666   018A8                  ;We lezen karakters uit code memory tot de 000h code gevonden wordt.
    1180     667   018A8                  
    1181     668   018A8 E4               outmsgalcd1:  clr    a             ;waarde zit in onze weg
    1182     669   018A9 93                             movc   a,@a+dptr     ;waarde lezen
    1183     670   018AA 6007                           jz     outmsgalcde   ;als 0 dan naar einde springen
    1184     671   018AC                  
    1185     672   018AC                  ; de code is niet 0 dus versturen met outchar
    1186     673   018AC                  
    1187     674   018AC 12180E                         lcall  outcharlcd    ;weg er mee
    1188     675   018AF A3                             inc    dptr          ;naar volgende ascii code wijzen
    1189     676   018B0 0218A8                         ljmp   outmsgalcd1   ;lus sluiten
    1190     677   018B3                  
    1191     678   018B3 D082             outmsgalcde:  pop    dpl           ;registers herstellen
    1192     679   018B5 D083                           pop    dph
    1193     680   018B7 D0D0                           pop    psw
    1194     681   018B9 D0E0                           pop    acc
    1195     682   018BB 22                             ret
    1196     683   018BC                  
    1197     684   018BC                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1198     685   018BC                  ;
    1199     686   018BC                  ; outd is een routine die naar het data register van het display een
    1200     687   018BC                  ; volledige byte stuurt.
    1201     688   018BC                  ;
    1202     689   018BC                  ; De routine gebruikt geen registers.
    1203     690   018BC                  ;
    1204     691   018BC                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1205     692   018BC                  
    1206     693   018BC C0E0             outd:         push   acc           ;registers op stack zetten
    1207     694   018BE C0D0                           push   psw
    1208     695   018C0 1218CC                         lcall  outhnibd      ;hoogste vier bits verzenden
    1209     696   018C3 C4                             swap   a             ;bitjes omruilen
    1210     697   018C4 1218CC                         lcall  outhnibd      ;naar het scherm sturen
    1211     698   018C7 D0D0                           pop    psw           ;registers terug herstellen
    1212     699   018C9 D0E0                           pop    acc
    1213     700   018CB 22                             ret
    1214     701   018CC                  
    1215     702   018CC                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1216     703   018CC                  ;
    1217     704   018CC                  ; outhnibd stuurt de hoge 4 bits van de accu naar het data register van het
    1218     705   018CC                  ; lcd scherm.
    1219     706   018CC                  ;
    1220     707   018CC                  ; de routine gebruikt geen registers.
    1221     708   018CC                  ;
    1222     709   018CC                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1223     710   018CC                  
    1224     711   018CC C0E0             outhnibd:     push   acc           ;registers op stack plaatsen
    1225     712   018CE C0D0                           push   psw
    1226     713   018D0 C0F0                           push   b             ;werkregister
    1227     714   018D2 12196D                         lcall  lcdtoport     ;lees de expander naar b register
    1228     715   018D5 D2F0                           setb   rs            ;controle lijn in orde
    1229     716   018D7 C2F1                           clr    e             ;deselectie display
    1230     717   018D9 54F0                           anl    a,#0f0h       ;hoogste 4 bits afzonderen
    1231     718   018DB 03                             rr     a             ;bits op juiste plaats zetten
    1232     719   018DC 03                             rr     a             ;voor b reg
    1233     720   018DD 53F0C3                         anl    b,#11000011b  ;bits laag maken, worden vervangen door data in a
    1234     721   018E0 42F0                           orl    b,a           ;bij elkaar voegen
    1235     722   018E2 121954                         lcall  porttolcd     ;naar expnder
    1236     723   018E5 D2F1                           setb   e             ;display enabelen
    1237     724   018E7 121954                         lcall  porttolcd
    1238     725   018EA C2F1                           clr    e             ;display deselecteren
    1239     726   018EC 121954                         lcall  porttolcd
    1240     727   018EF D0F0                           pop    b
    1241     728   018F1 D0D0                           pop    psw           ;registers herstellen
    1242     729   018F3 D0E0                           pop    acc
    1243     730   018F5 22                             ret
    1244     731   018F6                  
    1245     732   018F6                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1246     733   018F6                  ;
    1247     734   018F6                  ; outc is een routine die naar het controleregister van het display een
    1248     735   018F6                  ; volledige byte stuurt.
    1249     736   018F6                  ;
    1250     737   018F6                  ; De routine gebruikt geen registers.
    1251     738   018F6                  ;
    1252     739   018F6                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1253     740   018F6                  
    1254     741   018F6 C0E0             outc:         push   acc           ;registers op stack zetten
    1255     742   018F8 C0D0                           push   psw
    1256     743   018FA 12190C                         lcall  outhnibc      ;hoogste vier bits verzenden
    1257     744   018FD 12194D                         lcall  delay2ms      ;niet echt nodig
    1258     745   01900 C4                             swap   a             ;bitjes omruilen
    1259     746   01901 12190C                         lcall  outhnibc      ;naar het scherm sturen
    1260     747   01904 12194D                         lcall  delay2ms      ;altijd goed voor traagste commando
    1261     748   01907 D0D0                           pop    psw           ;registers terug herstellen
    1262     749   01909 D0E0                           pop    acc
    1263     750   0190B 22                             ret
    1264     751   0190C                  
    1265     752   0190C                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1266     753   0190C                  ;
    1267     754   0190C                  ; outhnibc stuurt de hoge 4 bits van de accu naar het controle register van het
    1268     755   0190C                  ; lcd scherm.
    1269     756   0190C                  ;
    1270     757   0190C                  ; de routine gebruikt geen registers.
    1271     758   0190C                  ;
    1272     759   0190C                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1273     760   0190C                  
    1274     761   0190C C0E0             outhnibc:     push   acc           ;registers op stack plaatsen
    1275     762   0190E C0D0                           push   psw
    1276     763   01910 C0F0                           push   b             ;werkregister
    1277     764   01912 12196D                         lcall  lcdtoport     ;lees de expander naar b register
    1278     765   01915 C2F0                           clr    rs            ;controle lijn in orde
    1279     766   01917 C2F1                           clr    e             ;deselectie display
    1280     767   01919 54F0                           anl    a,#0f0h       ;hoogste 4 bits afzonderen
    1281     768   0191B 03                             rr     a             ;bits op juiste plaats zetten
    1282     769   0191C 03                             rr     a             ;voor b reg
    1283     770   0191D 53F0C3                         anl    b,#11000011b  ;bits laag maken, worden vervangen door data in a
    1284     771   01920 42F0                           orl    b,a           ;bij elkaar voegen
    1285     772   01922 121954                         lcall  porttolcd     ;naar expnder
    1286     773   01925 D2F1                           setb   e             ;display enabelen
    1287     774   01927 121954                         lcall  porttolcd
    1288     775   0192A C2F1                           clr    e             ;display deselecteren
    1289     776   0192C 121954                         lcall  porttolcd
    1290     777   0192F D0F0                           pop    b
    1291     778   01931 D0D0                           pop    psw           ;registers herstellen
    1292     779   01933 D0E0                           pop    acc
    1293     780   01935 22                             ret
    1294     781   01936                  
    1295     782   01936                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1296     783   01936                  ;
    1297     784   01936                  ; BUILD0 IS EEN ROUTINE DIE DE KARAKTERGENERATOR RAM ZAL LADEN MET HET
    1298     785   01936                  ; BITPATROON VOOR 8 KARAKTERS. DE ROUTINE GEBRUIKT EEN BITMAP OP HET ADRES
    1299     786   01936                  ; IN DPTR. DE TABEL WORDT AFGESLOTEN DOOR EEN BYTE MET BIT 7=1. DE ROUTINE
    1300     787   01936                  ; GEBRUIKT DPTR, ACC, PSW EN ENKELE LCD.DRV ROUTINES. NA HET VULLEN VAN DE
    1301     788   01936                  ; DATA RAM WORDT OPNIEUW ADRES 0 VAN DE DISPLAY RAM GESELECTEERD. ER WORDT GEEN
    1302     789   01936                  ; DATA GESCHREVEN.
    1303     790   01936                  ;
    1304     791   01936                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1305     792   01936                  
    1306     793   01936 7440             BUILD:        MOV    A,#CGRAM      ;TOEGANG TOT KARAKTER GENERATOR RAM
    1307     794   01938 1218F6           BUILD1:       LCALL  OUTC          ;NAAR SCHERM VERSTUREN
    1308     795   0193B 7400             BUILD3:       MOV    A,#000H       ;ACCU OP NUL ZETTEN
    1309     796   0193D 93                             MOVC   A,@A+DPTR     ;EERSTE CODE UIT TABEL LEZEN
    1310     797   0193E 1218BC                         LCALL  OUTD          ;NAAR KARAKTER GENERATOR RAM STUREN
    1311     798   01941 20E703                         JB     ACC.7,BUILD2  ;ALS BIT 1 DAN EINDE
    1312     799   01944 A3                             INC    DPTR          ;NAAR VOLGENDE LOKATIE WIJZEN
    1313     800   01945 80F4                           SJMP   BUILD3
    1314     801   01947 7480             BUILD2:       MOV    A,#DDRAM      ;DATA DISPLAY RAM SELECTEREN
    1315     802   01949 1218F6                         LCALL  OUTC          ;NAAR KONTROLE REGISTER STUREN
    1316     803   0194C 22                             RET                  ;EINDE VAN DE ROUTINE
    1317     804   0194D                  
    1318     805   0194D                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1319     806   0194D                  ;
    1320     807   0194D                  ; Delay2ms is een vertragingsroutine van 2ms.
    1321     808   0194D                  ;
    1322     809   0194D                  ; De routine gebruikt geen registers.
    1323     810   0194D                  ;
    1324     811   0194D                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1325     812   0194D                  
    1326     813   0194D 12179E           delay2ms:     lcall  delay1ms
    1327     814   01950 12179E                         lcall  delay1ms
    1328     815   01953 22                             ret
    1329     816   01954                  
    1330     817   01954                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1331     818   01954                  ;
    1332     819   01954                  ; porttolcd          is een subroutine die de inhoud van het b register naar het lcd
    1333     820   01954                  ; scherm stuurt via de port expander.
    1334     821   01954                  ;
    1335     822   01954                  ; Gebruikt geen registers
    1336     823   01954                  ;
    1337     824   01954                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1338     825   01954                  
    1339     826   01954 C0E0             porttolcd:    push   acc           ;geen registers gebruiken
    1340     827   01956 C0D0                           push   psw           ;trekken ons niks aan van ack bit
    1341     828   01958 121675                         lcall  iicstart      ;vertrokken
    1342     829   0195B 7440                           mov    a,#01000000b  ;schrijven naar expander
    1343     830   0195D 1216BC                         lcall  iicoutbyte    ;weg er mee
    1344     831   01960 E5F0                           mov    a,b           ;data verzenden
    1345     832   01962 1216BC                         lcall  iicoutbyte
    1346     833   01965 121698                         lcall  iicstop       ;transactie sluiten
    1347     834   01968 D0D0                           pop    psw
    1348     835   0196A D0E0                           pop    acc
    1349     836   0196C 22                             ret
    1350     837   0196D                  
    1351     838   0196D                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1352     839   0196D                  ;
    1353     840   0196D                  ; lcdtoport          is een subroutine die de waarde van de expander uitleest naar
    1354     841   0196D                  ; het b regiser. Op die manier kunnen we de expander laten onthouden wat de waarde
    1355     842   0196D                  ; van buzzet en backlight is.
    1356     843   0196D                  ;
    1357     844   0196D                  ; Gebruikt b register
    1358     845   0196D                  ;
    1359     846   0196D                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1360     847   0196D                  
    1361     848   0196D C0E0             lcdtoport:    push   acc           ;geen registers gebruiken
    1362     849   0196F C0D0                           push   psw           ;trekken ons niks aan van ack bit
    1363     850   01971 121675                         lcall  iicstart      ;vertrokken
    1364     851   01974 7441                           mov    a,#01000001b  ;lezen van expander
    1365     852   01976 1216BC                         lcall  iicoutbyte    ;weg er mee
    1366     853   01979 121737                         lcall  iicinbytenack ;data inlezen
    1367     854   0197C 121698                         lcall  iicstop
    1368     855   0197F F5F0                           mov    b,a
    1369     856   01981 D0D0                           pop    psw
    1370     857   01983 D0E0                           pop    acc
    1371     858   01985 22                             ret
    1372     859   01986                  
    1373     860   01986                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1374     861   01986                  ;
    1375     862   01986                  ; lcdlighton         is een subroutine die de backlight inschakeld
    1376     863   01986                  ;
    1377     864   01986                  ; Gebruikt geen registers
    1378     865   01986                  ;
    1379     866   01986                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1380     867   01986                  
    1381     868   01986 C0F0             lcdlighton:   push   b
    1382     869   01988 12196D                         lcall  lcdtoport     ;expander lezen
    1383     870   0198B C2F6                           clr    b.6           ;licht aan doen
    1384     871   0198D 121954                         lcall  porttolcd     ;expander scrijven
    1385     872   01990 D0F0                           pop    b
    1386     873   01992 22                             ret
    1387     874   01993                  
    1388     875   01993                  
    1389     876   01993                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1390     877   01993                  ;
    1391     878   01993                  ; lcdlightoff        is een subroutine die de backlight uitschakeld
    1392     879   01993                  ;
    1393     880   01993                  ; Gebruikt geen registers
    1394     881   01993                  ;
    1395     882   01993                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1396     883   01993                  
    1397     884   01993 C0F0             lcdlightoff:  push   b
    1398     885   01995 12196D                         lcall  lcdtoport     ;expander lezen
    1399     886   01998 D2F6                           setb   b.6           ;licht uit doen
    1400     887   0199A 121954                         lcall  porttolcd     ;expander scrijven
    1401     888   0199D D0F0                           pop    b
    1402     889   0199F 22                             ret
    1403     890   019A0                  
    1404     891   019A0                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1405     892   019A0                  ;
    1406     893   019A0                  ; lcdbuzon           is een subroutine die de buzzer inschakeld
    1407     894   019A0                  ;
    1408     895   019A0                  ; Gebruikt geen registers
    1409     896   019A0                  ;
    1410     897   019A0                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1411     898   019A0                  
    1412     899   019A0 C0F0             lcdbuzon:     push   b
    1413     900   019A2 12196D                         lcall  lcdtoport     ;expander lezen
    1414     901   019A5 C2F7                           clr    b.7           ;buzzer aan doen
    1415     902   019A7 121954                         lcall  porttolcd     ;expander scrijven
    1416     903   019AA D0F0                           pop    b
    1417     904   019AC 22                             ret
    1418     905   019AD                  
    1419     906   019AD                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1420     907   019AD                  ;
    1421     908   019AD                  ; lcdbuzoff          is een subroutine die de buzzer uitschakeld
    1422     909   019AD                  ;
    1423     910   019AD                  ; Gebruikt geen registers
    1424     911   019AD                  ;
    1425     912   019AD                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1426     913   019AD                  
    1427     914   019AD C0F0             lcdbuzoff:    push   b
    1428     915   019AF 12196D                         lcall  lcdtoport     ;expander lezen
    1429     916   019B2 D2F7                           setb   b.7           ;buzzer aan doen
    1430     917   019B4 121954                         lcall  porttolcd     ;expander scrijven
    1431     918   019B7 D0F0                           pop    b
    1432     919   019B9 22                             ret
    1433     920   019BA                  
    1434     921   019BA                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1435     922   019BA                  ;
    1436     923   019BA                  ; Dit deel van de driver laat toe de USB verbinding met de PC te gebruiken als
    1437     924   019BA                  ; een standaard com poort op 9600 baud.
    1438     925   019BA                  ; De file laat toe om de seriele poort te gebruiken en biedt de standaard
    1439     926   019BA                  ; monitorroutines zoals die beschikbaar zijn in de MGM monitors voor 8051.
    1440     927   019BA                  ; De belangrijkste afwijking van de standaard routines is de initsio subroutine.
    1441     928   019BA                  ; Die laat toe om 9600 baud in te stellen. Dit zal enkel kunnen met het xtal
    1442     929   019BA                  ; ingeschakeld en met de CPU klok 24 Mhz. Het inschakelen van het XTAL gebeurt
    1443     930   019BA                  ; NIET door deze routine.
    1444     931   019BA                  ;
    1445     932   019BA                  ; Geschreven door Roggemans Marc (MGM) op 07/2010 v0
    1446     933   019BA                  ;
    1447     934   019BA                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1448     935   019BA                  
    1449     936   019BA                  blank         equ    020h          ;ascii code voor een blank
    1450     937   019BA                  xoff          equ    013h          ;ascii code xoff caracter (ctrl s)
    1451     938   019BA                  ff            equ    00ch          ;ascii code voor nieuw blad
    1452     939   019BA                  cr            equ    00dh          ;ascii code voor een wagenterugloop
    1453     940   019BA                  lf            equ    00ah          ;ascii code voor volgende lijn
    1454     941   019BA                  backsp        equ    008h          ;ascii code voor het bs karakter
    1455     942   019BA                  beep          equ    007h          ;ascii code voor een beep
    1456     943   019BA                  
    1457     944   019BA 08200800         wissen:       db     backsp,blank,backsp,000h    ;string wissen karakter
    1458     945   019BE                                                                          ;van het scherm
    1459     946   019BE                  
    1460     947   019BE                  strtbuf       equ     054h         ;start adres van de buffer
    1461     948   019BE                  endbuf        equ     07fh         ;laatst gebruikte locatie (kan cr bevatten)
    1462     949   019BE                  
    1463     950   019BE                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1464     951   019BE                  ;
    1465     952   019BE                  ; initsio zal de seriele poort klaar zetten voor gebruik. De baudrate is 9600.
    1466     953   019BE                  ;
    1467     954   019BE                  ; Gebruikt geen registers
    1468     955   019BE                  ;
    1469     956   019BE                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1470     957   019BE                  
    1471     958   019BE C0E0             initsio:      push   acc                  ;registers op de stack zetten
    1472     959   019C0 C08F                           push   syscon0              ;map bewaren
    1473     960   019C2 758F04                         mov    syscon0,#004h        ;hier zit al wat we nodig hebben
    1474     961   019C5 C0B2                           push   port_page            ;pagina op stack zetten
    1475     962   019C7 C0BF                           push   scu_page
    1476     963   019C9 75BF00                         mov    scu_page,#000h       ;pagina 0 system control regs
    1477     964   019CC                  ; eerst gaan we de pinnen van poort 1 juist zetten:
    1478     965   019CC                  ;      -p1.0 als input en alt1 selectie
    1479     966   019CC                  ;      -p1.1 als output en alt2 selectie
    1480     967   019CC                  
    1481     968   019CC 75B202                         mov    port_page,#002h      ;pagina 2 selecteren
    1482     969   019CF 5390FD                         anl    p1_altsel0,#11111101b
    1483     970   019D2 439001                         orl    p1_altsel0,#00000001b
    1484     971   019D5 5391FE                         anl    p1_altsel1,#11111110b
    1485     972   019D8 439102                         orl    p1_altsel1,#00000010b
    1486     973   019DB 75B200                         mov    port_page,#000h      ;pagina 0 selecteren
    1487     974   019DE 5391FE                         anl    p1_dir,#11111110b    ;p1.0=input
    1488     975   019E1 439102                         orl    p1_dir,#00000010b    ;p1.1=output
    1489     976   019E4                  
    1490     977   019E4                  ; Nu moet de baud rate generator ingesteld worden
    1491     978   019E4                  ; We gaan er van uit dat de systeemklok 24MHz is
    1492     979   019E4                  
    1493     980   019E4 759850                         mov    scon,#01010000b      ;UART initialiseren
    1494     981   019E7                  
    1495     982   019E7                  ; LET OP!!!!!!!!!!!!!! eerst BG laden, dan bcon, anders wordt BG waarde niet
    1496     983   019E7                  ; gebruikt!!
    1497     984   019E7                  
    1498     985   019E7 75BE9B                         mov    bg,#155              ;zie 12-13 in XC888 UM
    1499     986   019EA 75BD11                         mov    bcon,#00010001b
    1500     987   019ED D0BF                           pop    scu_page
    1501     988   019EF D0B2                           pop    port_page            ;alles terug herstellen
    1502     989   019F1 D08F                           pop    syscon0
    1503     990   019F3 D0E0                           pop    acc
    1504     991   019F5 22                             ret
    1505     992   019F6                  
    1506     993   019F6                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1507     994   019F6                  ;
    1508     995   019F6                  ; SIOOUTCHAR IS EEN SUBROUTINE DIE EEN KARAKTER VIA DE SERIELE INTERFACE NAAR
    1509     996   019F6                  ; BUITEN STUURT. DE ROUTINE GEBRUIKT DE ACCU ALS INPUT. DE ROUTINE GAAT NA DAT
    1510     997   019F6                  ; DE TRANSMITTER LEEG IS ALVORENS HET KARAKTER TE VERSTUREN.
    1511     998   019F6                  ;
    1512     999   019F6                  ; de routine gebruikt geen registers.
    1513    1000   019F6                  ;
    1514    1001   019F6                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1515    1002   019F6                  
    1516    1003   019F6                  siooutchar:
    1517    1004   019F6 F599             OUTCHAR:      MOV    SBUF,A        ;KARAKTER VERZENDEN
    1518    1005   019F8 3099FD           OUTCHAR1:     JNB    TI,OUTCHAR1   ;WACHT TOT ZENDER BESCHIKBAAR
    1519    1006   019FB C299                           CLR    TI            ;LAAG MAKEN VAN DE BIT
    1520    1007   019FD 22                             RET
    1521    1008   019FE                  
    1522    1009   019FE                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1523    1010   019FE                  ;
    1524    1011   019FE                  ; SIOOUTNIB VERZEND DE LAAGSTE VIER BITS NAAR DE SERIELE POORT ONDER DE VORM VAN
    1525    1012   019FE                  ; EEN ASCII CODE. DE ACCU EN DE VLAGGEN WORDEN DOOR DE ROUTINE GEBRUIKT.
    1526    1013   019FE                  ;
    1527    1014   019FE                  ; de routine gebruikt geen registers.
    1528    1015   019FE                  ;
    1529    1016   019FE                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1530    1017   019FE                  
    1531    1018   019FE                  siooutnib:
    1532    1019   019FE C0E0             OUTNIB:       push   acc           ;registers op de stack
    1533    1020   01A00 C0D0                           push   psw
    1534    1021   01A02 540F                           ANL    A,#00FH       ;AFZONDEREN
    1535    1022   01A04 121AEE                         LCALL  BATRANS       ;OMZETTEN IN ASCII CODE
    1536    1023   01A07 1219F6                         LCALL  OUTCHAR       ;VERSTUREN
    1537    1024   01A0A 121A57                         LCALL  XONXOFF       ;FLOW CONTROL
    1538    1025   01A0D D0D0                           pop    psw           ;registers herstellen
    1539    1026   01A0F D0E0                           pop    acc
    1540    1027   01A11 22                             RET
    1541    1028   01A12                  
    1542    1029   01A12                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1543    1030   01A12                  ;
    1544    1031   01A12                  ; SIOOUTBYTE ZET DE HEX INHOUD VAN DE ACCU OP DE SERIELE POORT. ALS FLOW CONTROL
    1545    1032   01A12                  ; WORDT XONXOFF GEBRUIKT.
    1546    1033   01A12                  ;
    1547    1034   01A12                  ; de routine gebruikt geen registers.
    1548    1035   01A12                  ;
    1549    1036   01A12                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1550    1037   01A12                  
    1551    1038   01A12                  siooutbyte:
    1552    1039   01A12 C0E0             OUTBYTE:      push   acc           ;registers op de stack zetten
    1553    1040   01A14 C0D0                           push   psw
    1554    1041   01A16 C0E0                           PUSH   ACC           ;BACK UP NEMEN VAN DE ACCU
    1555    1042   01A18 C4                             SWAP   A             ;EERST HOOGSTE DEEL
    1556    1043   01A19 1219FE                         LCALL  OUTNIB        ;NIBBLE NAAR HET SCHERM
    1557    1044   01A1C D0E0                           POP    ACC           ;HERSTELLEN VAN DE ACCU
    1558    1045   01A1E 1219FE                         LCALL  OUTNIB        ;NIBBLE NAAR HET SCHERM
    1559    1046   01A21 D0D0                           pop    psw           ;registers herstellen
    1560    1047   01A23 D0E0                           pop    acc
    1561    1048   01A25 22                             RET
    1562    1049   01A26                  
    1563    1050   01A26                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1564    1051   01A26                  ;
    1565    1052   01A26                  ; SIODISPDPTR ZET DE HEX INHOUD VAN DE DPTR OP HET SCHERM OP DE HUIDIGE PLAATS
    1566    1053   01A26                  ; VAN DE CURSOR.
    1567    1054   01A26                  ;
    1568    1055   01A26                  ; de routine gebruikt geen registers.
    1569    1056   01A26                  ;
    1570    1057   01A26                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1571    1058   01A26                  
    1572    1059   01A26                  siodispdptr:
    1573    1060   01A26 C0E0             DISPDPTR:     push   acc           ;registers op de stack zetten
    1574    1061   01A28 C0D0                           push   psw
    1575    1062   01A2A E583                           MOV    A,DPH         ;EERST HOOGSTE DEEL OP SCHERM
    1576    1063   01A2C 121A12                         LCALL  OUTBYTE       ;BYTE IN ASCII NAAR HET SCHERM
    1577    1064   01A2F E582                           MOV    A,DPL         ;MINST BEDUIDENDE DEEL VERZENDEN
    1578    1065   01A31 121A12                         LCALL  OUTBYTE       ;WEG ER MEE
    1579    1066   01A34 D0D0                           pop    psw           ;registers herstellen
    1580    1067   01A36 D0E0                           pop    acc
    1581    1068   01A38 22                             RET                  ;EINDE
    1582    1069   01A39                  
    1583    1070   01A39                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1584    1071   01A39                  ;
    1585    1072   01A39                  ; SIOOUTMSGA IS EEN SUBROUTINE, DIE DE ASCII CODES VANAF HET ADRES IN DE DPTR,
    1586    1073   01A39                  ; TOT AAN DE CODE 00H, OP HET SCHERM ZET. HET BERICHT STAAT IN CODE MEMORY.
    1587    1074   01A39                  ;
    1588    1075   01A39                  ; de routine gebruikt geen registers.
    1589    1076   01A39                  ;
    1590    1077   01A39                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1591    1078   01A39                  
    1592    1079   01A39                  siooutmsga:
    1593    1080   01A39 C0E0             OUTMSGA:      push   acc           ;alles op de stack zetten
    1594    1081   01A3B C0D0                           push   psw
    1595    1082   01A3D C082                           push   dpl
    1596    1083   01A3F C083                           push   dph
    1597    1084   01A41 E4               outmsga2:     CLR    A             ;ACCU LEEG MAKEN
    1598    1085   01A42 93                             MOVC   A,@A+DPTR     ;EERSTE CODE OPHALEN
    1599    1086   01A43 6009                           JZ     OUTMSGA1      ;ALS NUL DAN EINDE
    1600    1087   01A45 1219F6                         LCALL  OUTCHAR       ;KARAKTER NAAR HET SCHERM
    1601    1088   01A48 121A57                         LCALL  XONXOFF       ;SOFTWARE HANDSHAKE
    1602    1089   01A4B A3                             INC    DPTR          ;DPTR AANPASSEN
    1603    1090   01A4C 80F3                           SJMP   OUTMSGA2      ;HERHAAL TOT EINDE
    1604    1091   01A4E D083             OUTMSGA1:     pop    dph           ;alles herstellen
    1605    1092   01A50 D082                           pop    dpl
    1606    1093   01A52 D0D0                           pop    psw
    1607    1094   01A54 D0E0                           pop    acc
    1608    1095   01A56 22                             RET                  ;EINDE ROUTINE
    1609    1096   01A57                  
    1610    1097   01A57                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1611    1098   01A57                  ;
    1612    1099   01A57                  ; XONXOFF LAAT HET GEBRUIK VAN SOFTWARE HANDSHAKE TOE. DE ROUTINE GAAT NA DAT
    1613    1100   01A57                  ; ER EEN KARAKTER ONTVANGEN WERD. ALS DIT HET XOFF KARAKTER IS BLIJFT DE
    1614    1101   01A57                  ; ROUTINE WACHTEN OP EEN ANDER WILLEKEURIG KARAKTER. DIT LAATSTE WORDT NIET
    1615    1102   01A57                  ; VERDER DOORGEGEVEN.
    1616    1103   01A57                  ;
    1617    1104   01A57                  ; de routine gebruikt geen registers.
    1618    1105   01A57                  ;
    1619    1106   01A57                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1620    1107   01A57                  
    1621    1108   01A57 C0E0             XONXOFF:      push   acc           ;registers op de stack zetten
    1622    1109   01A59 C0D0                           push   psw
    1623    1110   01A5B 109805                         JBC    RI,XONXOFF1   ;GA NA KARAKTER ONTVANGEN
    1624    1111   01A5E D0D0             XONXOFF2:     pop    psw           ;registers herstellen
    1625    1112   01A60 D0E0                           pop    acc
    1626    1113   01A62 22                             RET                  ;ANDERS EINDE
    1627    1114   01A63 E599             XONXOFF1:     MOV    A,SBUF        ;ZO JA, KARAKTER LADEN IN ACCU
    1628    1115   01A65 B413F6                         CJNE   A,#XOFF,XONXOFF2     ;ALS NIET XOFF DAN VERDER
    1629    1116   01A68 1098F3           XONXOFF3:     JBC    RI,XONXOFF2   ;WACHTEN OP WILLEKEURIG KARAKTER
    1630    1117   01A6B 80FB                           SJMP   XONXOFF3      ;EN DAN RIBBE EN DE BIE
    1631    1118   01A6D                  
    1632    1119   01A6D                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1633    1120   01A6D                  ;
    1634    1121   01A6D                  ; SIOINCHAR BLIJFT WACHTEN TOTDAT ER EEN KARAKTER ONTVANGEN WERD DOOR DE SERIELE
    1635    1122   01A6D                  ; INTERFACE. HET KARAKTER WORDT DOORGEGEVEN IN DE ACCUMULATOR.
    1636    1123   01A6D                  ;
    1637    1124   01A6D                  ; de routine gebruikt de accu.
    1638    1125   01A6D                  ;
    1639    1126   01A6D                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1640    1127   01A6D                  
    1641    1128   01A6D                  sioinchar:
    1642    1129   01A6D 3098FD           INCHAR:       JNB    RI,INCHAR            ;BLIJF WACHTEN OP HET KARAKTER
    1643    1130   01A70 C298                           CLR    RI                   ;BIT LAAG MAKEN
    1644    1131   01A72 E599                           MOV    A,SBUF               ;KARAKTER IN DE ACCU
    1645    1132   01A74 22                             RET
    1646    1133   01A75                  
    1647    1134   01A75                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1648    1135   01A75                  ;
    1649    1136   01A75                  ; SIOINBYTE LEEST TWEE ASCII CODES BINNEN EN VORMT ZE OM TOT EEN HEX BYTE.
    1650    1137   01A75                  ; ALS OUTPUT WORDT DE ACCU GEBRUIKT.
    1651    1138   01A75                  ; ALS HET DE TWEE ASCII CODES NIET TOT EEN BYTE OMGEZET KUNNEN WORDEN, ZAL
    1652    1139   01A75                  ; DE CARRY OP 1 GEZET WORDEN.
    1653    1140   01A75                  ;
    1654    1141   01A75                  ; De routine gebruikt de accu, r0 en de psw.
    1655    1142   01A75                  ;
    1656    1143   01A75                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1657    1144   01A75                  
    1658    1145   01A75                  sioinbyte:
    1659    1146   01A75 121A6D           INBYTE:       LCALL  INCHAR               ;EERSTE KARAKTER INLEZEN
    1660    1147   01A78 121AE1                         LCALL  LOWUPTR
    1661    1148   01A7B 121AF8                         LCALL  ASCBINTRANS          ;OMZETTEN NAAR HEX GETAL
    1662    1149   01A7E 400E                           JC     INBYTE1              ;BIJ ERROR AKTIE ONDERNEMEN
    1663    1150   01A80 C4                             SWAP   A                    ;IS HOOGSTE NIBBLE
    1664    1151   01A81 F8                             MOV    R0,A                 ;ACCU TIJDELIJK BEWAREN
    1665    1152   01A82 121A6D                         LCALL  INCHAR               ;TWEEDE KARAKTER OPHALEN
    1666    1153   01A85 121AE1                         LCALL  LOWUPTR
    1667    1154   01A88 121AF8                         LCALL  ASCBINTRANS          ;OMZETTEN NAAR BIN GETAL
    1668    1155   01A8B 4001                           JC     INBYTE1              ;BIJ ERROR ....
    1669    1156   01A8D 48                             ORL    A,R0                 ;BIJDE GETALLEN SAMEN VOEGEN
    1670    1157   01A8E 22               INBYTE1:      RET
    1671    1158   01A8F                  
    1672    1159   01A8F                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1673    1160   01A8F                  ;
    1674    1161   01A8F                  ; SIOINBUFA LEEST EEN ASCII BUFFER BINNEN VIA DE SERIELE POORT. DE ROUTINE LAAT
    1675    1162   01A8F                  ; TOE OM FOUTIEVE INGAVEN TE VERBETEREN. HIERVOOR KAN DE BACKSPACE TOETS
    1676    1163   01A8F                  ; GEBRUIKT WORDEN. HET STARTADRES VAN DE BUFFER IS STRTBUF. DE LAATSE BYTE
    1677    1164   01A8F                  ; HEEFT HET ADRES ENDBUF. ALS DE BUFFER TE VOL, OF TE LEEG, GEMAAKT WORDT,
    1678    1165   01A8F                  ; LAAT DE CPU EEN BEEP HOREN. DE ROUTINE GEBRUIKT DE ACCU EN R0. CONTROLE
    1679    1166   01A8F                  ; KARAKTERS WORDEN NIET VERWERKT. DE ROUTINE GEEFT OOK EEN ECHO NAAR HET
    1680    1167   01A8F                  ; SCHERM. ZE GEBRUIKT DE SUBROUTINES INCHAR, OUTCHAR EN ASCCTR. INBUFA DOET
    1681    1168   01A8F                  ; OOK DE OMVORMING NAAR ASCII 0 KARAKTERS. Door de waarden van strtbuf en endbuf
    1682    1169   01A8F                  ; aan te passen kan de gebruiker zelf de lengte en de plaats van de buffer
    1683    1170   01A8F                  ; bepalen.
    1684    1171   01A8F                  ;
    1685    1172   01A8F                  ; De routine gebruikt de accu, r0 en de psw.
    1686    1173   01A8F                  ;
    1687    1174   01A8F                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1688    1175   01A8F                  
    1689    1176   01A8F                  sioinbufa:
    1690    1177   01A8F 7854             INBUFA:       MOV    R0,#STRTBUF          ;START ADRES VAN DE BUFFER LADEN
    1691    1178   01A91 121A6D           INBUFA2:      LCALL  INCHAR               ;KARAKTER LEZEN
    1692    1179   01A94 547F                           ANL    A,#07FH              ;KARAKTERS OMVORMEN TOT ASCII 0
    1693    1180   01A96                  ; ALVORENS EEN ECHO NAAR HET SCHERM TE VERSTUREN, MOET NAGEGAAN WORDEN DAT HET
    1694    1181   01A96                  ; BEKOMEN KARAKTER AAN DE TE VERWACHTEN KARAKTERS VOLDOET. DE ENIGE TOEGELATEN
    1695    1182   01A96                  ; CONTROLEKARAKTERS ZIJN 'CR' EN 'BACKSPACE'. VOOR AL DE ANDERE KARAKTERS
    1696    1183   01A96                  ; WORDT EEN BEEP NAAR HET SCHERM GESTUURD. DE CONTROLE WORDT DOOR ASCCTR UIT-
    1697    1184   01A96                  ; GEVOERD.
    1698    1185   01A96 121AE1                         LCALL  LOWUPTR              ;WEL EFFE IN CAPS TE ZETTEN
    1699    1186   01A99 B40D02                         CJNE   A,#CR,INBUFA1        ;CR INGEGEVEN?
    1700    1187   01A9C F6                             MOV    @R0,A                ;IN GEHEUGEN ZETTEN
    1701    1188   01A9D 22                             RET                         ;EINDE VAN DE ROUTINE
    1702    1189   01A9E B40813           INBUFA1:      CJNE   A,#BACKSP,INBUFA6    ;NAGAAN BACK SPACE INDRUKKEN
    1703    1190   01AA1 B85407                         CJNE   R0,#STRTBUF,INBUFA3  ;STAAT DE BUFFER ONDERAAN,DAN BEEP
    1704    1191   01AA4 7407             INBUFA4:      MOV    A,#BEEP
    1705    1192   01AA6 1219F6           INBUFA7:      LCALL  OUTCHAR
    1706    1193   01AA9 80E6                           SJMP   INBUFA2              ;NIEUW KARAKTER OPHALEN
    1707    1194   01AAB 18               INBUFA3:      DEC    R0                   ;ENTRY UIT BUFFER HALEN
    1708    1195   01AAC 9019BA                         MOV    DPTR,#wissen         ;WIS KARAKTER DATA NAAR SCHERM
    1709    1196   01AAF 121A39                         LCALL  OUTMSGA
    1710    1197   01AB2 80DD                           SJMP   INBUFA2              ;WACHT OP VOLGENDE INGAVE
    1711    1198   01AB4 121AD3           INBUFA6:      LCALL  ASCCTR               ;ALS CARRY DAN NIET GELDIG
    1712    1199   01AB7 40EB                           JC     INBUFA4              ;BEEP NAAR SCHERM
    1713    1200   01AB9 B87E02                         CJNE   R0,#ENDBUF-1,INBUFA5 ;BUFFER OP HET EINDE DAN ERROR
    1714    1201   01ABC 80E6                           SJMP   INBUFA4              ;BEEP NAAR HET SCHERM
    1715    1202   01ABE F6               INBUFA5:      MOV    @R0,A                ;KARAKTER IN DE BUFFER
    1716    1203   01ABF 08                             INC    R0                   ;BUFFER POINTER AANPASSEN
    1717    1204   01AC0 80E4                           SJMP   INBUFA7              ;KARAKTER IN BUFFER, VOLGENDE ?
    1718    1205   01AC2                  
    1719    1206   01AC2                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1720    1207   01AC2                  ;
    1721    1208   01AC2                  ; BDELETE HAALT ALLE blank KARAKTERS UIT de inputbuffer
    1722    1209   01AC2                  ;
    1723    1210   01AC2                  ; De routine gebruikt de accu, r0, r1 en de psw.
    1724    1211   01AC2                  ;
    1725    1212   01AC2                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1726    1213   01AC2                  
    1727    1214   01AC2 7854             BDELETE:      MOV    R0,#STRTBUF          ;START ADRES IN R0
    1728    1215   01AC4 7954                           MOV    R1,#STRTBUF          ;START ADRES IN R1
    1729    1216   01AC6 E6               BDELETE1:     MOV    A,@R0                ;LEES KARAKTER
    1730    1217   01AC7 B42005                         CJNE   A,#BLANK,BDELETE2    ;KARAKTER GEEN BLANKO,DAN BDELETE2
    1731    1218   01ACA 08               BDELETE3:     INC    R0                   ;VOLGENDE KARAKTER OPHALEN
    1732    1219   01ACB B880F8                         CJNE   R0,#ENDBUF+1,BDELETE1 ;ALS NIET EINDE DAN VERDER
    1733    1220   01ACE 22                             RET                         ;EINDE VAN DE ROUTINE
    1734    1221   01ACF F7               BDELETE2:     MOV    @R1,A                ;KARAKTER NAAR BUFFER STUREN
    1735    1222   01AD0 09                             INC    R1
    1736    1223   01AD1 80F7                           SJMP   BDELETE3
    1737    1224   01AD3                  
    1738    1225   01AD3                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1739    1226   01AD3                  ;
    1740    1227   01AD3                  ; ASCCTR MOET NAGAAN DAT HET KARAKTER IN DE ACCU BIJ DE STANDAARD KARAKTERS
    1741    1228   01AD3                  ; HOORT. ENKEL DE KONTROLEKARAKTERS CR EN BP ZIJN TOEGELATEN. DE ACCU EN DE
    1742    1229   01AD3                  ; VLAGGEN WORDEN GEBRUIKT. DE KARAKTERS < 020H EN > DAN 07EH WORDEN ALS FOUT
    1743    1230   01AD3                  ; AANZIEN.
    1744    1231   01AD3                  ;
    1745    1232   01AD3                  ; De routine gebruikt de accu en de psw.
    1746    1233   01AD3                  ;
    1747    1234   01AD3                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1748    1235   01AD3                  
    1749    1236   01AD3 B42000           ASCCTR:       CJNE   A,#020H,ASCCTR1      ;NAGAAN KARAKTER KLEINER DAN
    1750    1237   01AD6 4007             ASCCTR1:      JC     ASCCTR3              ;CARRY, DAN ERROR
    1751    1238   01AD8 B47F00                         CJNE   A,#07FH,ASCCTR2      ;GROTER DAN 7EH
    1752    1239   01ADB 5002             ASCCTR2:      JNC    ASCCTR3              ;GEEN CARRY DAN ERROR
    1753    1240   01ADD C3                             CLR    C                    ;AANGEVEN GEEN FOUT
    1754    1241   01ADE 22                             RET
    1755    1242   01ADF D3               ASCCTR3:      SETB   C                    ;AANGEVEN FOUT TOESTAND
    1756    1243   01AE0 22                             RET
    1757    1244   01AE1                  
    1758    1245   01AE1                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1759    1246   01AE1                  ;
    1760    1247   01AE1                  ; LOWUPTR ZET HET KARAKTER IN DE ACCU OM VAN LOWER NAAR UPPER CASE. DE ROUTINE
    1761    1248   01AE1                  ; GEBRUIKT DE VLAGGEN EN DE ACCU. DE HEX WAARDEN 61H TOT EN MET 7AH MOETEN
    1762    1249   01AE1                  ; OMGEZET WORDEN NAAR 41H TOT EN MET 5AH. DE ANDERE GETALLEN MOGEN NIET
    1763    1250   01AE1                  ; AANGEPAST WORDEN.
    1764    1251   01AE1                  ;
    1765    1252   01AE1                  ; De routine gebruikt de accu en de psw.
    1766    1253   01AE1                  ;
    1767    1254   01AE1                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1768    1255   01AE1                  
    1769    1256   01AE1 B47B00           LOWUPTR:      CJNE   A,#07BH,LOWUPTR1     ;BOVENSTE GRENS
    1770    1257   01AE4 5007             LOWUPTR1:     JNC    LOWUPTR2             ;GEEN CARRY DAN GEEN OMZETTING
    1771    1258   01AE6 B46100                         CJNE   A,#061H,LOWUPTR3     ;ONDERSTE GRENS NAGAAN
    1772    1259   01AE9 4002             LOWUPTR3:     JC     LOWUPTR2             ;CARRY DAN GEEN OMZETTING
    1773    1260   01AEB 9420                           SUBB   A,#020H              ;OMZETTING
    1774    1261   01AED 22               LOWUPTR2:     RET                         ;EINDE OMZETTING
    1775    1262   01AEE                  
    1776    1263   01AEE                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1777    1264   01AEE                  ;
    1778    1265   01AEE                  ; BATRANS DOET DE OMZETTING VAN EEN HEX NIBBLE IN DE ACCU NAAR DE PASSENDE
    1779    1266   01AEE                  ; ASCII CODE.
    1780    1267   01AEE                  ;
    1781    1268   01AEE                  ; De routine gebruikt de accu en de psw.
    1782    1269   01AEE                  ;
    1783    1270   01AEE                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1784    1271   01AEE                  
    1785    1272   01AEE B40A00           BATRANS:      CJNE   A,#00AH,BATRANS1     ;NAGAAN 30 OF 37 MOETEN BIJ OPTELLEN
    1786    1273   01AF1 4002             BATRANS1:     JC     BATRANS2             ;CARRY=1 DAN SLECHTS 30
    1787    1274   01AF3 2407                           ADD    A,#007H              ;ANDERS 30+7=37
    1788    1275   01AF5 2430             BATRANS2:     ADD    A,#030H              ;30 BIJ OPTELLEN
    1789    1276   01AF7 22                             RET
    1790    1277   01AF8                  
    1791    1278   01AF8                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1792    1279   01AF8                  ;
    1793    1280   01AF8                  ; ASCBINTRANS ZET HET ASCII KARAKTER IN DE ACCU OM IN EEN BINAIR GETAL. DE
    1794    1281   01AF8                  ; ROUTINE KAN ENKEL DE KARAKTERS TUSSEN 0-9 EN A-F VERWERKEN. IN HET ANDERE
    1795    1282   01AF8                  ; GEVAL WORDT DE CARRY GEZET.
    1796    1283   01AF8                  ;
    1797    1284   01AF8                  ; De routine gebruikt de accu en de psw.
    1798    1285   01AF8                  ;
    1799    1286   01AF8                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1800    1287   01AF8                  
    1801    1288   01AF8 C3               ASCBINTRANS:  CLR    C                    ;CARRY LAAG MAKEN VOOR BEREKENINGEN
    1802    1289   01AF9 9430                           SUBB   A,#030H              ;NAGAAN GETAL BINNEN GRENZEN
    1803    1290   01AFB 4010                           JC     ASCBINTRANS1         ;ALS C=1 DAN FOUT
    1804    1291   01AFD B40A00                         CJNE   A,#00AH,ASCBINTRANS3 ;GETAL TUSSEN 0 EN 9 ?
    1805    1292   01B00 400A             ASCBINTRANS3: JC     ASCBINTRANS2         ;ALS CARRY DAN ALLES OK
    1806    1293   01B02 9407                           SUBB   A,#007H              ;VERDER MET DE OMZETTING
    1807    1294   01B04 4007                           JC     ASCBINTRANS1         ;ALS CARRY DAN ERROR
    1808    1295   01B06 B41000                         CJNE   A,#010H,ASCBINTRANS4 ;CONTROLE OP TE GROTE GETALLEN
    1809    1296   01B09 B3               ASCBINTRANS4: CPL    C                    ;CARRY COMPLEMENTEREN
    1810    1297   01B0A 4001                           JC     ASCBINTRANS1         ;ALS CARRY DAN FOUT IN HET GETAL
    1811    1298   01B0C C3               ASCBINTRANS2: CLR    C                    ;CARRY LAAG MAKEN
    1812    1299   01B0D 22               ASCBINTRANS1: RET
    1813    1300   01B0E                  
    1814    1301   01B0E                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1815    1302   01B0E                  ;
    1816    1303   01B0E                  ; ASCII1 ZET HET ASCII KARAKTER @R0 OM IN EEN HEX GETAL IN DE ACCU.
    1817    1304   01B0E                  ; DE ROUTINE VERANDERD OOK DE VLAGGEN.
    1818    1305   01B0E                  ;
    1819    1306   01B0E                  ; De routine gebruikt de accu en de psw.
    1820    1307   01B0E                  ;
    1821    1308   01B0E                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1822    1309   01B0E                  
    1823    1310   01B0E E6               ASCII1:       MOV    A,@R0                ;KARAKTER OPHALEN
    1824    1311   01B0F 121AF8                         LCALL  ASCBINTRANS          ;OMZETTING ASCII NAAR BINAIR
    1825    1312   01B12 22                             RET                         ;EINDE OMZETTING
    1826    1313   01B13                  
    1827    1314   01B13                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1828    1315   01B13                  ;
    1829    1316   01B13                  ; ASCII2 ZET TWEE ASCII KARAKTERS @R0 EN @(R0+1) OM NAAR EEN HEX KARAKTER
    1830    1317   01B13                  ; IN DE ACCU. R0 WORDT MET EEN VERHOOGD. R1 WORDT AANGEPAST. ALS OP HET EINDE
    1831    1318   01B13                  ; VAN DE ROUTINE DE CARRY GESET IS, DAN IS DE OMZETTING NIET MOGELIJK.
    1832    1319   01B13                  ;
    1833    1320   01B13                  ; De routine gebruikt de accu, r0, r1 en de psw.
    1834    1321   01B13                  ;
    1835    1322   01B13                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1836    1323   01B13                  
    1837    1324   01B13 121B0E           ASCII2:       LCALL  ASCII1               ;OMZETTEN
    1838    1325   01B16 4009                           JC     ASCII21              ;CARRY 1 DAN OMZETTING NIET MOGELIJK
    1839    1326   01B18 C4                             SWAP   A                    ;NIBBLE VAN PLAATS VERANDEREN
    1840    1327   01B19 F9                             MOV    R1,A                 ;TIJDELIJK WEG STOPPEN
    1841    1328   01B1A 08                             INC    R0                   ;NAAR VOLGENDE KARAKTER WIJZEN
    1842    1329   01B1B 121B0E                         LCALL  ASCII1               ;KARAKTER OMZETTEN
    1843    1330   01B1E 4001                           JC     ASCII21               ;WEG ALS C=1
    1844    1331   01B20 49                             ORL    A,R1                 ;GETALLEN BIJ ELKAAR VOEGEN
    1845    1332   01B21 22               ASCII21:      RET
    1846    1333   01B22                  
    1847    1334   01B22                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1848    1335   01B22                  ;
    1849    1336   01B22                  ; ASCII4 ZET DE 4 ASCII KARAKTERS @R0 TOT @[R0+3] OM IN EEN HEX GETAL IN DE
    1850    1337   01B22                  ; DATAPOINTER. ALS DE OMZETTING NIET MOGELIJK IS WORDT DE CARRY GEZET.
    1851    1338   01B22                  ; R0 WORDT MET DRIE VERHOOGD, EN DE ACCU WORDT AANGEPAST,ALSOOK R1. ALS OP HET
    1852    1339   01B22                  ; EINDE VAN DE ROUTINE DE CARRY GESET IS, DAN WAS EEN OMZETTING NIET MOGELIJK.
    1853    1340   01B22                  ;
    1854    1341   01B22                  ; De routine gebruikt de accu, r0, r1 en de psw.
    1855    1342   01B22                  ;
    1856    1343   01B22                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1857    1344   01B22                  
    1858    1345   01B22 121B13           ASCII4:       LCALL  ASCII2               ;OMZETTEN EERSTE TWEE ASCII BYTES
    1859    1346   01B25 400A                           JC     ASCII41              ;IN GEVAL VAN ERROR DAN WEG
    1860    1347   01B27 F583                           MOV    DPH,A                ;HEX GETAL IN DE DPTRH
    1861    1348   01B29 08                             INC    R0                   ;WIIJST NU NAAR VOLGENDE GROEP VAN 2
    1862    1349   01B2A 121B13                         LCALL  ASCII2               ;OMZETTEN VOLGENDE TWEE BYTES
    1863    1350   01B2D 4002                           JC     ASCII41              ;BIJ FOUT DAN WEG
    1864    1351   01B2F F582                           MOV    DPL,A                ;IN DPTR LADEN
    1865    1352   01B31 22               ASCII41:      RET
    1866    1353   01B32                  
    1867    1354   01B32                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1868    1355   01B32                  ;
    1869    1356   01B32                  ; initadc            is een subroutine die de adc klaar zet voor minimalistisch
    1870    1357   01B32                  ; gebruik De routine zorgt er voor dat de potmeter en de lm335 als analoge inputs
    1871    1358   01B32                  ; geschakeld worden.
    1872    1359   01B32                  ;
    1873    1360   01B32                  ; Gebruikt geen registers
    1874    1361   01B32                  ;
    1875    1362   01B32                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1876    1363   01B32                  
    1877    1364   01B32 C08F             initadc:      push   syscon0                     ;map saven
    1878    1365   01B34 758F04                         mov    syscon0,#004h               ;basis pagina selecteren
    1879    1366   01B37 75D100                         mov    adc_page,#000h              ;pagina 0 selecteren
    1880    1367   01B3A 75CAB0                         mov    adc_globctr,#10110000b      ;adc inschakelen                   MUST!!
    1881    1368   01B3D                                                                   ;klok delen door 32 (750kHz)
    1882    1369   01B3D                                                                   ;10 bit uitkomst
    1883    1370   01B3D 75CE0A                         mov    adc_inpcr0,#00ah            ;sample time verlengen met x klokpulsen
    1884    1371   01B40                  ; Dit is niet echt nodig, maar hiermee vangen we de hoge impedantie van de potmeter op
    1885    1372   01B40 75CC80                         mov    adc_prar,#080h              ;arbitration slot parallelle arbiratie activeren MUST!!
    1886    1373   01B43 75D106                         mov    adc_page,#006h              ;adc page 6 selecteren             MUST!!
    1887    1374   01B46 75CC01                         mov    adc_crmr1,#001h             ;willen onmiddellijke actie        MUST!!
    1888    1375   01B49 D08F                           pop    syscon0                     ;herstellen syscon
    1889    1376   01B4B 22                             ret
    1890    1377   01B4C                  
    1891    1378   01B4C                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1892    1379   01B4C                  ;
    1893    1380   01B4C                  ; adclm335           is een subroutine die de spanning meet die van de lm335 sensor
    1894    1381   01B4C                  ; komt. De waarde wordt doorgegeven in a en b registers (kanaal 5).
    1895    1382   01B4C                  ;
    1896    1383   01B4C                  ; Gebruikt:
    1897    1384   01B4C                  ;      -accu als 8 msb meting
    1898    1385   01B4C                  ;      -b als 2 lsb meting (links afgelijnd) (b veat verder data van adc_resrxl)
    1899    1386   01B4C                  ;
    1900    1387   01B4C                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1901    1388   01B4C                  
    1902    1389   01B4C C08F             adclm335:     push   syscon0
    1903    1390   01B4E 758F04                         mov    syscon0,#004h               ;map kiezen en vorige bewaren
    1904    1391   01B51 75D106                         mov    adc_page,#006h              ;adc pagina 6 kiezen
    1905    1392   01B54 75CB20                         mov    adc_crpr1,#00100000b        ;kanaal 5 starten
    1906    1393   01B57 75D100                         mov    adc_page,#000h              ;naar pagina 0 schakelen
    1907    1394   01B5A 00               		nop
    1908    1395   01B5B 00               		nop					;anders loopt het mis met het testen van de ready bit
    1909    1396   01B5C E5CB             adclm3351:    mov    a,adc_globstr               ;kijken omvorming klaar
    1910    1397   01B5E 20E0FB                         jb     acc.0,adclm3351
    1911    1398   01B61 75D102                         mov    adc_page,#002h              ;pagina 2 selecteren
    1912    1399   01B64 E5CB                           mov    a,adc_resr0h                ;uitkomst in accu
    1913    1400   01B66 85CAF0                         mov    b,adc_resr0l                ;uitkomst in b
    1914    1401   01B69 D08F                           pop    syscon0
    1915    1402   01B6B 22                             ret
    1916    1403   01B6C                  
    1917    1404   01B6C                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1918    1405   01B6C                  ;
    1919    1406   01B6C                  ; adcpotmeter        is een subroutine die de spanning meet die van de potmeter
    1920    1407   01B6C                  ; komt. De waarde wordt doorgegeven in a en b registers (kanaal 4)
    1921    1408   01B6C                  ;
    1922    1409   01B6C                  ; Gebruikt:
    1923    1410   01B6C                  ;      -accu als 8 msb meting
    1924    1411   01B6C                  ;      -b als 2 lsb meting (links afgelijnd)
    1925    1412   01B6C                  ;
    1926    1413   01B6C                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1927    1414   01B6C                  
    1928    1415   01B6C C08F             adcpotmeter:  push   syscon0
    1929    1416   01B6E 758F04                         mov    syscon0,#004h               ;map kiezen en vorige bewaren
    1930    1417   01B71 75D106                         mov    adc_page,#006h              ;adc pagina 6 kiezen
    1931    1418   01B74 75CB10                         mov    adc_crpr1,#00010000b        ;kanaal 4 starten
    1932    1419   01B77 75D100                         mov    adc_page,#000h              ;naar pagina 0 schakelen
    1933    1420   01B7A 00               		nop
    1934    1421   01B7B 00               		nop					;anders loopt het mis met het testen van de ready bit
    1935    1422   01B7C E5CB             adcpotmeter1: mov    a,adc_globstr               ;kijken omvorming klaar
    1936    1423   01B7E 20E0FB                         jb     acc.0,adcpotmeter1
    1937    1424   01B81 75D102                         mov    adc_page,#002h              ;pagina 2 selecteren
    1938    1425   01B84 E5CB                           mov    a,adc_resr0h                ;uitkomst in accu
    1939    1426   01B86 85CAF0                         mov    b,adc_resr0l                ;uitkomst in b
    1940    1427   01B89 D08F                           pop    syscon0
    1941    1428   01B8B                  
    1942    1429   01B8B                  
    1943    1430   01B8B 22                             ret
    1944    1431   01B8C                  
    1945    1432   01B8C                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1946    1433   01B8C                  ;
    1947    1434   01B8C                  ; Dit is het driver gedeelte met de subroutines voor wiskundige berekeningen.
    1948    1435   01B8C                  ; Het is niet de bedoeling om de meest compacte code te bekomen. De driver zal
    1949    1436   01B8C                  ; ook niet alle gewenste routines bevatten. Hij is geschreven met pedagogische
    1950    1437   01B8C                  ; doelstellingen in het achterhoofd.
    1951    1438   01B8C                  ;
    1952    1439   01B8C                  ; De driver bevat routines voor 8 bit bcd naar hex en hex naar bcd omvorming
    1953    1440   01B8C                  ; LET OP!!!! de getallen moeten in waarde kleiner dan 100d zijn (zowel hex als
    1954    1441   01B8C                  ; bcd)
    1955    1442   01B8C                  ;      8bit hex naar bcd
    1956    1443   01B8C                  ;      8bit bcd naar hex
    1957    1444   01B8C                  ;
    1958    1445   01B8C                  ; De driver bevat routines voor de 4 hoofdbewerkingen op 16 bit getallen:
    1959    1446   01B8C                  ;      16/16 bit met 16 bit uitkomst en 16 bit rest
    1960    1447   01B8C                  ;      16*16 bit met 32 bit uitkomst
    1961    1448   01B8C                  ;      16+16 bit met 24 bit uitkomst
    1962    1449   01B8C                  ;      16-16 bit met 24 bit uitkomst
    1963    1450   01B8C                  ;      16bit hex naar bcd
    1964    1451   01B8C                  ;      16bit bcd naar hex
    1965    1452   01B8C                  ;
    1966    1453   01B8C                  ; De driver bevat routines voor de 4 hoofdbewerkingen op 32 bit getallen:
    1967    1454   01B8C                  ;      32/32 bit met 32 bit uitkomst en 32 bit rest
    1968    1455   01B8C                  ;      32*32 bit met 64 bit uitkomst
    1969    1456   01B8C                  ;      32+32 bit met 40 bit uitkomst
    1970    1457   01B8C                  ;      32-32 bit met 40 bit uitkomst
    1971    1458   01B8C                  ;
    1972    1459   01B8C                  ; de gebruiker moet zorgen dat de berekeningen mogelijk zijn!!!!!!!!!!!!!!!!!!
    1973    1460   01B8C                  ;
    1974    1461   01B8C                  ; De routines gebruiken als input en output de huidige registerbank.
    1975    1462   01B8C                  ;
    1976    1463   01B8C                  ;
    1977    1464   01B8C                  ; WAARSCHUWING!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
    1978    1465   01B8C                  ; DEZE ROUTINES GEBRUIKEN 15 BYTES STACK. ZE WERKEN ENKEL ALS DE STACK NIET DE
    1979    1466   01B8C                  ; ADRESSEN 70-7c GEBRUIKT. ER WORDEN HIER IMMERS DIRECT ADRESSEERBARE REGISTERS
    1980    1467   01B8C                  ; VRIJ GEMAAKT OM IN TE REKENEN.
    1981    1468   01B8C                  ; !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
    1982    1469   01B8C                  ;
    1983    1470   01B8C                  ; geschreven door Roggemans Marc (MGM) op 11/2004 uitvoering 51math0.inc
    1984    1471   01B8C                  ; Aangepast door Roggmans Marc (MGM) op 07/2010 voor xcez
    1985    1472   01B8C                  ;      -routines gebruiken geen MDU!
    1986    1473   01B8C                  ;
    1987    1474   01B8C                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1988    1475   01B8C                  
    1989    1476   01B8C                  ; Hier worden gpr's verbonden met een naam. Ze worden gebruikt door sommige
    1990    1477   01B8C                  ; routines. Omdat ze informatie kunnen bevatten worden ze op de stack gezet.
    1991    1478   01B8C                  
    1992    1479   01B8C                  h0            equ    070h
    1993    1480   01B8C                  h1            equ    071h
    1994    1481   01B8C                  h2            equ    072h
    1995    1482   01B8C                  h3            equ    073h
    1996    1483   01B8C                  h4            equ    074h
    1997    1484   01B8C                  h5            equ    075h
    1998    1485   01B8C                  h6            equ    076h
    1999    1486   01B8C                  h7            equ    077h
    2000    1487   01B8C                  h8            equ    078h
    2001    1488   01B8C                  h9            equ    079h
    2002    1489   01B8C                  h10           equ    07ah
    2003    1490   01B8C                  h11           equ    07bh
    2004    1491   01B8C                  h12           equ    07ch
    2005    1492   01B8C                  
    2006    1493   01B8C                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2007    1494   01B8C                  ;
    2008    1495   01B8C                  ; mul32       is de routine die twee 32 bit getallen zal vermenigvuldigen.
    2009    1496   01B8C                  ; input:      r3,r2,r1,r0 = eerste getal (r3=msb)
    2010    1497   01B8C                  ;             r7,r6,r5,r4 = tweede getal (r7=msb)
    2011    1498   01B8C                  ; output:     r7,r6,r5,r4,r3,r2,r1,r0 met r7=msb
    2012    1499   01B8C                  ;
    2013    1500   01B8C                  ; De routine gebruikt alleen de registers van de huidig geselecteerde bank
    2014    1501   01B8C                  ;
    2015    1502   01B8C                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2016    1503   01B8C                  
    2017    1504   01B8C C0E0             mul32:        push   acc                  ;registers op de stack zetten
    2018    1505   01B8E C0D0                           push   psw
    2019    1506   01B90 C070                           push   h0
    2020    1507   01B92 C071                           push   h1
    2021    1508   01B94 C072                           push   h2
    2022    1509   01B96 C073                           push   h3
    2023    1510   01B98 C074                           push   h4
    2024    1511   01B9A C075                           push   h5
    2025    1512   01B9C C076                           push   h6
    2026    1513   01B9E C077                           push   h7
    2027    1514   01BA0 C078                           push   h8
    2028    1515   01BA2 C079                           push   h9
    2029    1516   01BA4 C07A                           push   h10
    2030    1517   01BA6 C07B                           push   h11
    2031    1518   01BA8 C07C                           push   h12
    2032    1519   01BAA                  
    2033    1520   01BAA                  ; eerst moeten de hulpregisters klaar gezet worden
    2034    1521   01BAA                  
    2035    1522   01BAA 757000                         mov    h0,#000h
    2036    1523   01BAD 757100                         mov    h1,#000h
    2037    1524   01BB0 757200                         mov    h2,#000h
    2038    1525   01BB3 757300                         mov    h3,#000h
    2039    1526   01BB6 757400                         mov    h4,#000h
    2040    1527   01BB9 757500                         mov    h5,#000h
    2041    1528   01BBC 757600                         mov    h6,#000h
    2042    1529   01BBF 757700                         mov    h7,#000h
    2043    1530   01BC2 757800                         mov    h8,#000h
    2044    1531   01BC5 757900                         mov    h9,#000h
    2045    1532   01BC8 757A00                         mov    h10,#000h
    2046    1533   01BCB 757B00                         mov    h11,#000h
    2047    1534   01BCE 757C20                         mov    h12,#32              ;loopcounter
    2048    1535   01BD1                  
    2049    1536   01BD1                  ; volgende lus moet 32 keer doorlopen worden om de berekening te maken
    2050    1537   01BD1                  
    2051    1538   01BD1                  ; nu wordt de vermenigvuldiger naar rechts in de carry geshift
    2052    1539   01BD1                  
    2053    1540   01BD1 EB               mul321:       mov    a,r3
    2054    1541   01BD2 13                             rrc    a
    2055    1542   01BD3 FB                             mov    r3,a
    2056    1543   01BD4 EA                             mov    a,r2
    2057    1544   01BD5 13                             rrc    a
    2058    1545   01BD6 FA                             mov    r2,a
    2059    1546   01BD7 E9                             mov    a,r1
    2060    1547   01BD8 13                             rrc    a
    2061    1548   01BD9 F9                             mov    r1,a
    2062    1549   01BDA E8                             mov    a,r0
    2063    1550   01BDB 13                             rrc    a
    2064    1551   01BDC F8                             mov    r0,a                 ;32 bit shift klaar
    2065    1552   01BDD                  
    2066    1553   01BDD                  ;als de carry 1 is moet het 64 bit getal h3-r4 opgeteld worden bij h11-h4
    2067    1554   01BDD                  
    2068    1555   01BDD 502C                           jnc    mul322               ;optelling niet nodig
    2069    1556   01BDF                  
    2070    1557   01BDF                  ; hier staat en 64 bit optelling
    2071    1558   01BDF                  
    2072    1559   01BDF EC                             mov    a,r4
    2073    1560   01BE0 2574                           add    a,h4
    2074    1561   01BE2 F574                           mov    h4,a
    2075    1562   01BE4 ED                             mov    a,r5
    2076    1563   01BE5 3575                           addc   a,h5
    2077    1564   01BE7 F575                           mov    h5,a
    2078    1565   01BE9 EE                             mov    a,r6
    2079    1566   01BEA 3576                           addc   a,h6
    2080    1567   01BEC F576                           mov    h6,a
    2081    1568   01BEE EF                             mov    a,r7
    2082    1569   01BEF 3577                           addc   a,h7
    2083    1570   01BF1 F577                           mov    h7,a
    2084    1571   01BF3 E570                           mov    a,h0
    2085    1572   01BF5 3578                           addc   a,h8
    2086    1573   01BF7 F578                           mov    h8,a
    2087    1574   01BF9 E571                           mov    a,h1
    2088    1575   01BFB 3579                           addc   a,h9
    2089    1576   01BFD F579                           mov    h9,a
    2090    1577   01BFF E572                           mov    a,h2
    2091    1578   01C01 357A                           addc   a,h10
    2092    1579   01C03 F57A                           mov    h10,a
    2093    1580   01C05 E573                           mov    a,h3
    2094    1581   01C07 357B                           addc   a,h11
    2095    1582   01C09 F57B                           mov    h11,a                ;optelling klaar
    2096    1583   01C0B                  
    2097    1584   01C0B                  ; het getal h3-r4 moet met twee vermenigvuldigd worden
    2098    1585   01C0B                  
    2099    1586   01C0B C3               mul322:       clr    c                    ;moet op 0 staan
    2100    1587   01C0C EC                             mov    a,r4
    2101    1588   01C0D 33                             rlc    a
    2102    1589   01C0E FC                             mov    r4,a
    2103    1590   01C0F ED                             mov    a,r5
    2104    1591   01C10 33                             rlc    a
    2105    1592   01C11 FD                             mov    r5,a
    2106    1593   01C12 EE                             mov    a,r6
    2107    1594   01C13 33                             rlc    a
    2108    1595   01C14 FE                             mov    r6,a
    2109    1596   01C15 EF                             mov    a,r7
    2110    1597   01C16 33                             rlc    a
    2111    1598   01C17 FF                             mov    r7,a
    2112    1599   01C18 E570                           mov    a,h0
    2113    1600   01C1A 33                             rlc    a
    2114    1601   01C1B F570                           mov    h0,a
    2115    1602   01C1D E571                           mov    a,h1
    2116    1603   01C1F 33                             rlc    a
    2117    1604   01C20 F571                           mov    h1,a
    2118    1605   01C22 E572                           mov    a,h2
    2119    1606   01C24 33                             rlc    a
    2120    1607   01C25 F572                           mov    h2,a
    2121    1608   01C27 E573                           mov    a,h3
    2122    1609   01C29 33                             rlc    a
    2123    1610   01C2A F573                           mov    h3,a
    2124    1611   01C2C                  
    2125    1612   01C2C D57CA2                         djnz   h12,mul321           ;herhaal 32 keer
    2126    1613   01C2F                  
    2127    1614   01C2F                  ; de uitkomst moet in de juiste registers komen
    2128    1615   01C2F                  
    2129    1616   01C2F A874                           mov    r0,h4
    2130    1617   01C31 A975                           mov    r1,h5
    2131    1618   01C33 AA76                           mov    r2,h6
    2132    1619   01C35 AB77                           mov    r3,h7
    2133    1620   01C37 AC78                           mov    r4,h8
    2134    1621   01C39 AD79                           mov    r5,h9
    2135    1622   01C3B AE7A                           mov    r6,h10
    2136    1623   01C3D AF7B                           mov    r7,h11               ;klaar
    2137    1624   01C3F                  
    2138    1625   01C3F D07C                           pop    h12                  ;registers herstellen
    2139    1626   01C41 D07B                           pop    h11
    2140    1627   01C43 D07A                           pop    h10
    2141    1628   01C45 D079                           pop    h9
    2142    1629   01C47 D078                           pop    h8
    2143    1630   01C49 D077                           pop    h7
    2144    1631   01C4B D076                           pop    h6
    2145    1632   01C4D D075                           pop    h5
    2146    1633   01C4F D074                           pop    h4
    2147    1634   01C51 D073                           pop    h3
    2148    1635   01C53 D072                           pop    h2
    2149    1636   01C55 D071                           pop    h1
    2150    1637   01C57 D070                           pop    h0
    2151    1638   01C59 D0D0                           pop    psw
    2152    1639   01C5B D0E0                           pop    acc
    2153    1640   01C5D 22                             ret
    2154    1641   01C5E                  
    2155    1642   01C5E                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2156    1643   01C5E                  ;
    2157    1644   01C5E                  ; mul16       is de routine die twee 16 bit getallen zal vermenigvuldigen.
    2158    1645   01C5E                  ; input:      r1,r0 = eerste getal (r1=msb)
    2159    1646   01C5E                  ;             r3,r2 = tweede getal (r3=msb)
    2160    1647   01C5E                  ; output:     r3,r2,r1,r0 met r3=msb
    2161    1648   01C5E                  ;
    2162    1649   01C5E                  ; De routine gebruikt alleen de registers r3, r2, r1, r0 van de huidige bank
    2163    1650   01C5E                  ;
    2164    1651   01C5E                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2165    1652   01C5E                  
    2166    1653   01C5E C0E0             mul16:        push   acc                  ;registers op de stack zetten
    2167    1654   01C60 C0D0                           push   psw
    2168    1655   01C62 C070                           push   h0
    2169    1656   01C64 C071                           push   h1
    2170    1657   01C66 C072                           push   h2
    2171    1658   01C68 C073                           push   h3
    2172    1659   01C6A C074                           push   h4
    2173    1660   01C6C C075                           push   h5
    2174    1661   01C6E C076                           push   h6
    2175    1662   01C70                  
    2176    1663   01C70                  ; eerst registers laden met startwaarden. h0 en h1 zijn het verlengstuk
    2177    1664   01C70                  ; van r3 en r2. h2, h3, h4, h5 worden gebruikt voor sommatie.
    2178    1665   01C70                  ; h6 is de loopcounter.
    2179    1666   01C70                  
    2180    1667   01C70 757000                         mov    h0,#000h
    2181    1668   01C73 757100                         mov    h1,#000h
    2182    1669   01C76 757200                         mov    h2,#000h
    2183    1670   01C79 757300                         mov    h3,#000h
    2184    1671   01C7C 757400                         mov    h4,#000h
    2185    1672   01C7F 757500                         mov    h5,#000h
    2186    1673   01C82 757610                         mov    h6,#16               ;loopcounter
    2187    1674   01C85                  
    2188    1675   01C85                  ; hier staat de lus die 16 keer doorlopen wordt voor het uitvoeren van de
    2189    1676   01C85                  ; berekening
    2190    1677   01C85                  
    2191    1678   01C85 E9               mul161:       mov    a,r1                 ;getal 1 1*rechts in carry
    2192    1679   01C86 13                             rrc    a
    2193    1680   01C87 F9                             mov    r1,a
    2194    1681   01C88 E8                             mov    a,r0
    2195    1682   01C89 13                             rrc    a
    2196    1683   01C8A F8                             mov    r0,a                 ;ok
    2197    1684   01C8B                  
    2198    1685   01C8B                  ; als carry 1 dan h1, h0, r3, r2 optellen bij h5, h4, h3, h2
    2199    1686   01C8B                  
    2200    1687   01C8B 5016                           jnc    mul162
    2201    1688   01C8D                  
    2202    1689   01C8D EA                             mov    a,r2
    2203    1690   01C8E 2572                           add    a,h2
    2204    1691   01C90 F572                           mov    h2,a                 ;32 bit som uitvoeren
    2205    1692   01C92 EB                             mov    a,r3
    2206    1693   01C93 3573                           addc   a,h3
    2207    1694   01C95 F573                           mov    h3,a
    2208    1695   01C97 E570                           mov    a,h0
    2209    1696   01C99 3574                           addc   a,h4
    2210    1697   01C9B F574                           mov    h4,a
    2211    1698   01C9D E571                           mov    a,h1
    2212    1699   01C9F 3575                           addc   a,h5
    2213    1700   01CA1 F575                           mov    h5,a                 ;klaar
    2214    1701   01CA3                  
    2215    1702   01CA3                  ; het te vermenigvuldige getal maal 2 (1*links shiften)
    2216    1703   01CA3                  
    2217    1704   01CA3 C3               mul162:       clr    c
    2218    1705   01CA4 EA                             mov    a,r2
    2219    1706   01CA5 33                             rlc    a
    2220    1707   01CA6 FA                             mov    r2,a                 ;ook 32 bit getal
    2221    1708   01CA7 EB                             mov    a,r3
    2222    1709   01CA8 33                             rlc    a
    2223    1710   01CA9 FB                             mov    r3,a
    2224    1711   01CAA E570                           mov    a,h0
    2225    1712   01CAC 33                             rlc    a
    2226    1713   01CAD F570                           mov    h0,a
    2227    1714   01CAF E571                           mov    a,h1
    2228    1715   01CB1 33                             rlc    a
    2229    1716   01CB2 F571                           mov    h1,a                 ;klaar
    2230    1717   01CB4                  
    2231    1718   01CB4 D576CE                         djnz   h6,mul161            ;herhaal 16 keer
    2232    1719   01CB7                  
    2233    1720   01CB7                  ; de vermenigvuldiging is klaar. Nu uitkomstregisters laden
    2234    1721   01CB7                  
    2235    1722   01CB7 A872                           mov    r0,h2
    2236    1723   01CB9 A973                           mov    r1,h3
    2237    1724   01CBB AA74                           mov    r2,h4
    2238    1725   01CBD AB75                           mov    r3,h5                ;klaar
    2239    1726   01CBF                  
    2240    1727   01CBF                  
    2241    1728   01CBF D076                           pop    h6                   ;registers herstellen
    2242    1729   01CC1 D075                           pop    h5
    2243    1730   01CC3 D074                           pop    h4
    2244    1731   01CC5 D073                           pop    h3
    2245    1732   01CC7 D072                           pop    h2
    2246    1733   01CC9 D071                           pop    h1
    2247    1734   01CCB D070                           pop    h0
    2248    1735   01CCD D0D0                           pop    psw
    2249    1736   01CCF D0E0                           pop    acc
    2250    1737   01CD1 22                             ret
    2251    1738   01CD2                  
    2252    1739   01CD2                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2253    1740   01CD2                  ;
    2254    1741   01CD2                  ; div32       is de routine die twee 32 bit getallen zal delen (eerste/tweede).
    2255    1742   01CD2                  ; input:      r3,r2,r1,r0 = eerste getal (r3=msb)
    2256    1743   01CD2                  ;             r7,r6,r5,r4 = tweede getal (r7=msb)
    2257    1744   01CD2                  ; output:     r7,r6,r5,r4 = quotient (r7=msb)
    2258    1745   01CD2                  ;             r3,r2,r1,r0 = rest (r3=msb)
    2259    1746   01CD2                  ;             carry=1 bij delen door 0
    2260    1747   01CD2                  ;
    2261    1748   01CD2                  ; De routine gebruikt alleen de registers van de huidig geselecteerde bank
    2262    1749   01CD2                  ;
    2263    1750   01CD2                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2264    1751   01CD2                  
    2265    1752   01CD2 C0E0             div32:        push   acc                  ;registers op de stack zetten
    2266    1753   01CD4 C0D0                           push   psw
    2267    1754   01CD6 C070                           push   h0
    2268    1755   01CD8 C071                           push   h1
    2269    1756   01CDA C072                           push   h2
    2270    1757   01CDC C073                           push   h3
    2271    1758   01CDE C074                           push   h4
    2272    1759   01CE0 C075                           push   h5
    2273    1760   01CE2 C076                           push   h6
    2274    1761   01CE4 C077                           push   h7
    2275    1762   01CE6 C078                           push   h8
    2276    1763   01CE8 C079                           push   h9
    2277    1764   01CEA C07A                           push   h10
    2278    1765   01CEC C07B                           push   h11
    2279    1766   01CEE C07C                           push   h12
    2280    1767   01CF0                  
    2281    1768   01CF0                  ; eerst alles voorladen
    2282    1769   01CF0                  
    2283    1770   01CF0 757000                         mov    h0,#000h
    2284    1771   01CF3 757100                         mov    h1,#000h
    2285    1772   01CF6 757200                         mov    h2,#000h
    2286    1773   01CF9 757300                         mov    h3,#000h
    2287    1774   01CFC 757400                         mov    h4,#000h
    2288    1775   01CFF 757500                         mov    h5,#000h
    2289    1776   01D02 757600                         mov    h6,#000h
    2290    1777   01D05 757700                         mov    h7,#000h
    2291    1778   01D08 757800                         mov    h8,#000h
    2292    1779   01D0B 757900                         mov    h9,#000h
    2293    1780   01D0E 757A00                         mov    h10,#000h
    2294    1781   01D11 757B00                         mov    h11,#000h
    2295    1782   01D14 757C20                         mov    h12,#32              ;loopcounter
    2296    1783   01D17                  
    2297    1784   01D17                  ; we gaan het te delen getal in de passende hulpregisters shiften
    2298    1785   01D17                  
    2299    1786   01D17                  ; deze lus moet 32 keer heraald worden
    2300    1787   01D17                  
    2301    1788   01D17 E8               div321:       mov    a,r0                 ;h3-r0 is te delen getal
    2302    1789   01D18 33                             rlc    a
    2303    1790   01D19 F8                             mov    r0,a
    2304    1791   01D1A E9                             mov    a,r1
    2305    1792   01D1B 33                             rlc    a
    2306    1793   01D1C F9                             mov    r1,a
    2307    1794   01D1D EA                             mov    a,r2
    2308    1795   01D1E 33                             rlc    a
    2309    1796   01D1F FA                             mov    r2,a
    2310    1797   01D20 EB                             mov    a,r3
    2311    1798   01D21 33                             rlc    a
    2312    1799   01D22 FB                             mov    r3,a
    2313    1800   01D23 E570                           mov    a,h0
    2314    1801   01D25 33                             rlc    a
    2315    1802   01D26 F570                           mov    h0,a
    2316    1803   01D28 E571                           mov    a,h1
    2317    1804   01D2A 33                             rlc    a
    2318    1805   01D2B F571                           mov    h1,a
    2319    1806   01D2D E572                           mov    a,h2
    2320    1807   01D2F 33                             rlc    a
    2321    1808   01D30 F572                           mov    h2,a
    2322    1809   01D32 E573                           mov    a,h3
    2323    1810   01D34 33                             rlc    a
    2324    1811   01D35 F573                           mov    h3,a
    2325    1812   01D37                  
    2326    1813   01D37                  ; nu testen of het deeltal in h3-h0 past, tussenuitkomst in h7-h4
    2327    1814   01D37                  
    2328    1815   01D37 C3                             clr    c                    ;zit in de weg
    2329    1816   01D38 E570                           mov    a,h0
    2330    1817   01D3A 9C                             subb   a,r4
    2331    1818   01D3B F574                           mov    h4,a
    2332    1819   01D3D E571                           mov    a,h1
    2333    1820   01D3F 9D                             subb   a,r5
    2334    1821   01D40 F575                           mov    h5,a
    2335    1822   01D42 E572                           mov    a,h2
    2336    1823   01D44 9E                             subb   a,r6
    2337    1824   01D45 F576                           mov    h6,a
    2338    1825   01D47 E573                           mov    a,h3
    2339    1826   01D49 9F                             subb   a,r7
    2340    1827   01D4A F577                           mov    h7,a
    2341    1828   01D4C                  
    2342    1829   01D4C                  ; als er geen carry is, dan is het verschil succesvol, en moeten h3-h0
    2343    1830   01D4C                  ; vervangen worden door h7-h4
    2344    1831   01D4C                  
    2345    1832   01D4C 400C                           jc     div322               ;niet vervangen
    2346    1833   01D4E                  
    2347    1834   01D4E 857470                         mov    h0,h4
    2348    1835   01D51 857571                         mov    h1,h5
    2349    1836   01D54 857672                         mov    h2,h6
    2350    1837   01D57 857773                         mov    h3,h7                ;vervanging klaar
    2351    1838   01D5A                  
    2352    1839   01D5A B3               div322:       cpl    c                    ;dit moet in h11-h8 (uitkomst)
    2353    1840   01D5B E578                           mov    a,h8
    2354    1841   01D5D 33                             rlc    a
    2355    1842   01D5E F578                           mov    h8,a
    2356    1843   01D60 E579                           mov    a,h9
    2357    1844   01D62 33                             rlc    a
    2358    1845   01D63 F579                           mov    h9,a
    2359    1846   01D65 E57A                           mov    a,h10
    2360    1847   01D67 33                             rlc    a
    2361    1848   01D68 F57A                           mov    h10,a
    2362    1849   01D6A E57B                           mov    a,h11
    2363    1850   01D6C 33                             rlc    a
    2364    1851   01D6D F57B                           mov    h11,a                ;qoutient aangepast
    2365    1852   01D6F                  
    2366    1853   01D6F D57CA5                         djnz   h12,div321           ;32 keer herhalen
    2367    1854   01D72                  
    2368    1855   01D72                  ; de berekening is klaar. uitkomstregisters nog laden
    2369    1856   01D72                  
    2370    1857   01D72 AC78                           mov    r4,h8
    2371    1858   01D74 AD79                           mov    r5,h9
    2372    1859   01D76 AE7A                           mov    r6,h10
    2373    1860   01D78 AF7B                           mov    r7,h11               ;uitkomst geladen
    2374    1861   01D7A                  
    2375    1862   01D7A A870                           mov    r0,h0                ;rest laden
    2376    1863   01D7C A971                           mov    r1,h1
    2377    1864   01D7E AA72                           mov    r2,h2
    2378    1865   01D80 AB73                           mov    r3,h3
    2379    1866   01D82                  
    2380    1867   01D82 D07C                           pop    h12                  ;registers herstellen
    2381    1868   01D84 D07B                           pop    h11
    2382    1869   01D86 D07A                           pop    h10
    2383    1870   01D88 D079                           pop    h9
    2384    1871   01D8A D078                           pop    h8
    2385    1872   01D8C D077                           pop    h7
    2386    1873   01D8E D076                           pop    h6
    2387    1874   01D90 D075                           pop    h5
    2388    1875   01D92 D074                           pop    h4
    2389    1876   01D94 D073                           pop    h3
    2390    1877   01D96 D072                           pop    h2
    2391    1878   01D98 D071                           pop    h1
    2392    1879   01D9A D070                           pop    h0
    2393    1880   01D9C D0D0                           pop    psw
    2394    1881   01D9E D0E0                           pop    acc
    2395    1882   01DA0 22                             ret
    2396    1883   01DA1                  
    2397    1884   01DA1                  
    2398    1885   01DA1                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2399    1886   01DA1                  ;
    2400    1887   01DA1                  ; div16       is de routine die twee 16 bit getallen zal delen (eerste/tweede).
    2401    1888   01DA1                  ; input:      r1,r0 = eerste getal (r1=msb)
    2402    1889   01DA1                  ;             r3,r2 = tweede getal (r3=msb)
    2403    1890   01DA1                  ; output:     r3,r2 = quotient (r3=msb)
    2404    1891   01DA1                  ;             r1,r0 = rest (r1=msb)
    2405    1892   01DA1                  ;             carry=1 bij deling door 0
    2406    1893   01DA1                  ;
    2407    1894   01DA1                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2408    1895   01DA1                  
    2409    1896   01DA1 C0E0             div16:        push   acc                  ;registers op de stack zetten
    2410    1897   01DA3 C0D0                           push   psw
    2411    1898   01DA5 C070                           push   h0
    2412    1899   01DA7 C071                           push   h1
    2413    1900   01DA9 C072                           push   h2
    2414    1901   01DAB C073                           push   h3
    2415    1902   01DAD C074                           push   h4
    2416    1903   01DAF C075                           push   h5
    2417    1904   01DB1 C076                           push   h6
    2418    1905   01DB3                  
    2419    1906   01DB3                  ; registers voorladen
    2420    1907   01DB3                  
    2421    1908   01DB3 757000                         mov    h0,#000h
    2422    1909   01DB6 757100                         mov    h1,#000h
    2423    1910   01DB9 757200                         mov    h2,#000h
    2424    1911   01DBC 757300                         mov    h3,#000h
    2425    1912   01DBF 757400                         mov    h4,#000h
    2426    1913   01DC2 757500                         mov    h5,#000h
    2427    1914   01DC5 757610                         mov    h6,#16               ;loopcounter
    2428    1915   01DC8                  
    2429    1916   01DC8                  ; eerst te delen getal 1*links shiften in hulpregisters
    2430    1917   01DC8                  
    2431    1918   01DC8                  ; deze lus moet 16 keer herhaald worden
    2432    1919   01DC8                  
    2433    1920   01DC8 E8               div161:       mov    a,r0                 ;32 bit shift in h1-r0
    2434    1921   01DC9 33                             rlc    a
    2435    1922   01DCA F8                             mov    r0,a
    2436    1923   01DCB E9                             mov    a,r1
    2437    1924   01DCC 33                             rlc    a
    2438    1925   01DCD F9                             mov    r1,a
    2439    1926   01DCE E570                           mov    a,h0
    2440    1927   01DD0 33                             rlc    a
    2441    1928   01DD1 F570                           mov    h0,a
    2442    1929   01DD3 E571                           mov    a,h1
    2443    1930   01DD5 33                             rlc    a
    2444    1931   01DD6 F571                           mov    h1,a
    2445    1932   01DD8                  
    2446    1933   01DD8                  ; nagaan of in h1-h0 de deler past r3-r2. h3-h2 wordt gebruikt voor
    2447    1934   01DD8                  ; het tussenresultaat.
    2448    1935   01DD8                  
    2449    1936   01DD8 C3                             clr    c
    2450    1937   01DD9 E570                           mov    a,h0
    2451    1938   01DDB 9A                             subb   a,r2
    2452    1939   01DDC F572                           mov    h2,a
    2453    1940   01DDE E571                           mov    a,h1
    2454    1941   01DE0 9B                             subb   a,r3
    2455    1942   01DE1 F573                           mov    h3,a
    2456    1943   01DE3                  
    2457    1944   01DE3 4006                           jc     div162               ;als carry dan h1-h0 niet vervangen
    2458    1945   01DE5                                                            ;door h3,h2
    2459    1946   01DE5 857270                         mov    h0,h2
    2460    1947   01DE8 857371                         mov    h1,h3                ;vervanging klaar
    2461    1948   01DEB                  
    2462    1949   01DEB                  ; uitkomst moet aangepast worden
    2463    1950   01DEB                  
    2464    1951   01DEB B3               div162:       cpl    c                    ;truuk
    2465    1952   01DEC E574                           mov    a,h4
    2466    1953   01DEE 33                             rlc    a
    2467    1954   01DEF F574                           mov    h4,a
    2468    1955   01DF1 E575                           mov    a,h5
    2469    1956   01DF3 33                             rlc    a
    2470    1957   01DF4 F575                           mov    h5,a
    2471    1958   01DF6 D576CF                         djnz   h6,div161            ;16 keer herhalen
    2472    1959   01DF9                  
    2473    1960   01DF9                  ; de berekening is klaar. uitkomsten in passende registers
    2474    1961   01DF9                  
    2475    1962   01DF9 AA74                           mov    r2,h4                ;quotient
    2476    1963   01DFB AB75                           mov    r3,h5
    2477    1964   01DFD                  
    2478    1965   01DFD A870                           mov    r0,h0                ;rest
    2479    1966   01DFF A971                           mov    r1,h1
    2480    1967   01E01                  
    2481    1968   01E01 D076                           pop    h6                   ;registers herstellen
    2482    1969   01E03 D075                           pop    h5
    2483    1970   01E05 D074                           pop    h4
    2484    1971   01E07 D073                           pop    h3
    2485    1972   01E09 D072                           pop    h2
    2486    1973   01E0B D071                           pop    h1
    2487    1974   01E0D D070                           pop    h0
    2488    1975   01E0F D0D0                           pop    psw
    2489    1976   01E11 D0E0                           pop    acc
    2490    1977   01E13 22                             ret
    2491    1978   01E14                  
    2492    1979   01E14                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2493    1980   01E14                  ;
    2494    1981   01E14                  ; add32       zal twee 32 bit getallen optellen en een 40 bit uitkomst.
    2495    1982   01E14                  ;
    2496    1983   01E14                  ; input:      r3,r2,r1,r0 = eerste getal (r3=msb)
    2497    1984   01E14                  ;             r7,r6,r5,r4 = tweede getal (r7=msb)
    2498    1985   01E14                  ; output:     r4,r3,r2,r1,r0 (r4=msb)
    2499    1986   01E14                  ;
    2500    1987   01E14                  ; r4,r3,r2,r1,r0 worden aangepast
    2501    1988   01E14                  ;
    2502    1989   01E14                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2503    1990   01E14                  
    2504    1991   01E14 C0E0             add32:        push   acc                  ;registers op de stack zetten
    2505    1992   01E16 C0D0                           push   psw
    2506    1993   01E18 E8                             mov    a,r0                 ;eerste 8 bit
    2507    1994   01E19 2C                             add    a,r4
    2508    1995   01E1A F8                             mov    r0,a                 ;klaar
    2509    1996   01E1B E9                             mov    a,r1                 ;volgende 8 bit
    2510    1997   01E1C 3D                             addc   a,r5
    2511    1998   01E1D F9                             mov    r1,a                 ;klaar
    2512    1999   01E1E EA                             mov    a,r2                 ;volgende 8 bit
    2513    2000   01E1F 3E                             addc   a,r6
    2514    2001   01E20 FA                             mov    r2,a                 ;klaar
    2515    2002   01E21 EB                             mov    a,r3                 ;laatste 8 bit
    2516    2003   01E22 3F                             addc   a,r7
    2517    2004   01E23 FB                             mov    r3,a                 ;32 bit klaar
    2518    2005   01E24 7400                           mov    a,#000h
    2519    2006   01E26 3400                           addc   a,#000h              ;carry verrekenen
    2520    2007   01E28 FC                             mov    r4,a
    2521    2008   01E29 D0D0                           pop    psw                  ;registers herstellen
    2522    2009   01E2B D0E0                           pop    acc
    2523    2010   01E2D 22                             ret
    2524    2011   01E2E                  
    2525    2012   01E2E                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2526    2013   01E2E                  ;
    2527    2014   01E2E                  ; add16       zal twee 16 bit getallen optellen en een 24 bit uitkomst.
    2528    2015   01E2E                  ;
    2529    2016   01E2E                  ; input:      r1,r0 = eerste getal (r1=msb)
    2530    2017   01E2E                  ;             r3,r2 = tweede getal (r3=msb)
    2531    2018   01E2E                  ; output:     r2,r1,r0 (r2=msb)
    2532    2019   01E2E                  ;
    2533    2020   01E2E                  ; r3,r2,r1,r0 worden aangepast
    2534    2021   01E2E                  ;
    2535    2022   01E2E                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2536    2023   01E2E                  
    2537    2024   01E2E C0E0             add16:        push   acc                  ;geen registers gebruiken behalve rx
    2538    2025   01E30 C0D0                           push   psw
    2539    2026   01E32 E8                             mov    a,r0                 ;starten met de optelling
    2540    2027   01E33 2A                             add    a,r2                 ;8 bit klaar
    2541    2028   01E34 F8                             mov    r0,a                 ;uitkomst wegschrijven
    2542    2029   01E35 E9                             mov    a,r1                 ;volgende 8 bit
    2543    2030   01E36 3B                             addc   a,r3                 ;16 bit klaar
    2544    2031   01E37 F9                             mov    r1,a                 ;uitkomst weggeschreven
    2545    2032   01E38 7400                           mov    a,#000h              ;carry verrekenen
    2546    2033   01E3A 3400                           addc   a,#000h
    2547    2034   01E3C FA                             mov    r2,a                 ;24 bit klaar
    2548    2035   01E3D D0D0                           pop    psw                  ;registers herstellen
    2549    2036   01E3F D0E0                           pop    acc
    2550    2037   01E41 22                             ret
    2551    2038   01E42                  
    2552    2039   01E42                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2553    2040   01E42                  ;
    2554    2041   01E42                  ; sub32       zal het verschil berekenen van 2 32 bit getallen. De uitkomst is
    2555    2042   01E42                  ;             40 bit groot. (eerste -tweede)
    2556    2043   01E42                  ; input:      r3,r2,r1,r0 = eerste getal (r3=msb)
    2557    2044   01E42                  ;             r7,r6,r5,r4 = tweede getal (r7=msb)
    2558    2045   01E42                  ; output:     r4,r3,r2,r1,r0 (r4=msb)
    2559    2046   01E42                  ;
    2560    2047   01E42                  ; r4,r3,r2,r1,r0 worden aangepast
    2561    2048   01E42                  ;
    2562    2049   01E42                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2563    2050   01E42                  
    2564    2051   01E42 C0E0             sub32:        push   acc                  ;registers bewaren
    2565    2052   01E44 C0D0                           push   psw                  ;ook de vlaggen
    2566    2053   01E46 C3                             clr    c                    ;zit nog effe in de weg
    2567    2054   01E47 E8                             mov    a,r0                 ;eerste 8 bit
    2568    2055   01E48 9C                             subb   a,r4
    2569    2056   01E49 F8                             mov    r0,a
    2570    2057   01E4A E9                             mov    a,r1                 ;tweede 8 bit
    2571    2058   01E4B 9D                             subb   a,r5
    2572    2059   01E4C F9                             mov    r1,a
    2573    2060   01E4D EA                             mov    a,r2                 ;volgende 8 bit
    2574    2061   01E4E 9E                             subb   a,r6
    2575    2062   01E4F FA                             mov    r2,a
    2576    2063   01E50 EB                             mov    a,r3                 ;laatste 8 bit
    2577    2064   01E51 9F                             subb   a,r7
    2578    2065   01E52 FB                             mov    r3,a
    2579    2066   01E53 7400                           mov    a,#000h              ;nu nog de carry
    2580    2067   01E55 9400                           subb   a,#000h
    2581    2068   01E57 FC                             mov    r4,a                 ;40 bit klaar
    2582    2069   01E58 D0D0                           pop    psw                  ;registers herstellen
    2583    2070   01E5A D0E0                           pop    acc
    2584    2071   01E5C 22                             ret
    2585    2072   01E5D                  
    2586    2073   01E5D                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2587    2074   01E5D                  ;
    2588    2075   01E5D                  ; sub16       zal het verschil berekenen van 2 16 bit getallen. De uitkomst is
    2589    2076   01E5D                  ;             24 bit groot. (eerste - tweede)
    2590    2077   01E5D                  ; input:      r1,r0 = eerste getal (r1=msb)
    2591    2078   01E5D                  ;             r3,r2 = tweede getal (r3=msb)
    2592    2079   01E5D                  ; output:     r2,r1,r0 (r2=msb)
    2593    2080   01E5D                  ;
    2594    2081   01E5D                  ; r3,r2,r1,r0 worden aangepast
    2595    2082   01E5D                  ;
    2596    2083   01E5D                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2597    2084   01E5D                  
    2598    2085   01E5D C0E0             sub16:        push   acc                  ;registers bewaren
    2599    2086   01E5F C0D0                           push   psw
    2600    2087   01E61 C3                             clr    c                    ;mag nog niet meespelen
    2601    2088   01E62 E8                             mov    a,r0                 ;eerste 8 bit verschil
    2602    2089   01E63 9A                             subb   a,r2
    2603    2090   01E64 F8                             mov    r0,a                 ;klaar
    2604    2091   01E65 E9                             mov    a,r1
    2605    2092   01E66 9B                             subb   a,r3                 ;16 bit klaar
    2606    2093   01E67 F9                             mov    r1,a
    2607    2094   01E68 7400                           mov    a,#000h
    2608    2095   01E6A 9400                           subb   a,#000h              ;eventuele carry verrekenen
    2609    2096   01E6C FA                             mov    r2,a                 ;24 bit klaar
    2610    2097   01E6D D0D0                           pop    psw                  ;registers herstellen
    2611    2098   01E6F D0E0                           pop    acc
    2612    2099   01E71 22                             ret
    2613    2100   01E72                  
    2614    2101   01E72                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2615    2102   01E72                  ;
    2616    2103   01E72                  ; hexbcd16    zet een 16 bit hex getal om in een 24 bit bcd getal
    2617    2104   01E72                  ; input       r1,r0 = 16 bit hex getal (r1=msb)
    2618    2105   01E72                  ; output      r2,r1,r0 =24 bit bcd getal (r2=msb)
    2619    2106   01E72                  ;
    2620    2107   01E72                  ; de routine gebruikt alleen de registers r3,r2,r1,r0 van de huidige bank
    2621    2108   01E72                  ;
    2622    2109   01E72                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2623    2110   01E72                  
    2624    2111   01E72 C0E0             hexbcd16:     push   acc                  ;registers effe bewaren op de stack
    2625    2112   01E74 C0D0                           push   psw
    2626    2113   01E76                  
    2627    2114   01E76 C077                           push   h7                   ;nodig
    2628    2115   01E78 C078                           push   h8
    2629    2116   01E7A                  
    2630    2117   01E7A C079                           push   h9                   ;ook
    2631    2118   01E7C                  
    2632    2119   01E7C 757905                         mov    h9,#005h             ;loopcounter
    2633    2120   01E7F                  
    2634    2121   01E7F 7B00             hexbcd161:    mov    r3,#000h
    2635    2122   01E81 7A0A                           mov    r2,#00ah             ;hierdoor delen we
    2636    2123   01E83 121DA1                         lcall  div16                ;deling uitvoeren
    2637    2124   01E86 E8                             mov    a,r0                 ;rest
    2638    2125   01E87 C0E0                           push   acc                  ;op stack zetten
    2639    2126   01E89 EA                             mov    a,r2
    2640    2127   01E8A F8                             mov    r0,a
    2641    2128   01E8B EB                             mov    a,r3
    2642    2129   01E8C F9                             mov    r1,a                 ;uitkomst terug delen
    2643    2130   01E8D D579EF                         djnz   h9,hexbcd161
    2644    2131   01E90                  
    2645    2132   01E90 D0E0                           pop    acc                  ;hoogste bits van de stack
    2646    2133   01E92 FA                             mov    r2,a                 ;klaar
    2647    2134   01E93 D0E0                           pop    acc
    2648    2135   01E95 C4                             swap   a
    2649    2136   01E96 F579                           mov    h9,a
    2650    2137   01E98 D0E0                           pop    acc
    2651    2138   01E9A 2579                           add    a,h9
    2652    2139   01E9C F9                             mov    r1,a                 ;volgende 8 klaar
    2653    2140   01E9D D0E0                           pop    acc
    2654    2141   01E9F C4                             swap   a
    2655    2142   01EA0 F579                           mov    h9,a
    2656    2143   01EA2 D0E0                           pop    acc
    2657    2144   01EA4 2579                           add    a,h9
    2658    2145   01EA6 F8                             mov    r0,a                 ;klaar
    2659    2146   01EA7                  
    2660    2147   01EA7 D079                           pop    h9                   ;was naar de knoppen
    2661    2148   01EA9                  
    2662    2149   01EA9 D078                           pop    h8                   ;gebruikt
    2663    2150   01EAB D077                           pop    h7
    2664    2151   01EAD                  
    2665    2152   01EAD D0D0                           pop    psw                  ;registers herstellen
    2666    2153   01EAF D0E0                           pop    acc
    2667    2154   01EB1 22                             ret
    2668    2155   01EB2                  
    2669    2156   01EB2                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2670    2157   01EB2                  ;
    2671    2158   01EB2                  ; hexbcd8     zet een 8 bit hex getal om in een 8 bit bcd getal
    2672    2159   01EB2                  ; input       a (maximale waarde = 63h)
    2673    2160   01EB2                  ; output      a
    2674    2161   01EB2                  ;
    2675    2162   01EB2                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2676    2163   01EB2                  
    2677    2164   01EB2 C0D0             hexbcd8:      push   psw                  ;registers op stack zetten
    2678    2165   01EB4 C0F0                           push   b
    2679    2166   01EB6 75F00A                         mov    b,#00ah              ;hierdoor delen
    2680    2167   01EB9 84                             div    ab                   ;in accu qoutient in b rest
    2681    2168   01EBA C4                             swap   a
    2682    2169   01EBB 25F0                           add    a,b                  ;bcd getal klaar
    2683    2170   01EBD D0F0                           pop    b
    2684    2171   01EBF D0D0                           pop    psw
    2685    2172   01EC1 22                             ret
    2686    2173   01EC2                  
    2687    2174   01EC2                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2688    2175   01EC2                  ;
    2689    2176   01EC2                  ; bcdhex16    zal een 16 bit bcd getal omzetten naar een hex getal.
    2690    2177   01EC2                  ; input:       r1,r0 = 16 bit bcd getal (r1=msb)
    2691    2178   01EC2                  ; output:      r1,r0 = 16 bit hex getal (r1=msb)
    2692    2179   01EC2                  ;
    2693    2180   01EC2                  ; de routine gebruikt r1,r0 van de huidige bank
    2694    2181   01EC2                  ;
    2695    2182   01EC2                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2696    2183   01EC2                  
    2697    2184   01EC2 C0F0             bcdhex16:     push   b                    ;hebben we nodig
    2698    2185   01EC4 C0E0                           push   acc
    2699    2186   01EC6 C0D0                           push   psw
    2700    2187   01EC8                  
    2701    2188   01EC8 E8                             mov    a,r0
    2702    2189   01EC9 540F                           anl    a,#00fh              ;eenheden
    2703    2190   01ECB C0E0                           push   acc                  ;effe bewaren
    2704    2191   01ECD                  
    2705    2192   01ECD E8                             mov    a,r0
    2706    2193   01ECE C4                             swap   a
    2707    2194   01ECF 540F                           anl    a,#00fh              ;tientallen
    2708    2195   01ED1 75F00A                         mov    b,#00ah              ;waarde berekenen
    2709    2196   01ED4 A4                             mul    ab                   ;klaar
    2710    2197   01ED5 D0F0                           pop    b                    ;truukje
    2711    2198   01ED7 25F0                           add    a,b                  ;a is lage deel hex getal
    2712    2199   01ED9 C0E0                           push   acc                  ;straks nodig
    2713    2200   01EDB                  
    2714    2201   01EDB E9                             mov    a,r1                 ;hoge deel
    2715    2202   01EDC 54F0                           anl    a,#0f0h
    2716    2203   01EDE C4                             swap   a
    2717    2204   01EDF C0E0                           push   acc                  ;straks nodig
    2718    2205   01EE1                  
    2719    2206   01EE1 E9                             mov    a,r1
    2720    2207   01EE2 540F                           anl    a,#00fh              ;gaan we verder bewerken
    2721    2208   01EE4 75F064                         mov    b,#100               ;waarde uitrekenen
    2722    2209   01EE7 A4                             mul    ab
    2723    2210   01EE8 A9F0                           mov    r1,b
    2724    2211   01EEA F8                             mov    r0,a
    2725    2212   01EEB                  
    2726    2213   01EEB D0E0                           pop    acc
    2727    2214   01EED 75F00A                         mov    b,#10
    2728    2215   01EF0 A4                             mul    ab                   ;kan nog in a
    2729    2216   01EF1 75F064                         mov    b,#100               ;*10*100=*1000
    2730    2217   01EF4 A4                             mul    ab
    2731    2218   01EF5 28                             add    a,r0
    2732    2219   01EF6 F8                             mov    r0,a
    2733    2220   01EF7 E9                             mov    a,r1
    2734    2221   01EF8 35F0                           addc   a,b
    2735    2222   01EFA F9                             mov    r1,a
    2736    2223   01EFB                  
    2737    2224   01EFB D0E0                           pop    acc
    2738    2225   01EFD 28                             add    a,r0
    2739    2226   01EFE F8                             mov    r0,a
    2740    2227   01EFF 7400                           mov    a,#000h
    2741    2228   01F01 39                             addc   a,r1
    2742    2229   01F02 F9                             mov    r1,a                 ;klaar
    2743    2230   01F03                  
    2744    2231   01F03 D0D0                           pop    psw
    2745    2232   01F05 D0E0                           pop    acc
    2746    2233   01F07 D0F0                           pop    b
    2747    2234   01F09 22                             ret
    2748    2235   01F0A                  
    2749    2236   01F0A                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2750    2237   01F0A                  ;
    2751    2238   01F0A                  ; bcdhex8     zal een 8 bit bcd getal omzetten naar een hex getal.
    2752    2239   01F0A                  ; input:      a (maximale waarde 99h)
    2753    2240   01F0A                  ; output:     a
    2754    2241   01F0A                  ;
    2755    2242   01F0A                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2756    2243   01F0A                  
    2757    2244   01F0A C0D0             bcdhex8:      push   psw                  ;registers op de stack zetten
    2758    2245   01F0C C0F0                           push   b
    2759    2246   01F0E C070                           push   h0
    2760    2247   01F10 F570                           mov    h0,a                 ;effe bewaren
    2761    2248   01F12 53700F                         anl    h0,#00fh             ;alleen 4 laagste bits
    2762    2249   01F15 54F0                           anl    a,#0f0h              ;hier alleen 4 hoogste bits
    2763    2250   01F17 C4                             swap   a
    2764    2251   01F18 75F00A                         mov    b,#00ah              ;berekenen waarde 4 hoogste bits
    2765    2252   01F1B A4                             mul    ab
    2766    2253   01F1C 2570                           add    a,h0                 ;eenheden bijtellen
    2767    2254   01F1E D070                           pop    h0
    2768    2255   01F20 D0F0                           pop    b
    2769    2256   01F22 D0D0                           pop    psw
    2770    2257   01F24 22                             ret
    2771    2258   01F25                  
    2772    2259   01F25                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2773    2260   01F25                  ;
    2774    2261   01F25                  ; xcsw2xtal          schakeld overvan de inwendige oscillator naar een extern kristal.
    2775    2262   01F25                  ;
    2776    2263   01F25                  ; Gebruikt geen registers
    2777    2264   01F25                  ;
    2778    2265   01F25                  ; Originele auteur: Danny Pawels (dp)
    2779    2266   01F25                  ;
    2780    2267   01F25                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2781    2268   01F25                  
    2782    2269   01F25                  
    2783    2270   01F25 C083             XCsw2xtal:  push  dph
    2784    2271   01F27 C082                         push  dpl
    2785    2272   01F29 C0D0                         push  psw
    2786    2273   01F2B C08F                         push  syscon0
    2787    2274   01F2D C0B2                         push  port_page
    2788    2275   01F2F C0BF                         push  scu_page
    2789    2276   01F31                  
    2790    2277   01F31 758F04                       mov   syscon0,#04h            ;selecteer RMAP0
    2791    2278   01F34 75BF01                       mov   scu_page,#1             ;page 1 van SCU selecteren
    2792    2279   01F37                  
    2793    2280   01F37 43B708                       orl   pll_con,#00001000b      ;VCOBYP=1  bypass de PLL
    2794    2281   01F3A                                                            ;freq= VCO-free running =5MHz...20MHz?
    2795    2282   01F3A 43B704                       orl   pll_con,#00000100b      ;OSCDISC=1 disconnect osc. en PLL
    2796    2283   01F3D 53B6F7                       anl   osc_con,#11110111b      ;XPD=0  externe osc. power-up
    2797    2284   01F40 43B604                       orl   osc_con,#00000100b      ;OSCSS=1 externe oscillator selecteren
    2798    2285   01F43                  
    2799    2286   01F43 90F000                       mov   dptr,#0f000h            ;wacht tot externe osc stabiel is...
    2800    2287   01F46 A3               XCsw2xtal0: inc   dptr
    2801    2288   01F47 E582                         mov   a,dpl
    2802    2289   01F49 4583                         orl   a,dph
    2803    2290   01F4B 70F9                         jnz   XCsw2xtal0
    2804    2291   01F4D                  
    2805    2292   01F4D 43B602           XCsw2xtal1: orl   osc_con,#00000010b      ;ORDRES=1 osc run detectie starten
    2806    2293   01F50                  
    2807    2294   01F50                  ;wacht,...dit kan lang duren... tot >2048 VCO cycli...
    2808    2295   01F50 E5B6             XCsw2xtal2: mov   a,osc_con               ;check OSCR en ORDRES bits (2 LSB's osc_con)
    2809    2296   01F52 20E1FB                       jb    acc.1,XCsw2xtal2        ;Osc.RunDETect klaar? ='0'
    2810    2297   01F55                  ;Oscillator run detectie is klaar...
    2811    2298   01F55 30E0F5                       jnb    acc.0,XCsw2xtal1       ;OSCR=1? ja, dan oscillator running...
    2812    2299   01F58                  
    2813    2300   01F58                  
    2814    2301   01F58 E5B7                         mov   a,pll_con               ;lees pll_con
    2815    2302   01F5A 540F                         anl   a,#0fh                  ;maskeer onderste bits
    2816    2303   01F5C 44A0                         orl   a,#10100000b            ;stel NDIV in op 1010=waarde 24
    2817    2304   01F5E                  ;OPGELET: het password moet worden gegeven, dan kan er gedurende 32cclk cycli naar
    2818    2305   01F5E                  ;beveiligde locaties worden geschreven zoals NDIV en KDIV van de PLL, de watchdog
    2819    2306   01F5E                  ;enable bit WDTEN en de power-down en slow down enable bits PD en SD !!!!
    2820    2307   01F5E 75BB98                       mov   passwd,#98h             ;het is nodig het password in te stellen!!!
    2821    2308   01F61                                                            ;bij aanpassing van de NDIV van de PLL
    2822    2309   01F61 F5B7                         mov   pll_con,a               ;N=24 is nodig bij een 8MHz xtal
    2823    2310   01F63 53B7FB                       anl   pll_con,#11111011b      ;OSCDISC=0 connect osc en PLL
    2824    2311   01F66 43B702                       orl   pll_con,#00000010b      ;RESLD=1 restart PLL lock detection
    2825    2312   01F69                  
    2826    2313   01F69 E5B7             XCsw2xtal3: mov   a,pll_con               ;check de LOCK bit (lsb van dit register)
    2827    2314   01F6B 20E0FB                       jb    acc.0,XCsw2xtal3        ;ga pas verder als PLL gelocked is op osc.
    2828    2315   01F6E                  
    2829    2316   01F6E 53B7F7                       anl   pll_con,#11110111b      ;VCOBYP=0 fsys is PLL gelockte frequentie.
    2830    2317   01F71 43B610                       orl   osc_con,#00010000b      ;OSCPD=1 interne osc. power-down
    2831    2318   01F74                  
    2832    2319   01F74 D0BF                         pop   scu_page                ;herstel controller status
    2833    2320   01F76 D0B2                         pop   port_page
    2834    2321   01F78 D08F                         pop   syscon0
    2835    2322   01F7A D0D0                         pop   psw
    2836    2323   01F7C D082                         pop   dpl
    2837    2324   01F7E D083                         pop   dph
    2838    2325   01F80 22                           ret
    2839    2326   01F81                  
    2840    2327   01F81                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2841    2328   01F81                  ;
    2842    2329   01F81                  ; mapregs	selecteer de SFR's in de mapped area
    2843    2330   01F81                  ;
    2844    2331   01F81                  ;
    2845    2332   01F81                  ; Past syscon SFR aan
    2846    2333   01F81                  ;
    2847    2334   01F81                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2848    2335   01F81                  
    2849    2336   01F81 438F01           mapregs:	orl   syscon0,#00000001b	;set bit rmap
    2850    2337   01F84 22               		ret
    2851    2338   01F85                  
    2852    2339   01F85                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2853    2340   01F85                  ;
    2854    2341   01F85                  ; nomapregs	selecteer de SFR's in de non-mapped area
    2855    2342   01F85                  ;
    2856    2343   01F85                  ; Past syscon SFR aan
    2857    2344   01F85                  ;
    2858    2345   01F85                  ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2859    2346   01F85                  
    2860    2347   01F85 538FFE           nomapregs:  anl    syscon0,#11111110b	;clear bit rmap
    2861    2348   01F88 22               		ret
    2862    2349   01F89                  
    2863    2350   01F89                  ;*******************************************************************************
    2864    2351   01F89                  ;
    2865    2352   01F89                  ; These are the register declarations for the XC888 microcontroller from
    2866    2353   01F89                  ; Infineon.
    2867    2354   01F89                  ;
    2868    2355   01F89                  ;*******************************************************************************
    2869    2356   01F89                  
    2870    2357   01F89                  ;*******************************************************************************
    2871    2358   01F89                  ;
    2872    2359   01F89                  ; CPU registers are accessible independend of paging and mapping
    2873    2360   01F89                  ; (always accessible)
    2874    2361   01F89                  ;
    2875    2362   01F89                  ;*******************************************************************************
    2876    2363   01F89                  
    2877    2364   01F89                  sp            data   081h          ;stack pointer                     reset=007h
    2878    2365   01F89                  dpl           data   082h          ;datapointer low register          reset=000h
    2879    2366   01F89                  dph           data   083h          ;datapointer high register         reset=000h
    2880    2367   01F89                  pcon          data   087h          ;power control                     reset=000h
    2881    2368   01F89                  tcon          data   088h          ;timer 0-1 control                 reset=000h
    2882    2369   01F89                  ;tcon is bit addressable
    2883    2370   01F89                         tf1    bit    08fh
    2884    2371   01F89                         tr1    bit    08eh
    2885    2372   01F89                         tf0    bit    08dh
    2886    2373   01F89                         tr0    bit    08ch
    2887    2374   01F89                         ie1    bit    08bh
    2888    2375   01F89                         it1    bit    08ah
    2889    2376   01F89                         ie0    bit    089h
    2890    2377   01F89                         it0    bit    088h
    2891    2378   01F89                  
    2892    2379   01F89                  tmod          data   089h          ;timer 0-1 mode                    reset=000h
    2893    2380   01F89                  tl0           data   08ah          ;timer 0 low                       reset=000h
    2894    2381   01F89                  tl1           data   08bh          ;timer 1 low                       reset=000h
    2895    2382   01F89                  th0           data   08ch          ;timer 0 high                      reset=000h
    2896    2383   01F89                  th1           data   08dh          ;timer 1 high                      reset=000h
    2897    2384   01F89                  
    2898    2385   01F89                  syscon0       data   08fh          ;system control register 0         reset=004h
    2899    2386   01F89                  scon          data   098h          ;serial channel 0 control          reset=000h
    2900    2387   01F89                  ;scon is bit addressable
    2901    2388   01F89                         sm0    bit    09fh
    2902    2389   01F89                         sm1    bit    09eh
    2903    2390   01F89                         sm2    bit    09dh
    2904    2391   01F89                         ren    bit    09ch
    2905    2392   01F89                         tb8    bit    09bh
    2906    2393   01F89                         rb8    bit    09ah
    2907    2394   01F89                         ti     bit    099h
    2908    2395   01F89                         ri     bit    098h
    2909    2396   01F89                  
    2910    2397   01F89                  sbuf          data   099h          ;serial data buffer channel 0
    2911    2398   01F89                  eo            data   0a2h          ;extended operation                reset=000h
    2912    2399   01F89                  ien0          data   0a8h          ;interrupt enable 0                reset=000h
    2913    2400   01F89                  ;ien0 is bit addressable
    2914    2401   01F89                         ea     bit    0afh
    2915    2402   01F89                                                     ;bit not implemented
    2916    2403   01F89                         et2    bit    0adh
    2917    2404   01F89                         es     bit    0ach
    2918    2405   01F89                         et1    bit    0abh
    2919    2406   01F89                         ex1    bit    0aah
    2920    2407   01F89                         et0    bit    0a9h
    2921    2408   01F89                         ex0    bit    0a8h
    2922    2409   01F89                  
    2923    2410   01F89                  ip            data   0b8h          ;interrupt priotity                reset=000h
    2924    2411   01F89                  ;ip is bit addressable
    2925    2412   01F89                                                     ;bit not implemented
    2926    2413   01F89                                                     ;bit not implemented
    2927    2414   01F89                         pt2    bit    0bdh
    2928    2415   01F89                         ps     bit    0bch
    2929    2416   01F89                         pt1    bit    0bbh
    2930    2417   01F89                         px1    bit    0bah
    2931    2418   01F89                         pt0    bit    0b9h
    2932    2419   01F89                         px0    bit    0b8h
    2933    2420   01F89                  
    2934    2421   01F89                  iph           data   0b9h          ;interrupt priority high           reset=000h
    2935    2422   01F89                  psw           data   0d0h          ;program status word               reset=000h
    2936    2423   01F89                  ;psw is bit addressable
    2937    2424   01F89                         cy     bit    0d7h
    2938    2425   01F89                         ac     bit    0d6h
    2939    2426   01F89                         f0     bit    0d5h
    2940    2427   01F89                         rs1    bit    0d4h
    2941    2428   01F89                         rs0    bit    0d3h
    2942    2429   01F89                         ov     bit    0d2h
    2943    2430   01F89                         f1     bit    0d1h
    2944    2431   01F89                         p      bit    0d0h
    2945    2432   01F89                  
    2946    2433   01F89                  acc           data   0e0h          ;accumulator                       reset=000h
    2947    2434   01F89                  ;acc is bit addressable
    2948    2435   01F89                  
    2949    2436   01F89                  ien1          data   0e8h          ;interrupt enable 1                reset=000h
    2950    2437   01F89                  ;ien1 is bit addressable
    2951    2438   01F89                         eccip3 bit    0efh
    2952    2439   01F89                         eccip2 bit    0eeh
    2953    2440   01F89                         eccip1 bit    0edh
    2954    2441   01F89                         eccip0 bit    0ech
    2955    2442   01F89                         exm    bit    0ebh
    2956    2443   01F89                         ex2    bit    0eah
    2957    2444   01F89                         essc   bit    0e9h
    2958    2445   01F89                         eadc   bit    0e8h
    2959    2446   01F89                  
    2960    2447   01F89                  b             data   0f0h          ;b register                        reset=000h
    2961    2448   01F89                  ;b is bit addressable
    2962    2449   01F89                  
    2963    2450   01F89                  ip1           data   0f8h          ;interrupt priority 1              reset=000h
    2964    2451   01F89                  ;ip1 is bit addressable
    2965    2452   01F89                         pccip3 bit    0ffh
    2966    2453   01F89                         pccip2 bit    0feh
    2967    2454   01F89                         pccip1 bit    0fdh
    2968    2455   01F89                         pccip0 bit    0fch
    2969    2456   01F89                         pxm    bit    0fbh
    2970    2457   01F89                         px2    bit    0fah
    2971    2458   01F89                         pssc   bit    0f9h
    2972    2459   01F89                         padc   bit    0f8h
    2973    2460   01F89                  
    2974    2461   01F89                  iph1          data   0f9h          ;interrupt priority 1 high         reset=000h
    2975    2462   01F89                  
    2976    2463   01F89                  
    2977    2464   01F89                  ;*******************************************************************************
    2978    2465   01F89                  ;
    2979    2466   01F89                  ; system control registers registers that can only be accessed in the non
    2980    2467   01F89                  ; mapped memory area (rmap=0) page independent
    2981    2468   01F89                  ;
    2982    2469   01F89                  ;*******************************************************************************
    2983    2470   01F89                  
    2984    2471   01F89                  scu_page      data   0bfh          ;page register scu                 reset=000h
    2985    2472   01F89                  
    2986    2473   01F89                  ;*******************************************************************************
    2987    2474   01F89                  ;
    2988    2475   01F89                  ; system control registers registers that can only be accessed in the non
    2989    2476   01F89                  ; mapped memory area (rmap=0) and page 0
    2990    2477   01F89                  ;
    2991    2478   01F89                  ;*******************************************************************************
    2992    2479   01F89                  
    2993    2480   01F89                  modpisel      data   0b3h          ;peripheral input select           reset=000h
    2994    2481   01F89                  ircon0        data   0b4h          ;interrupt request register        reset=000h
    2995    2482   01F89                  ircon1        data   0b5h          ;interrupt request register        reset=000h
    2996    2483   01F89                  ircon2        data   0b6h          ;interrupt request register        reset=000h
    2997    2484   01F89                  exicon0       data   0b7h          ;external interrupt control        reset=0f0h
    2998    2485   01F89                  exicon1       data   0bah          ;external interrupt control        reset=03fh
    2999    2486   01F89                  nmicon        data   0bbh          ;nimi control                      reset=000h
    3000    2487   01F89                  nmisr         data   0bch          ;nmi status                        reset=000h
    3001    2488   01F89                  bcon          data   0bdh          ;baud rate control                 reset=000h
    3002    2489   01F89                  bg            data   0beh          ;baud rate timer reload            reset=000h
    3003    2490   01F89                  fdcon         data   0e9h          ;fractional devider control        reset=000h
    3004    2491   01F89                  fdstep        data   0eah          ;fractional devider reload         reset=000h
    3005    2492   01F89                  fdres         data   0ebh          ;fractional divider result         reset=000h
    3006    2493   01F89                  
    3007    2494   01F89                  ;*******************************************************************************
    3008    2495   01F89                  ;
    3009    2496   01F89                  ; system control registers registers that can only be accessed in the non
    3010    2497   01F89                  ; mapped memory area (rmap=0) and page 1
    3011    2498   01F89                  ;
    3012    2499   01F89                  ;*******************************************************************************
    3013    2500   01F89                  
    3014    2501   01F89                  id            data   0b3h          ;identity register     reset=device dependent
    3015    2502   01F89                  pmcon0        data   0b4h          ;power mode control                reset=000h
    3016    2503   01F89                  pmcon1        data   0b5h          ;power mode control                reset=000h
    3017    2504   01F89                  osc_con       data   0b6h          ;osc control                       reset=008h
    3018    2505   01F89                  pll_con       data   0b7h          ;pll control                       reset=090h
    3019    2506   01F89                  cmcon         data   0bah          ;clock control                     reset=010h
    3020    2507   01F89                  passwd        data   0bbh          ;password register                 reset=007h
    3021    2508   01F89                  feal          data   0bch          ;flash error register              reset=000h
    3022    2509   01F89                  feah          data   0bdh          ;flash error address high          reset=000h
    3023    2510   01F89                  cocon         data   0beh          ;clock output control              reset=000h
    3024    2511   01F89                  misc_con      data   0e9h          ;miscellaneous control             reset=000h
    3025    2512   01F89                  
    3026    2513   01F89                  ;*******************************************************************************
    3027    2514   01F89                  ;
    3028    2515   01F89                  ; system control registers registers that can only be accessed in the non
    3029    2516   01F89                  ; mapped memory area (rmap=0) and page 3
    3030    2517   01F89                  ;
    3031    2518   01F89                  ;*******************************************************************************
    3032    2519   01F89                  
    3033    2520   01F89                  xaddrh        data   0b3h          ;on chip xram address high         reset=0f0h
    3034    2521   01F89                  ircon3        data   0b4h          ;interrupt request register        reset=000h
    3035    2522   01F89                  ircon4        data   0b5h          ;interrupt request register        reset=000h
    3036    2523   01F89                  modpisel1     data   0b7h          ;peripheral input select 1         reset=000h
    3037    2524   01F89                  modpisel2     data   0bah          ;peripheral input select 2         reset=000h
    3038    2525   01F89                  pmcon2        data   0bbh          ;power mode control 2              reset=000h
    3039    2526   01F89                  modsusp       data   0bdh          ;mudule suspend control            reset=001h
    3040    2527   01F89                  
    3041    2528   01F89                  ;*******************************************************************************
    3042    2529   01F89                  ;
    3043    2530   01F89                  ; port registers accessed in non mapped memory area (rmap=0) page independent
    3044    2531   01F89                  ;
    3045    2532   01F89                  ;*******************************************************************************
    3046    2533   01F89                  
    3047    2534   01F89                  port_page     data   0b2h          ;port page register                reset=000h
    3048    2535   01F89                  
    3049    2536   01F89                  ;*******************************************************************************
    3050    2537   01F89                  ;
    3051    2538   01F89                  ; port registers accessed in non mapped memory area (rmap=0) page 0
    3052    2539   01F89                  ;
    3053    2540   01F89                  ;*******************************************************************************
    3054    2541   01F89                  
    3055    2542   01F89                  p0_data       data   080h          ;port 0 data register              reset=000h
    3056    2543   01F89                  ;p0_data is bit addressable
    3057    2544   01F89                  p0_dir        data   086h          ;port 0 direction register         reset=000h
    3058    2545   01F89                  p1_data       data   090h          ;port 1 data register              reset=000h
    3059    2546   01F89                  ;p1_data is bit addressable
    3060    2547   01F89                  p1_dir        data   091h          ;port 1 direction register         reset=000h
    3061    2548   01F89                  p2_data       data   0a0h          ;port 2 data register              reset=000h
    3062    2549   01F89                  ;p2_data is bit addressable
    3063    2550   01F89                  p2_dir        data   0a1h          ;port 2 direction register         reset=000h
    3064    2551   01F89                  p3_data       data   0b0h          ;port 3 data register              reset=000h
    3065    2552   01F89                  ;p3_data is bit addressable
    3066    2553   01F89                  p3_dir        data   0b1h          ;port 3 direction register         reset=000h
    3067    2554   01F89                  p4_data       data   0c8h          ;port 4 data register              reset=000h
    3068    2555   01F89                  ;p4_data is bit addressable
    3069    2556   01F89                  p4_dir        data   0c9h          ;port 4 direction register         reset=000h
    3070    2557   01F89                  p5_data       data   092h          ;port 5 data register              reset=000h
    3071    2558   01F89                  p5_dir        data   093h          ;port 5 direction register         reset=000h
    3072    2559   01F89                  
    3073    2560   01F89                  ;*******************************************************************************
    3074    2561   01F89                  ;
    3075    2562   01F89                  ; port registers accessed in non mapped memory area (rmap=0) page 1
    3076    2563   01F89                  ;
    3077    2564   01F89                  ;*******************************************************************************
    3078    2565   01F89                  
    3079    2566   01F89                  p0_pudsel     data   080h          ;port 0 pull-up/down select        reset=0ffh
    3080    2567   01F89                  ;p0_data is bit addressable
    3081    2568   01F89                  p0_puden      data   086h          ;port 0 pull-up/down enable        reset=0c4h
    3082    2569   01F89                  p1_pudsel     data   090h          ;port 1 pull-up/down select        reset=0ffh
    3083    2570   01F89                  ;p1_data is bit addressable
    3084    2571   01F89                  p1_puden      data   091h          ;port 1 pull-up/down enable        reset=0ffh
    3085    2572   01F89                  p2_pudsel     data   0a0h          ;port 2 pull-up/down select        reset=0ffh
    3086    2573   01F89                  ;p2_data is bit addressable
    3087    2574   01F89                  p2_puden      data   0a1h          ;port 2 pull-up/down enable        reset=000h
    3088    2575   01F89                  p3_pudsel     data   0b0h          ;port 3 pull-up/down select        reset=0bfh
    3089    2576   01F89                  ;p3_data is bit addressable
    3090    2577   01F89                  p3_puden      data   0b1h          ;port 3 pull-up/down enable        reset=040h
    3091    2578   01F89                  p4_pudsel     data   0c8h          ;port 4 pull-up/down select        reset=0ffh
    3092    2579   01F89                  ;p4_data is bit addressable
    3093    2580   01F89                  p4_puden      data   0c9h          ;port 4 pull-up/down enable        reset=004h
    3094    2581   01F89                  p5_pudsel     data   092h          ;port 5 pull-up/down select        reset=0ffh
    3095    2582   01F89                  p5_puden      data   093h          ;port 5 pull-up/down enable        reset=0ffh
    3096    2583   01F89                  
    3097    2584   01F89                  ;*******************************************************************************
    3098    2585   01F89                  ;
    3099    2586   01F89                  ; port registers accessed in non mapped memory area (rmap=0) page 2
    3100    2587   01F89                  ;
    3101    2588   01F89                  ;*******************************************************************************
    3102    2589   01F89                  
    3103    2590   01F89                  p0_altsel0    data   080h          ;port 0 alternate select           reset=000h
    3104    2591   01F89                  ;p0_data is bit addressable
    3105    2592   01F89                  p0_altsel1    data   086h          ;port 0 alternate select           reset=000h
    3106    2593   01F89                  p1_altsel0    data   090h          ;port 1 alternate select           reset=000h
    3107    2594   01F89                  ;p1_data is bit addressable
    3108    2595   01F89                  p1_altsel1    data   091h          ;port 1 alternate select           reset=000h
    3109    2596   01F89                  p3_altsel0    data   0b0h          ;port 3 alternate select           reset=000h
    3110    2597   01F89                  ;p3_data is bit addressable
    3111    2598   01F89                  p3_altsel1    data   0b1h          ;port 3 alternate select           reset=000h
    3112    2599   01F89                  p4_altsel0    data   0c8h          ;port 4 alternate select           reset=000h
    3113    2600   01F89                  ;p4_data is bit addressable
    3114    2601   01F89                  p4_altsel1    data   0c9h          ;port 4 alternate select           reset=000h
    3115    2602   01F89                  p5_altsel0    data   092h          ;port 5 alternate select           reset=000h
    3116    2603   01F89                  p5_altsel1    data   093h          ;port 5 alternate select           reset=000h
    3117    2604   01F89                  
    3118    2605   01F89                  ;*******************************************************************************
    3119    2606   01F89                  ;
    3120    2607   01F89                  ; port registers accessed in non mapped memory area (rmap=0) page 3
    3121    2608   01F89                  ;
    3122    2609   01F89                  ;*******************************************************************************
    3123    2610   01F89                  
    3124    2611   01F89                  p0_od         data   080h          ;port 0 open drain control         reset=000h
    3125    2612   01F89                  ;p0_data is bit addressable
    3126    2613   01F89                  p1_od         data   090h          ;port 0 open drain control         reset=000h
    3127    2614   01F89                  ;p1_data is bit addressable
    3128    2615   01F89                  p3_od         data   0b0h          ;port 0 open drain control         reset=000h
    3129    2616   01F89                  ;p3_data is bit addressable
    3130    2617   01F89                  p4_od         data   0c8h          ;port 0 open drain control         reset=000h
    3131    2618   01F89                  ;p4_data is bit addressable
    3132    2619   01F89                  p5_od         data   092h          ;port 0 open drain control         reset=000h
    3133    2620   01F89                  
    3134    2621   01F89                  ;*******************************************************************************
    3135    2622   01F89                  ;
    3136    2623   01F89                  ; adc registers accessed in non mapped memory area (rmap=0) page independent
    3137    2624   01F89                  ;
    3138    2625   01F89                  ;*******************************************************************************
    3139    2626   01F89                  
    3140    2627   01F89                  adc_page      data   0d1h          ;adc page register                 reset=000h
    3141    2628   01F89                  
    3142    2629   01F89                  ;*******************************************************************************
    3143    2630   01F89                  ;
    3144    2631   01F89                  ; adc registers accessed in non mapped memory area (rmap=0) page 0
    3145    2632   01F89                  ;
    3146    2633   01F89                  ;*******************************************************************************
    3147    2634   01F89                  
    3148    2635   01F89                  adc_globctr   data   0cah          ;global control register           reset=030h
    3149    2636   01F89                  adc_globstr   data   0cbh          ;global status register            reset=000h
    3150    2637   01F89                  adc_prar      data   0cch          ;priority and arbitration          reset=000h
    3151    2638   01F89                  adc_lcbr      data   0cdh          ;limit check boundary              reset=0b7h
    3152    2639   01F89                  adc_inpcr0    data   0ceh          ;input class 0 register            reset=000h
    3153    2640   01F89                  adc_etrcr     data   0cfh          ;external trigger control          reset=000h
    3154    2641   01F89                  
    3155    2642   01F89                  ;*******************************************************************************
    3156    2643   01F89                  ;
    3157    2644   01F89                  ; adc registers accessed in non mapped memory area (rmap=0) page 1
    3158    2645   01F89                  ;
    3159    2646   01F89                  ;*******************************************************************************
    3160    2647   01F89                  
    3161    2648   01F89                  adc_chctr0    data   0cah          ;channel control register          reset=000h
    3162    2649   01F89                  adc_chctr1    data   0cbh          ;channel control register          reset=000h
    3163    2650   01F89                  adc_chctr2    data   0cch          ;channel control register          reset=000h
    3164    2651   01F89                  adc_chctr3    data   0cdh          ;channel control register          reset=000h
    3165    2652   01F89                  adc_chctr4    data   0ceh          ;channel control register          reset=000h
    3166    2653   01F89                  adc_chctr5    data   0cfh          ;channel control register          reset=000h
    3167    2654   01F89                  adc_chctr6    data   0d2h          ;channel control register          reset=000h
    3168    2655   01F89                  adc_chctr7    data   0d3h          ;channel control register          reset=000h
    3169    2656   01F89                  
    3170    2657   01F89                  ;*******************************************************************************
    3171    2658   01F89                  ;
    3172    2659   01F89                  ; adc registers accessed in non mapped memory area (rmap=0) page 2
    3173    2660   01F89                  ;
    3174    2661   01F89                  ;*******************************************************************************
    3175    2662   01F89                  
    3176    2663   01F89                  adc_resr0l    data   0cah          ;result register 0 low             reset=000h
    3177    2664   01F89                  adc_resr0h    data   0cbh          ;result register 0 high            reset=000h
    3178    2665   01F89                  adc_resr1l    data   0cch          ;result register 1 low             reset=000h
    3179    2666   01F89                  adc_resr1h    data   0cdh          ;result register 1 high            reset=000h
    3180    2667   01F89                  adc_resr2l    data   0ceh          ;result register 2 low             reset=000h
    3181    2668   01F89                  adc_resr2h    data   0cfh          ;result register 2 high            reset=000h
    3182    2669   01F89                  adc_resr3l    data   0d2h          ;result register 3 low             reset=000h
    3183    2670   01F89                  adc_resr3h    data   0d3h          ;result register 3 high            reset=000h
    3184    2671   01F89                  
    3185    2672   01F89                  ;*******************************************************************************
    3186    2673   01F89                  ;
    3187    2674   01F89                  ; adc registers accessed in non mapped memory area (rmap=0) page 3
    3188    2675   01F89                  ;
    3189    2676   01F89                  ;*******************************************************************************
    3190    2677   01F89                  
    3191    2678   01F89                  adc_resra0l   data   0cah          ;result register 0 l view          reset=000h
    3192    2679   01F89                  adc_resra0h   data   0cbh          ;result register 0 h view          reset=000h
    3193    2680   01F89                  adc_resra1l   data   0cch          ;result register 1 l view          reset=000h
    3194    2681   01F89                  adc_resra1h   data   0cdh          ;result register 1 h view          reset=000h
    3195    2682   01F89                  adc_resra2l   data   0ceh          ;result register 2 l view          reset=000h
    3196    2683   01F89                  adc_resra2h   data   0cfh          ;result register 2 h view          reset=000h
    3197    2684   01F89                  adc_resra3l   data   0d2h          ;result register 3 l view          reset=000h
    3198    2685   01F89                  adc_resra3h   data   0d3h          ;result register 3 h view          reset=000h
    3199    2686   01F89                  
    3200    2687   01F89                  ;*******************************************************************************
    3201    2688   01F89                  ;
    3202    2689   01F89                  ; adc registers accessed in non mapped memory area (rmap=0) page 4
    3203    2690   01F89                  ;
    3204    2691   01F89                  ;*******************************************************************************
    3205    2692   01F89                  
    3206    2693   01F89                  adc_rcr0      data   0cah          ;result control register           reset=000h
    3207    2694   01F89                  adc_rcr1      data   0cbh          ;result control register           reset=000h
    3208    2695   01F89                  adc_rcr2      data   0cch          ;result control register           reset=000h
    3209    2696   01F89                  adc_rcr3      data   0cdh          ;result control register           reset=000h
    3210    2697   01F89                  adc_vfcr      data   0ceh          ;valid flag clear register         reset=000h
    3211    2698   01F89                  
    3212    2699   01F89                  ;*******************************************************************************
    3213    2700   01F89                  ;
    3214    2701   01F89                  ; adc registers accessed in non mapped memory area (rmap=0) page 5
    3215    2702   01F89                  ;
    3216    2703   01F89                  ;*******************************************************************************
    3217    2704   01F89                  
    3218    2705   01F89                  adc_chinfr    data   0cah          ;channel interrupt flag register   reset=000h
    3219    2706   01F89                  adc_chincr    data   0cbh          ;channel interrupt clear register  reset=000h
    3220    2707   01F89                  adc_chinsr    data   0cch          ;channel interrupt set register    reset=000h
    3221    2708   01F89                  adc_chinpr    data   0cdh          ;channel interrupt node pointrer   reset=000h
    3222    2709   01F89                  adc_evinfr    data   0ceh          ;event interrupt flag register     reset=000h
    3223    2710   01F89                  adc_evincr    data   0cfh          ;event interrupt clear flag reg.   reset=000h
    3224    2711   01F89                  adc_evinsr    data   0d2h          ;event interrupt set flag register reset=000h
    3225    2712   01F89                  adc_evinpr    data   0d3h          ;event interrupt node pointer reg. reset=000h
    3226    2713   01F89                  
    3227    2714   01F89                  ;*******************************************************************************
    3228    2715   01F89                  ;
    3229    2716   01F89                  ; adc registers accessed in non mapped memory area (rmap=0) page 6
    3230    2717   01F89                  ;
    3231    2718   01F89                  ;*******************************************************************************
    3232    2719   01F89                  
    3233    2720   01F89                  adc_crcr1     data   0cah          ;conversion request control        reset=000h
    3234    2721   01F89                  adc_crpr1     data   0cbh          ;conversion request pending        reset=000h
    3235    2722   01F89                  adc_crmr1     data   0cch          ;conversion request mode           reset=000h
    3236    2723   01F89                  adc_qmr0      data   0cdh          ;queue mode                        reset=000h
    3237    2724   01F89                  adc_qsr0      data   0ceh          ;queue status register             reset=020h
    3238    2725   01F89                  adc_q0r0      data   0cfh          ;queue 0 register 0                reset=000h
    3239    2726   01F89                  adc_qbur0     data   0d2h          ;queue backup register             reset=000h
    3240    2727   01F89                  adc_qinr0     data   0d3h          ;queue input register              reset=000h
    3241    2728   01F89                  
    3242    2729   01F89                  ;*******************************************************************************
    3243    2730   01F89                  
    3244    2731   01F89                  ; timer 2 registers accessed in non mapped memory area (rmap=0)
    3245    2732   01F89                  ;
    3246    2733   01F89                  ;*******************************************************************************
    3247    2734   01F89                  
    3248    2735   01F89                  t2_t2con      data   0c0h          ;timer 2 control register          reset=000h
    3249    2736   01F89                  ;t2_t2con is bit addressable
    3250    2737   01F89                         tf2    bit    0c7h
    3251    2738   01F89                         exf2   bit    0c6h
    3252    2739   01F89                                                     ;2 bits are not implemented
    3253    2740   01F89                         exen2  bit    0c3h
    3254    2741   01F89                         tr2    bit    0c2h
    3255    2742   01F89                         ct2    bit    0c1h
    3256    2743   01F89                         cprl2  bit    0c0h
    3257    2744   01F89                  
    3258    2745   01F89                  t2_t2mod      data   0c1h          ;timer 2 mode register             reset=000h
    3259    2746   01F89                  t2_rc2l       data   0c2h          ;timer 2 reload/capture low        reset=000h
    3260    2747   01F89                  t2_rc2h       data   0c3h          ;timer 2 rel/cap high              reset=000h
    3261    2748   01F89                  t2_t2l        data   0c4h          ;timer 2 register low              reset=000h
    3262    2749   01F89                  t2_t2h        data   0c5h          ;timer 2 register high             reset=000h
    3263    2750   01F89                  
    3264    2751   01F89                  ;*******************************************************************************
    3265    2752   01F89                  ;
    3266    2753   01F89                  ; ccu6 registers are accessed in non mapped memory (rmap=0) page independent
    3267    2754   01F89                  ;
    3268    2755   01F89                  ;*******************************************************************************
    3269    2756   01F89                  
    3270    2757   01F89                  ccu6_page     data   0a3h          ;ccu6 page register                reset=000h
    3271    2758   01F89                  
    3272    2759   01F89                  ;*******************************************************************************
    3273    2760   01F89                  ;
    3274    2761   01F89                  ; ccu6 registers are accessed in non mapped memory (rmap=0) page 0
    3275    2762   01F89                  ;
    3276    2763   01F89                  ;*******************************************************************************
    3277    2764   01F89                  
    3278    2765   01F89                  ccu6_cc63srl  data   09ah          ;cap/comp shadow channel 63        reset=000h
    3279    2766   01F89                  ccu6_cc63srh  data   09bh          ;cap/comp shadow channel 63        reset=000h
    3280    2767   01F89                  ccu6_tctr4l   data   09ch          ;timer control low                 reset=000h
    3281    2768   01F89                  ccu6_tctr4h   data   09dh          ;timer control high                reset=000h
    3282    2769   01F89                  ccu6_mcmoutsl data   09eh          ;multichannel mode output shadow   reset=000h
    3283    2770   01F89                  ccu6_mcmoutsh data   09fh          ;multichannel mode output shadow   reset=000h
    3284    2771   01F89                  ccu6_isrl     data   0a4h          ;cap/com interrupt status          reset=000h
    3285    2772   01F89                  ccu6_isrh     data   0a5h          ;cap/com interrupt status          reset=000h
    3286    2773   01F89                  ccu6_cmpmodifl       data   0a6h   ;compare state modification reg.   reset=000h
    3287    2774   01F89                  ccu6_cmpmodifh       data   0a7h   ;compare state modification reg.   reset=000h
    3288    2775   01F89                  ccu6_cc60srl  data   0fah          ;cap/comp shadow channel 60        reset=000h
    3289    2776   01F89                  ccu6_cc60srh  data   0fbh          ;cap/comp shadow channel 60        reset=000h
    3290    2777   01F89                  ccu6_cc61srl  data   0fch          ;cap/comp shadow channel 61        reset=000h
    3291    2778   01F89                  ccu6_cc61srh  data   0fdh          ;cap/comp shadow channel 61        reset=000h
    3292    2779   01F89                  ccu6_cc62srl  data   0feh          ;cap/comp shadow channel 62        reset=000h
    3293    2780   01F89                  ccu6_cc62srh  data   0ffh          ;cap/comp shadow channel 62        reset=000h
    3294    2781   01F89                  
    3295    2782   01F89                  ;*******************************************************************************
    3296    2783   01F89                  ;
    3297    2784   01F89                  ; ccu6 registers are accessed in non mapped memory (rmap=0) page 1
    3298    2785   01F89                  ;
    3299    2786   01F89                  ;*******************************************************************************
    3300    2787   01F89                  
    3301    2788   01F89                  ccu6_cc63rl   data   09ah          ;cap/comp register channel 63      reset=000h
    3302    2789   01F89                  ccu6_cc63rh   data   09bh          ;cap/comp register channel 63      reset=000h
    3303    2790   01F89                  ccu6_t12prl   data   09ch          ;timer 12 period register          reset=000h
    3304    2791   01F89                  ccu6_t12prh   data   09dh          ;timer 12 period register          reset=000h
    3305    2792   01F89                  ccu6_t13prl   data   09eh          ;timer 13 period register          reset=000h
    3306    2793   01F89                  ccu6_t13prh   data   09fh          ;timer 13 period register          reset=000h
    3307    2794   01F89                  ccu6_t12dtcl  data   0a4h          ;timer 12 dead time control        reset=000h
    3308    2795   01F89                  ccu6_t12dtch  data   0a5h          ;timer 12 dead time control        reset=000h
    3309    2796   01F89                  ccu6_tctr0l   data   0a6h          ;timer control                     reset=000h
    3310    2797   01F89                  ccu6_tctr0h   data   0a7h          ;timer control                     reset=000h
    3311    2798   01F89                  ccu6_cc60rl   data   0fah          ;cap/comp register channel 60      reset=000h
    3312    2799   01F89                  ccu6_cc60rh   data   0fbh          ;cap/comp register channel 60      reset=000h
    3313    2800   01F89                  ccu6_cc61rl   data   0fch          ;cap/comp register channel 61      reset=000h
    3314    2801   01F89                  ccu6_cc61rh   data   0fdh          ;cap/comp register channel 61      reset=000h
    3315    2802   01F89                  ccu6_cc62rl   data   0feh          ;cap/comp register channel 62      reset=000h
    3316    2803   01F89                  ccu6_cc62rh   data   0ffh          ;cap/comp register channel 62      reset=000h
    3317    2804   01F89                  
    3318    2805   01F89                  ;*******************************************************************************
    3319    2806   01F89                  ;
    3320    2807   01F89                  ; ccu6 registers are accessed in non mapped memory (rmap=0) page 2
    3321    2808   01F89                  ;
    3322    2809   01F89                  ;*******************************************************************************
    3323    2810   01F89                  
    3324    2811   01F89                  ccu6_t12msell data   09ah          ;t12 cap/comp mode select          reset=000h
    3325    2812   01F89                  ccu6_t12mselh data   09bh          ;t12 cap/comp mode select          reset=000h
    3326    2813   01F89                  ccu6_ienl     data   09ch          ;cap/comp interrupt enable         reset=000h
    3327    2814   01F89                  ccu6_ienh     data   09dh          ;cap/comp interrupt enable         reset=000h
    3328    2815   01F89                  ccu6_inpl     data   09eh          ;cap/comp interrupt node pointer   reset=040h
    3329    2816   01F89                  ccu6_inph     data   09fh          ;cap/comp interrupt node pointer   reset=039h
    3330    2817   01F89                  ccu6_issl     data   0a4h          ;cap/comp interruopt status        reset=000h
    3331    2818   01F89                  ccu6_issh     data   0a5h          ;cap/comp interruopt status        reset=000h
    3332    2819   01F89                  ccu6_pslr     data   0a6h          ;passive state level register      reset=000h
    3333    2820   01F89                  ccu6_mcmctr   data   0a7h          ;multi channel mode control        reset=000h
    3334    2821   01F89                  ccu6_tctr2l   data   0fah          ;timer control register            reset=000h
    3335    2822   01F89                  ccu6_tctr2h   data   0fbh          ;timer control register            reset=000h
    3336    2823   01F89                  ccu6_modctrl  data   0fch          ;modulation control                reset=000h
    3337    2824   01F89                  ccu6_modctrh  data   0fdh          ;modulation control                reset=000h
    3338    2825   01F89                  ccu6_trpctrl  data   0feh          ;trap control register             reset=000h
    3339    2826   01F89                  ccu6_trpctrh  data   0ffh          ;trap control register             reset=000h
    3340    2827   01F89                  
    3341    2828   01F89                  ;*******************************************************************************
    3342    2829   01F89                  ;
    3343    2830   01F89                  ; ccu6 registers are accessed in non mapped memory (rmap=0) page 3
    3344    2831   01F89                  ;
    3345    2832   01F89                  ;*******************************************************************************
    3346    2833   01F89                  
    3347    2834   01F89                  ccu6_mcmoutl  data   09ah          ;multi channel mode output         reset=000h
    3348    2835   01F89                  ccu6_mcmouth  data   09bh          ;multi channel mode output         reset=000h
    3349    2836   01F89                  ccu6_isl      data   09ch          ;cap/comp interrupt status         reset=000h
    3350    2837   01F89                  ccu6_ish      data   09dh          ;cap/comp interrupt status         reset=000h
    3351    2838   01F89                  ccu6_pisel0l  data   09eh          ;port input selection register     reset=000h
    3352    2839   01F89                  ccu6_pisel0h  data   09fh          ;port input selection register     reset=000h
    3353    2840   01F89                  ccu6_pisel2   data   0a4h          ;port input selection register     reset=000h
    3354    2841   01F89                  ccu6_t12l     data   0fah          ;timer 12 register                 reset=000h
    3355    2842   01F89                  ccu6_t12h     data   0fbh          ;timer 12 register                 reset=000h
    3356    2843   01F89                  ccu6_t13l     data   0fch          ;timer 13 register                 reset=000h
    3357    2844   01F89                  ccu6_t13h     data   0fdh          ;timer 13 register                 reset=000h
    3358    2845   01F89                  ccu6_cmpstatl data   0feh          ;compare state register            reset=000h
    3359    2846   01F89                  ccu6_cmpstath data   0ffh          ;compare state register            reset=000h
    3360    2847   01F89                  
    3361    2848   01F89                  ;*******************************************************************************
    3362    2849   01F89                  ;
    3363    2850   01F89                  ; ssc registers can be accessed in the standard memory map (rmap=0)
    3364    2851   01F89                  ;
    3365    2852   01F89                  ;*******************************************************************************
    3366    2853   01F89                  
    3367    2854   01F89                  ssc_pisel     data   0a9h          ;port input select                 reset=000h
    3368    2855   01F89                  ssc_conl      data   0aah          ;control register programming mode reset=000h
    3369    2856   01F89                  ssc_conh      data   0abh          ;control register programming mode reset=000h
    3370    2857   01F89                  ssc_tbl       data   0ach          ;transmitter buffer                reset=000h
    3371    2858   01F89                  ssc_rbl       data   0adh          ;receiver buffer                   reset=000h
    3372    2859   01F89                  ssc_brl       data   0aeh          ;baud rate timer                   reset=000h
    3373    2860   01F89                  ssc_brh       data   0afh          ;baud rate timer                   reset=000h
    3374    2861   01F89                  
    3375    2862   01F89                  ;*******************************************************************************
    3376    2863   01F89                  ;
    3377    2864   01F89                  ; can registers can be accessed in the standard memory map (rmap=0)
    3378    2865   01F89                  ;
    3379    2866   01F89                  ;*******************************************************************************
    3380    2867   01F89                  
    3381    2868   01F89                  adcon         data   0d8h          ;adres/data control                reset=000h
    3382    2869   01F89                  ; adcon is bit addressable
    3383    2870   01F89                         v3     bit    0dfh
    3384    2871   01F89                         v2     bit    0deh
    3385    2872   01F89                         v1     bit    0ddh
    3386    2873   01F89                         v0     bit    0dch
    3387    2874   01F89                         auad1  bit    0dbh
    3388    2875   01F89                         auad0  bit    0dah
    3389    2876   01F89                         can_bsy bit   0d9h
    3390    2877   01F89                         rwen   bit    0d8h
    3391    2878   01F89                  
    3392    2879   01F89                  adl           data   0d9h          ;adres register low                reset=000h
    3393    2880   01F89                  adh           data   0dah          ;adres register low                reset=000h
    3394    2881   01F89                  data0         data   0dbh          ;can data                          reset=000h
    3395    2882   01F89                  data1         data   0dch          ;can data                          reset=000h
    3396    2883   01F89                  data2         data   0ddh          ;can data                          reset=000h
    3397    2884   01F89                  data3         data   0deh          ;can data                          reset=000h
    3398    2885   01F89                  
    3399    2886   01F89                  ;*******************************************************************************
    3400    2887   01F89                  ;
    3401    2888   01F89                  ; mdu registers can only be accessed in the mapped memory area (rmap=1)
    3402    2889   01F89                  ;
    3403    2890   01F89                  ;*******************************************************************************
    3404    2891   01F89                  
    3405    2892   01F89                  mdustat       data   0b0h          ;mdu status register               reset=000h
    3406    2893   01F89                  ;mdustat is bit addressable
    3407    2894   01F89                                                     ;5 bits are not implemented
    3408    2895   01F89                         bsy    bit    0b2h
    3409    2896   01F89                         ierr   bit    0b1h
    3410    2897   01F89                         irdy   bit    0b0h
    3411    2898   01F89                  
    3412    2899   01F89                  mducon        data   0b1h          ;mdu control                       reset=000h
    3413    2900   01F89                  md0           data   0b2h          ;mdu operand register              reset=000h
    3414    2901   01F89                  mr0           data   0b2h          ;mdu result register               reset=000h
    3415    2902   01F89                  md1           data   0b3h          ;mdu operand register              reset=000h
    3416    2903   01F89                  mr1           data   0b3h          ;mdu result register               reset=000h
    3417    2904   01F89                  md2           data   0b4h          ;mdu operand register              reset=000h
    3418    2905   01F89                  mr2           data   0b4h          ;mdu result register               reset=000h
    3419    2906   01F89                  md3           data   0b5h          ;mdu operand register              reset=000h
    3420    2907   01F89                  mr3           data   0b5h          ;mdu result register               reset=000h
    3421    2908   01F89                  md4           data   0b6h          ;mdu operand register              reset=000h
    3422    2909   01F89                  mr4           data   0b6h          ;mdu result register               reset=000h
    3423    2910   01F89                  md5           data   0b7h          ;mdu operand register              reset=000h
    3424    2911   01F89                  mr5           data   0b7h          ;mdu result register               reset=000h
    3425    2912   01F89                  
    3426    2913   01F89                  ;*******************************************************************************
    3427    2914   01F89                  ;
    3428    2915   01F89                  ; cordic registers can only be accessed in the mapped memory area (rmap=1)
    3429    2916   01F89                  ;
    3430    2917   01F89                  ;*******************************************************************************
    3431    2918   01F89                  
    3432    2919   01F89                  cd_cordxl     data   09ah          ;cordic x data low                 reset=000h
    3433    2920   01F89                  cd_cordxh     data   09bh          ;cordic x data high                reset=000h
    3434    2921   01F89                  cd_cordyl     data   09ch          ;cordic y data low                 reset=000h
    3435    2922   01F89                  cd_cordyh     data   09dh          ;cordic y data high                reset=000h
    3436    2923   01F89                  cd_cordzl     data   09eh          ;cordic z data low                 reset=000h
    3437    2924   01F89                  cd_cordzh     data   09fh          ;cordic z data high                reset=000h
    3438    2925   01F89                  cd_statc      data   0a0h          ;cordic status and control         reset=000h
    3439    2926   01F89                  ;cd_statc is bit addressable
    3440    2927   01F89                         keepz  bit    0a7h
    3441    2928   01F89                         keepy  bit    0a6h
    3442    2929   01F89                         keepx  bit    0a5h
    3443    2930   01F89                         dmap   bit    0a4h
    3444    2931   01F89                         int_en bit    0a3h
    3445    2932   01F89                         eoc    bit    0a2h
    3446    2933   01F89                         error  bit    0a1h
    3447    2934   01F89                         cd_bsy bit    0a0h
    3448    2935   01F89                  
    3449    2936   01F89                  cd_con        data   0a1h          ;cordic control register           reset=000h
    3450    2937   01F89                  
    3451    2938   01F89                  ;*******************************************************************************
    3452    2939   01F89                  ;
    3453    2940   01F89                  ; wdt registers can be accessed in the mapped memory area (rmap=1)
    3454    2941   01F89                  ;
    3455    2942   01F89                  ;*******************************************************************************
    3456    2943   01F89                  
    3457    2944   01F89                  wdtcon        data   0bbh          ;watchdog timer control            reset=000h
    3458    2945   01F89                  wdtrel        data   0bch          ;watchdog timer reload             reset=000h
    3459    2946   01F89                  wdtwinb       data   0bdh          ;wdt window boundry count          reset=000h
    3460    2947   01F89                  wdtl          data   0beh          ;wdt register low                  reset=000h
    3461    2948   01F89                  wdth          data   0bfh          ;wdt register high                 reset=000h
    3462    2949   01F89                  
    3463    2950   01F89                  ;*******************************************************************************
    3464    2951   01F89                  ;
    3465    2952   01F89                  ; t21 registers can be accessed in the mapped memory area (rmap=1)
    3466    2953   01F89                  ;
    3467    2954   01F89                  ;*******************************************************************************
    3468    2955   01F89                  
    3469    2956   01F89                  t21_t2con     data   0c0h          ;timer 21 control register         reset=000h
    3470    2957   01F89                  ;t2_t2con is bit addressable bits are aalready defined
    3471    2958   01F89                         ;tf2    bit    0c7h
    3472    2959   01F89                         ;exf2   bit    0c6h
    3473    2960   01F89                                                     ;2 bits are not implemented
    3474    2961   01F89                         ;exen2  bit    0c3h
    3475    2962   01F89                         ;tr2    bit    0c2h
    3476    2963   01F89                         ;ct2    bit    0c1h
    3477    2964   01F89                         ;cprl2  bit    0c0h
    3478    2965   01F89                  
    3479    2966   01F89                  t21_t2mod      data   0c1h          ;timer 21 mode register           reset=000h
    3480    2967   01F89                  t21_rc2l       data   0c2h          ;timer 21 rel/cap low             reset=000h
    3481    2968   01F89                  t21_rc2h       data   0c3h          ;timer 21 rel/cap high            reset=000h
    3482    2969   01F89                  t21_t2l        data   0c4h          ;timer 21 register low            reset=000h
    3483    2970   01F89                  t21_t2h        data   0c5h          ;timer 21 register high           reset=000h
    3484    2971   01F89                  
    3485    2972   01F89                  ;*******************************************************************************
    3486    2973   01F89                  ;
    3487    2974   01F89                  ; uart1 registers can be accessed in the mapped memory area (rmap=1)
    3488    2975   01F89                  ;
    3489    2976   01F89                  ;*******************************************************************************
    3490    2977   01F89                  
    3491    2978   01F89                  scon1         data   0c8h          ;sirial channel 1 control          reset=000h
    3492    2979   01F89                  ;s1con is bit addressable
    3493    2980   01F89                         sm01   bit    0cfh
    3494    2981   01F89                         sm11   bit    0ceh
    3495    2982   01F89                         sm21   bit    0cdh
    3496    2983   01F89                         ren1   bit    0cch
    3497    2984   01F89                         tb81   bit    0cbh
    3498    2985   01F89                         rb81   bit    0cah
    3499    2986   01F89                         ti1    bit    0c9h
    3500    2987   01F89                         ri1    bit    0c8h
    3501    2988   01F89                  
    3502    2989   01F89                  sbuf1         data   0c9h          ;serial channel 1 data             reset=000h
    3503    2990   01F89                  bcon1         data   0cah          ;baud rate control register        reset=000h
    3504    2991   01F89                  bg1           data   0cbh          ;baud rate timer reload            reset=000h
    3505    2992   01F89                  fdcon1        data   0cch          ;fractional devider control        reset=000h
    3506    2993   01F89                  fdstep1       data   0cdh          ;fractional devider reload         reset=000h
    3507    2994   01F89                  fdres1        data   0ceh          ;fractional devider result         reset=000h
    3508    2995   01F89                  
    3509    2996   01F89                  ;*******************************************************************************
    3510    2997   01F89                  ;
    3511    2998   01F89                  ; ocds registers can be accessed in mapped memory area (rmap=1)
    3512    2999   01F89                  ;
    3513    3000   01F89                  ;*******************************************************************************
    3514    3001   01F89                  
    3515    3002   01F89                  mmcr2         data   0e9h          ;monitor mode control              reset=01-h
    3516    3003   01F89                  mmcr          data   0f1h          ;monitor control                   reset=000h
    3517    3004   01F89                  mmsr          data   0f2h          ;monitor mode status               reset=000h
    3518    3005   01F89                  mmbpcr        data   0f3h          ;breakpoints control register      reset=000h
    3519    3006   01F89                  mmicr         data   0f4h          ;monitor mode interrupt control    reset=000h
    3520    3007   01F89                  mmdr          data   0f5h          ;monitor mode data transfer        reset=000h
    3521    3008   01F89                  hwbpsr        data   0f6h          ;hardware breakpoints select       reset=000h
    3522    3009   01F89                  hwbpdr        data   0f7h          ;hardware breakpoints data         reset=000h
    3523    3010   01F89                  mmwr1         data   0ebh          ;monitor work register 1           reset=000h
    3524    3011   01F89                  mmwr2         data   0ech          ;monitor work register 2           reset=000h
    3525    3012   01F89                  
    3526    3013   01F89                  ;end directive must be used, but has no signification
    3527    3014   01F89                  
    3528    3015   01F89                  end
    3529    3016   01F89                  
    3530    3017   01F89                  
    3531    3018   01F89                  
    3532    3019   01F89                  
    3533    3020   01F89                  
    3534    3021   01F89                  
    3535    3022   01F89                  
    3536    3023   01F89                  
    3537    3024   01F89                  
    3538    3025   01F89                  
    3539    3026   01F89                  
    3540    3027   01F89                  
    3541    3028   01F89                  
    3542    3029   01F89                  
    3543    3030   01F89                  
    3544    3031   01F89                  
